<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<title>THE REFLEX | RITNOME‚Ñ¢ ‚Äî Recall ¬∑ Replay ¬∑ Reflex ¬∑ React ¬∑ Rhythm</title>
<link rel="icon" type="image/png" href="favicon.png">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Outfit:wght@400;600;700&display=swap" rel="stylesheet">
<style>
:root{--cyan:#00CED1;--cyan-light:#40E0D0;--gold:#FFD700;--teal:#00D9A5;--pink:#FF1493;--purple:#9B59B6;--orange:#FF6B35;--dark:#0a0a0f;--card:#111118;--text:#FFFFFF;--muted:#8892a0;--border:rgba(255,255,255,0.1);--nav-height:50px;--accent:#00CED1}
*{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%;overflow:hidden;font-family:'Outfit',sans-serif;background:var(--dark);color:var(--text);touch-action:manipulation;-webkit-tap-highlight-color:transparent;-webkit-user-select:none;user-select:none}
body.en .lang-es{display:none!important}
body.es .lang-en{display:none!important}

.mini-nav{position:fixed;top:0;left:0;right:0;background:var(--card);border-bottom:1px solid var(--border);padding-top:env(safe-area-inset-top);z-index:1000}
.nav-row{display:flex;align-items:center;justify-content:space-between;height:50px;padding:0 12px}
.back-btn{display:flex;align-items:center;gap:6px;padding:8px 12px;background:transparent;border:1px solid var(--border);color:var(--muted);border-radius:8px;font-family:'Outfit',sans-serif;font-size:0.75rem;font-weight:600;cursor:pointer;text-decoration:none;transition:all 0.2s}
.back-btn:active{border-color:var(--cyan);color:var(--cyan)}
.nav-title{font-family:'Bebas Neue',sans-serif;font-size:1.2rem;letter-spacing:2px;color:var(--cyan)}
.nav-right{display:flex;align-items:center;gap:6px}
.nav-lang{display:flex;gap:2px}
.nav-lang-btn{padding:5px 8px;border:1px solid var(--border);background:0;color:var(--muted);border-radius:4px;font-size:0.6rem;font-weight:600;cursor:pointer;min-width:28px;min-height:28px}
.nav-lang-btn.active{border-color:var(--gold);color:var(--gold)}

.screen{display:none;width:100%;min-height:100dvh;padding-top:calc(var(--nav-height) + env(safe-area-inset-top));padding-bottom:env(safe-area-inset-bottom);overflow-y:auto;overflow-x:hidden}
.screen.active{display:block}

#screen-demo{background:var(--dark)}
.demo-container{max-width:420px;margin:0 auto;padding:15px 15px 40px;display:flex;flex-direction:column;align-items:center}
.demo-header{text-align:center;margin-bottom:12px}
.demo-badge{display:inline-block;background:rgba(0,206,209,0.15);color:var(--cyan);padding:5px 14px;border-radius:15px;font-size:0.6rem;font-weight:700;text-transform:uppercase;letter-spacing:1.5px;margin-bottom:8px}
.demo-title{font-family:'Bebas Neue',sans-serif;font-size:2rem;letter-spacing:3px;color:var(--cyan);margin-bottom:4px}
.demo-subtitle{font-size:0.75rem;color:var(--muted)}

.demo-court-wrap{position:relative;margin:15px 0}
.demo-label{position:absolute;top:-28px;left:50%;transform:translateX(-50%);font-family:'Bebas Neue',sans-serif;font-size:0.75rem;letter-spacing:2px;color:var(--gold);background:rgba(0,0,0,0.85);padding:5px 14px;border-radius:12px;white-space:nowrap;z-index:10;border:1px solid rgba(255,215,0,0.3);transition:all 0.3s}
.demo-label.phase-watch{color:var(--gold);border-color:rgba(255,215,0,0.4)}
.demo-label.phase-find{color:var(--cyan);border-color:rgba(0,206,209,0.4)}
.demo-label.phase-success{color:var(--teal);border-color:rgba(0,217,165,0.4)}

.demo-court{display:grid;grid-template-columns:repeat(5,1fr);gap:4px;padding:8px;background:#1a1a24;border-radius:14px;border:3px solid var(--cyan);width:240px;height:240px;position:relative}
.demo-court::before{content:'';position:absolute;inset:0;background:rgba(10,10,15,0.5);border-radius:11px;pointer-events:none}
.demo-cell{aspect-ratio:1;border-radius:5px;background:rgba(255,255,255,0.08);border:2px solid rgba(255,255,255,0.15);display:flex;align-items:center;justify-content:center;position:relative;z-index:1;transition:all 0.15s}
.demo-cell.lit{background:var(--cyan);border-color:var(--cyan);box-shadow:0 0 15px var(--cyan);transform:scale(1.05)}
.demo-cell.selected{background:rgba(0,206,209,0.4);border-color:var(--cyan)}
.demo-cell.correct{background:var(--teal);border-color:var(--teal);box-shadow:0 0 12px rgba(0,217,165,0.5)}
.demo-court.joy-pulse{animation:joyPulse 0.5s ease-out}
@keyframes joyPulse{0%{box-shadow:0 0 0 0 rgba(0,206,209,0.7)}50%{box-shadow:0 0 25px 8px rgba(0,206,209,0.4)}100%{box-shadow:none}}

.playbook-section{width:100%;max-width:380px;margin:20px 0}
.playbook-toggle{display:flex;align-items:center;justify-content:center;gap:10px;width:100%;padding:14px 20px;background:linear-gradient(135deg,rgba(0,206,209,0.08),rgba(255,215,0,0.05));border:1px solid rgba(0,206,209,0.2);border-radius:12px;cursor:pointer;transition:all 0.3s}
.playbook-toggle:active{transform:scale(0.98);border-color:var(--cyan)}
.playbook-toggle-icon{font-size:1.2rem}
.playbook-toggle-text{font-family:'Bebas Neue',sans-serif;font-size:1rem;letter-spacing:2px;color:var(--cyan)}
.playbook-toggle-arrow{color:var(--cyan);font-size:0.8rem;transition:transform 0.3s}
.playbook-toggle.open .playbook-toggle-arrow{transform:rotate(180deg)}
.playbook-content{max-height:0;overflow:hidden;transition:max-height 0.4s ease}
.playbook-content.open{max-height:800px}
.playbook-inner{padding:15px 0}
.playbook-card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:15px;margin-bottom:10px}
.playbook-card-title{font-family:'Bebas Neue',sans-serif;font-size:0.9rem;letter-spacing:2px;color:var(--cyan);margin-bottom:10px;display:flex;align-items:center;gap:8px}
.playbook-step{display:flex;gap:10px;margin-bottom:10px;align-items:flex-start}
.playbook-step:last-child{margin-bottom:0}
.playbook-step-num{width:22px;height:22px;border-radius:50%;background:var(--cyan);color:var(--dark);font-family:'Bebas Neue',sans-serif;font-size:0.75rem;display:flex;align-items:center;justify-content:center;flex-shrink:0}
.playbook-step-text{font-size:0.75rem;color:var(--text);line-height:1.5}
.playbook-step-text strong{color:var(--gold)}
.playbook-tip{background:rgba(0,206,209,0.08);border-left:3px solid var(--cyan);padding:10px 12px;border-radius:0 8px 8px 0;margin-top:12px}
.playbook-tip-title{font-size:0.6rem;color:var(--cyan);text-transform:uppercase;letter-spacing:1px;margin-bottom:4px}
.playbook-tip-text{font-size:0.7rem;color:var(--muted);line-height:1.4}

.demo-cta{width:100%;max-width:320px;margin-top:20px}
.play-now-btn{width:100%;padding:16px 24px;border:none;border-radius:12px;font-family:'Bebas Neue',sans-serif;font-size:1.4rem;letter-spacing:4px;cursor:pointer;background:linear-gradient(135deg,var(--cyan),var(--cyan-light));color:var(--dark);box-shadow:0 4px 20px rgba(0,206,209,0.4);transition:all 0.3s;animation:demoPulse 2s ease-in-out infinite}
.play-now-btn:active{transform:scale(0.98)}
@keyframes demoPulse{0%,100%{box-shadow:0 4px 20px rgba(0,206,209,0.4)}50%{box-shadow:0 4px 30px rgba(0,206,209,0.7)}}
.login-link{display:block;text-align:center;margin-top:15px;font-size:0.75rem;color:var(--muted)}
.login-link a{color:var(--gold);text-decoration:none}
.login-link a:active{text-decoration:underline}
.ritnome-promo{display:flex;align-items:center;justify-content:center;gap:8px;margin-top:25px;padding:10px 16px;background:rgba(255,215,0,0.05);border:1px solid rgba(255,215,0,0.15);border-radius:20px}
.ritnome-promo .pulse-dot{width:8px;height:8px;background:var(--gold);border-radius:50%;animation:pulseDot 1s ease-in-out infinite}
@keyframes pulseDot{0%,100%{opacity:0.3;transform:scale(0.8)}50%{opacity:1;transform:scale(1.2)}}
.ritnome-promo-text{font-size:0.6rem;color:var(--muted);letter-spacing:1px}
.ritnome-promo-text span{font-family:'Bebas Neue',sans-serif;color:var(--gold);font-size:0.8rem;letter-spacing:2px}

#screen-trophy{background:var(--dark)}
.trophy-container{max-width:420px;margin:0 auto;padding:15px 15px 40px}
.trophy-header{text-align:center;margin-bottom:20px}
.trophy-icon{font-size:2.5rem;margin-bottom:5px}
.trophy-title{font-family:'Bebas Neue',sans-serif;font-size:1.8rem;letter-spacing:3px;color:var(--gold);margin-bottom:4px}
.trophy-subtitle{font-size:0.75rem;color:var(--muted)}
.bpm-section{margin-bottom:20px}
.bpm-section-title{font-family:'Bebas Neue',sans-serif;font-size:0.85rem;letter-spacing:2px;color:var(--text);margin-bottom:10px;text-align:center}
.bpm-tier{background:var(--card);border:2px solid var(--border);border-radius:14px;padding:15px;margin-bottom:10px;cursor:pointer;transition:all 0.3s}
.bpm-tier:active{transform:scale(0.98)}
.bpm-tier.active{border-color:var(--cyan);background:rgba(0,206,209,0.08)}
.bpm-tier.locked{opacity:0.6;cursor:not-allowed}
.bpm-tier.locked:active{transform:none}
.bpm-tier-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.bpm-tier-left{display:flex;align-items:center;gap:10px}
.bpm-tier-icon{font-size:1.3rem}
.bpm-tier-name{font-family:'Bebas Neue',sans-serif;font-size:1rem;letter-spacing:1px;color:var(--text)}
.bpm-tier-bpm{font-size:0.6rem;color:var(--muted)}
.bpm-tier-status{font-size:0.7rem;padding:4px 10px;border-radius:10px;font-weight:600}
.bpm-tier-status.unlocked{background:rgba(0,206,209,0.15);color:var(--cyan)}
.bpm-tier-status.locked{background:rgba(255,215,0,0.15);color:var(--gold)}
.bpm-tier-progress{display:flex;align-items:center;justify-content:space-between}
.bpm-level-badge{font-family:'Bebas Neue',sans-serif;font-size:1.1rem;color:var(--cyan)}
.bpm-score{font-size:0.7rem;color:var(--muted)}
.level-section{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:15px;margin-bottom:20px}
.level-section-title{font-size:0.6rem;color:var(--muted);text-transform:uppercase;letter-spacing:1.5px;text-align:center;margin-bottom:10px}
.level-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:6px}
.level-btn{aspect-ratio:1;border:2px solid var(--border);background:transparent;border-radius:8px;font-family:'Bebas Neue',sans-serif;font-size:1rem;color:var(--muted);cursor:pointer;transition:all 0.2s;display:flex;align-items:center;justify-content:center}
.level-btn:active{transform:scale(0.95)}
.level-btn.active{border-color:var(--cyan);color:var(--cyan);background:rgba(0,206,209,0.1)}
.level-info{display:flex;justify-content:space-between;align-items:center;margin-top:12px;padding-top:12px;border-top:1px solid var(--border)}
.level-info-label{font-size:0.65rem;color:var(--muted)}
.level-info-value{font-family:'Bebas Neue',sans-serif;font-size:0.9rem;color:var(--cyan)}
.upgrade-banner{background:linear-gradient(135deg,rgba(255,215,0,0.1),rgba(0,206,209,0.08));border:1px solid rgba(255,215,0,0.25);border-radius:12px;padding:15px;text-align:center;margin-bottom:20px}
.upgrade-banner-text{font-size:0.75rem;color:var(--text);margin-bottom:8px}
.upgrade-banner-chips{display:flex;justify-content:center;gap:6px;margin-bottom:10px}
.upgrade-chip{padding:5px 10px;border-radius:8px;font-family:'Bebas Neue',sans-serif;font-size:0.65rem}
.upgrade-chip.unlocked{background:rgba(0,206,209,0.15);color:var(--cyan)}
.upgrade-chip.locked{background:rgba(255,215,0,0.15);color:var(--gold)}
.upgrade-banner-btn{display:inline-block;padding:10px 25px;background:linear-gradient(135deg,var(--gold),#FFA500);color:var(--dark);text-decoration:none;border-radius:20px;font-family:'Bebas Neue',sans-serif;font-size:0.85rem;letter-spacing:2px}
.upgrade-banner-btn:active{transform:scale(0.95)}
.letsgo-btn{width:100%;padding:16px 24px;border:none;border-radius:12px;font-family:'Bebas Neue',sans-serif;font-size:1.3rem;letter-spacing:4px;cursor:pointer;background:linear-gradient(135deg,var(--cyan),var(--cyan-light));color:var(--dark);box-shadow:0 4px 20px rgba(0,206,209,0.3);transition:all 0.3s}
.letsgo-btn:active{transform:scale(0.98)}

#screen-play{background:var(--dark);overflow:hidden}
.play-container{width:100%;max-width:420px;height:calc(100dvh - var(--nav-height) - env(safe-area-inset-top));margin:0 auto;padding:8px 10px;display:flex;flex-direction:column}
.play-stats{display:flex;justify-content:center;gap:15px;padding:6px 10px;background:var(--card);border-radius:8px;margin-bottom:6px}
.play-stat{text-align:center}
.play-stat-value{font-family:'Bebas Neue',sans-serif;font-size:1.1rem;color:var(--cyan);line-height:1}
.play-stat-label{font-size:0.45rem;color:var(--muted);text-transform:uppercase;letter-spacing:0.5px}
.play-message{background:var(--card);border:2px solid var(--cyan);border-radius:8px;padding:8px;text-align:center;margin-bottom:6px}
.play-message-text{font-family:'Bebas Neue',sans-serif;font-size:0.95rem;letter-spacing:2px;color:var(--text)}
.play-message-text.watch{color:var(--gold)}
.play-message-text.go{color:var(--cyan)}
.play-message-text.perfect{color:var(--teal)}
.play-message-text.miss{color:var(--pink)}
.play-progress{display:flex;justify-content:center;align-items:center;gap:10px;padding:6px;background:var(--card);border-radius:8px;margin-bottom:6px}
.play-progress-label{font-family:'Bebas Neue',sans-serif;font-size:0.7rem;color:var(--muted);letter-spacing:1px}
.play-progress-stars{display:flex;gap:8px}
.play-progress-star{font-size:1.3rem;opacity:0.25;transition:all 0.3s}
.play-progress-star.earned{opacity:1;transform:scale(1.15);filter:drop-shadow(0 0 4px var(--cyan))}
.play-court-wrap{flex:1;display:flex;align-items:center;justify-content:center;min-height:0}
.play-court{display:grid;grid-template-columns:repeat(5,1fr);gap:4px;padding:8px;background:#1a1a24;background-image:url('/icon.png');background-size:80%;background-position:center;background-repeat:no-repeat;border-radius:16px;border:3px solid var(--cyan);width:min(100%,calc(100dvh - 340px),320px);height:min(100%,calc(100dvh - 340px),320px);min-width:200px;min-height:200px;aspect-ratio:1;position:relative}
.play-court::before{content:'';position:absolute;inset:0;background:rgba(10,10,15,0.6);border-radius:13px;pointer-events:none}
.play-cell{aspect-ratio:1;border-radius:6px;background:rgba(255,255,255,0.08);border:2px solid rgba(255,255,255,0.2);display:flex;align-items:center;justify-content:center;cursor:pointer;position:relative;z-index:1;transition:all 0.15s}
.play-cell:active:not(.disabled){transform:scale(0.95)}
.play-cell.lit{background:var(--cyan)!important;border-color:var(--cyan)!important;box-shadow:0 0 20px var(--cyan);transform:scale(1.08)}
.play-cell.selected{background:rgba(0,206,209,0.4)!important;border-color:var(--cyan)!important}
.play-cell.correct{background:var(--teal)!important;border-color:var(--teal)!important;box-shadow:0 0 12px var(--teal)}
.play-cell.wrong{background:var(--pink)!important;border-color:var(--pink)!important;box-shadow:0 0 12px var(--pink)}
.play-cell.missed{border:3px dashed var(--cyan)!important;background:rgba(0,206,209,0.2)!important}
.play-court.joy-pulse{animation:joyPulse 0.5s ease-out}
.play-info{display:flex;justify-content:space-between;align-items:center;padding:6px 10px;background:var(--card);border-radius:8px;margin:6px 0}
.play-info-badge{font-family:'Bebas Neue',sans-serif;font-size:0.85rem;letter-spacing:2px;color:var(--cyan)}
.play-info-taps{font-family:'Bebas Neue',sans-serif;font-size:0.9rem;color:var(--teal)}
.play-info-score{font-family:'Bebas Neue',sans-serif;font-size:1rem;color:var(--gold)}
.play-action-btn{width:100%;padding:14px;border:none;border-radius:10px;font-family:'Bebas Neue',sans-serif;font-size:1.2rem;letter-spacing:4px;cursor:pointer;background:linear-gradient(135deg,var(--cyan),var(--cyan-light));color:var(--dark);transition:all 0.3s}
.play-action-btn:disabled{opacity:0.5;cursor:not-allowed}
.play-action-btn:active:not(:disabled){transform:scale(0.98)}
.emoji-container{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:9999;overflow:hidden}
.burst-emoji{position:absolute;font-size:1.6rem;animation:emojiBurst 1.2s ease-out forwards}
@keyframes emojiBurst{0%{opacity:1;transform:translate(-50%,-50%) scale(0.3)}20%{opacity:1;transform:translate(-50%,-50%) scale(1.2)}100%{opacity:0;transform:translate(var(--tx),var(--ty)) scale(0.8) rotate(var(--rot))}}
.burst-emoji.big{font-size:2.2rem}
.burst-emoji.party{font-size:1.8rem;animation-duration:2s}
.coach-message{position:fixed;bottom:100px;left:50%;transform:translateX(-50%) translateY(100px);background:linear-gradient(135deg,var(--cyan),var(--cyan-light));color:var(--dark);padding:10px 20px;border-radius:14px;font-weight:700;font-size:0.9rem;opacity:0;transition:all 0.3s;z-index:100}
.coach-message.show{transform:translateX(-50%) translateY(0);opacity:1}
.overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.92);display:none;align-items:center;justify-content:center;z-index:2000;padding:20px}
.overlay.show{display:flex}
.overlay-card{background:var(--card);border:2px solid var(--cyan);border-radius:14px;padding:25px;text-align:center;max-width:300px;width:100%}
.overlay-emoji{font-size:2.8rem;margin-bottom:10px}
.overlay-title{font-family:'Bebas Neue',sans-serif;font-size:1.5rem;letter-spacing:2px;color:var(--cyan);margin-bottom:8px}
.overlay-message{color:var(--muted);margin-bottom:15px;font-size:0.85rem;line-height:1.4}
.overlay-btn{min-height:46px;padding:14px 28px;border:none;border-radius:10px;font-family:'Bebas Neue',sans-serif;font-size:1rem;letter-spacing:2px;cursor:pointer;margin:5px;background:linear-gradient(135deg,var(--cyan),var(--cyan-light));color:var(--dark)}
.overlay-btn:active{transform:scale(0.95)}
.overlay-btn.secondary{background:transparent;border:1px solid var(--muted);color:var(--muted)}
@media(max-height:650px){.demo-court{width:200px;height:200px}.play-court{width:min(100%,calc(100dvh - 300px),280px);height:min(100%,calc(100dvh - 300px),280px)}}
@media(max-height:550px){.demo-court{width:180px;height:180px}.play-stats{padding:4px 8px;gap:10px}.play-stat-value{font-size:0.95rem}.play-message{padding:5px}.play-message-text{font-size:0.8rem}.play-progress{padding:4px}.play-progress-star{font-size:1.1rem}.play-court{width:min(100%,calc(100dvh - 260px),240px);height:min(100%,calc(100dvh - 260px),240px);min-width:160px;min-height:160px}.play-action-btn{padding:10px;font-size:1rem}}
</style>
</head>
<body class="en">
<nav class="mini-nav">
<div class="nav-row">
<a href="/" class="back-btn" id="backBtn">‚Üê <span class="lang-en">BACK</span><span class="lang-es">ATR√ÅS</span></a>
<div class="nav-title">THE REFLEX</div>
<div class="nav-right"><div class="nav-lang"><button class="nav-lang-btn active" id="btnEn">EN</button><button class="nav-lang-btn" id="btnEs">ES</button></div></div>
</div>
</nav>

<div class="screen active" id="screen-demo">
<div class="demo-container">
<div class="demo-header">
<div class="demo-badge"><span class="lang-en">FREE DEMO</span><span class="lang-es">DEMO GRATIS</span></div>
<h1 class="demo-title">THE REFLEX</h1>
<p class="demo-subtitle"><span class="lang-en">Flash Memory Challenge</span><span class="lang-es">Desaf√≠o de Memoria Visual</span></p>
</div>
<div class="demo-court-wrap">
<div class="demo-label" id="demoLabel"><span class="lang-en">üëÄ WATCH...</span><span class="lang-es">üëÄ MIRA...</span></div>
<div class="demo-court" id="demoCourt"></div>
</div>
<div class="playbook-section">
<div class="playbook-toggle" id="playbookToggle"><span class="playbook-toggle-icon">üìñ</span><span class="playbook-toggle-text"><span class="lang-en">THE PLAYBOOK</span><span class="lang-es">EL MANUAL</span></span><span class="playbook-toggle-arrow">‚ñº</span></div>
<div class="playbook-content" id="playbookContent">
<div class="playbook-inner">
<div class="playbook-card">
<div class="playbook-card-title">üéØ <span class="lang-en">OBJECTIVE</span><span class="lang-es">OBJETIVO</span></div>
<div class="playbook-step"><div class="playbook-step-num">1</div><div class="playbook-step-text"><span class="lang-en"><strong>Watch</strong> multiple cells flash at once</span><span class="lang-es"><strong>Observa</strong> varias celdas iluminarse a la vez</span></div></div>
<div class="playbook-step"><div class="playbook-step-num">2</div><div class="playbook-step-text"><span class="lang-en"><strong>Remember</strong> which cells lit up</span><span class="lang-es"><strong>Recuerda</strong> cu√°les celdas se iluminaron</span></div></div>
<div class="playbook-step"><div class="playbook-step-num">3</div><div class="playbook-step-text"><span class="lang-en"><strong>Find</strong> them all by tapping (any order)</span><span class="lang-es"><strong>Encu√©ntralas</strong> toc√°ndolas (cualquier orden)</span></div></div>
</div>
<div class="playbook-card">
<div class="playbook-card-title">‚≠ê <span class="lang-en">PROGRESSION</span><span class="lang-es">PROGRESI√ìN</span></div>
<div class="playbook-step"><div class="playbook-step-num">‚Üí</div><div class="playbook-step-text"><span class="lang-en">Get <strong>2 perfect rounds</strong> to level up</span><span class="lang-es">Consigue <strong>2 rondas perfectas</strong> para subir de nivel</span></div></div>
<div class="playbook-step"><div class="playbook-step-num">‚Üí</div><div class="playbook-step-text"><span class="lang-en">Higher levels = <strong>more cells</strong> to find</span><span class="lang-es">Niveles m√°s altos = <strong>m√°s celdas</strong> para encontrar</span></div></div>
<div class="playbook-step"><div class="playbook-step-num">‚Üí</div><div class="playbook-step-text"><span class="lang-en">Tap wrong? Progress resets, try again!</span><span class="lang-es">¬øTocaste mal? El progreso se reinicia, ¬°intenta de nuevo!</span></div></div>
</div>
<div class="playbook-card">
<div class="playbook-card-title">‚ö° <span class="lang-en">RITNOME‚Ñ¢ SPEEDS</span><span class="lang-es">VELOCIDADES RITNOME‚Ñ¢</span></div>
<div class="playbook-step"><div class="playbook-step-num">üèãÔ∏è</div><div class="playbook-step-text"><span class="lang-en"><strong>Training (60 BPM)</strong> ‚Äî Long flash (2.5s)</span><span class="lang-es"><strong>Entrenamiento (60 BPM)</strong> ‚Äî Destello largo (2.5s)</span></div></div>
<div class="playbook-step"><div class="playbook-step-num">üéØ</div><div class="playbook-step-text"><span class="lang-en"><strong>Tempo (90 BPM)</strong> ‚Äî Medium flash (1.5s)</span><span class="lang-es"><strong>Tempo (90 BPM)</strong> ‚Äî Destello medio (1.5s)</span></div></div>
<div class="playbook-step"><div class="playbook-step-num">‚ö°</div><div class="playbook-step-text"><span class="lang-en"><strong>Elite (120 BPM)</strong> ‚Äî Quick flash (0.8s)</span><span class="lang-es"><strong>Elite (120 BPM)</strong> ‚Äî Destello r√°pido (0.8s)</span></div></div>
<div class="playbook-tip"><div class="playbook-tip-title">üí° <span class="lang-en">TIP</span><span class="lang-es">CONSEJO</span></div><div class="playbook-tip-text"><span class="lang-en">Scan the whole grid ‚Äî don't focus on just one area!</span><span class="lang-es">¬°Escanea toda la cuadr√≠cula ‚Äî no te enfoques en una sola √°rea!</span></div></div>
</div>
</div>
</div>
</div>
<div class="demo-cta">
<button class="play-now-btn" id="playNowBtn"><span class="lang-en">‚ñ∂ PLAY NOW</span><span class="lang-es">‚ñ∂ JUGAR AHORA</span></button>
<p class="login-link"><span class="lang-en">Already have a PIN? <a href="/login">Login</a></span><span class="lang-es">¬øYa tienes PIN? <a href="/login">Entrar</a></span></p>
</div>
<div class="ritnome-promo"><div class="pulse-dot"></div><div class="ritnome-promo-text"><span class="lang-en">Powered by</span><span class="lang-es">Impulsado por</span> <span>RITNOME‚Ñ¢</span></div></div>
</div>
</div>

<div class="screen" id="screen-trophy">
<div class="trophy-container">
<div class="trophy-header"><div class="trophy-icon">‚ö°</div><h1 class="trophy-title"><span class="lang-en">YOUR PROGRESS</span><span class="lang-es">TU PROGRESO</span></h1><p class="trophy-subtitle"><span class="lang-en">THE REFLEX Levels</span><span class="lang-es">Niveles de THE REFLEX</span></p></div>
<div class="bpm-section">
<div class="bpm-section-title"><span class="lang-en">SELECT RITNOME‚Ñ¢ SPEED</span><span class="lang-es">SELECCIONA VELOCIDAD RITNOME‚Ñ¢</span></div>
<div class="bpm-tier active" id="tierSlow" data-speed="slow"><div class="bpm-tier-header"><div class="bpm-tier-left"><span class="bpm-tier-icon">üèãÔ∏è</span><div class="bpm-tier-info"><div class="bpm-tier-name">TRAINING</div><div class="bpm-tier-bpm">Ritnome‚Ñ¢ 60 BPM</div></div></div><span class="bpm-tier-status unlocked">‚úì <span class="lang-en">FREE</span><span class="lang-es">GRATIS</span></span></div><div class="bpm-tier-progress"><span class="bpm-level-badge" id="levelSlow">LEVEL 1</span><span class="bpm-score" id="scoreSlow">0 pts</span></div></div>
<div class="bpm-tier locked" id="tierMed" data-speed="med"><div class="bpm-tier-header"><div class="bpm-tier-left"><span class="bpm-tier-icon">üéØ</span><div class="bpm-tier-info"><div class="bpm-tier-name">TEMPO</div><div class="bpm-tier-bpm">Ritnome‚Ñ¢ 90 BPM</div></div></div><span class="bpm-tier-status locked">üîí <span class="lang-en">PRO</span><span class="lang-es">PRO</span></span></div><div class="bpm-tier-progress"><span class="bpm-level-badge" id="levelMed">LEVEL 1</span><span class="bpm-score" id="scoreMed">0 pts</span></div></div>
<div class="bpm-tier locked" id="tierFast" data-speed="fast"><div class="bpm-tier-header"><div class="bpm-tier-left"><span class="bpm-tier-icon">‚ö°</span><div class="bpm-tier-info"><div class="bpm-tier-name">ELITE</div><div class="bpm-tier-bpm">Ritnome‚Ñ¢ 120 BPM</div></div></div><span class="bpm-tier-status locked">üîí <span class="lang-en">PRO</span><span class="lang-es">PRO</span></span></div><div class="bpm-tier-progress"><span class="bpm-level-badge" id="levelFast">LEVEL 1</span><span class="bpm-score" id="scoreFast">0 pts</span></div></div>
</div>
<div class="level-section">
<div class="level-section-title"><span class="lang-en">SELECT LEVEL</span><span class="lang-es">SELECCIONA NIVEL</span></div>
<div class="level-grid" id="levelGrid"><button class="level-btn active" data-level="1">1</button><button class="level-btn" data-level="2">2</button><button class="level-btn" data-level="3">3</button><button class="level-btn" data-level="4">4</button><button class="level-btn" data-level="5">5</button><button class="level-btn" data-level="6">6</button><button class="level-btn" data-level="7">7</button><button class="level-btn" data-level="8">8</button><button class="level-btn" data-level="9">9</button><button class="level-btn" data-level="10">10</button></div>
<div class="level-info"><span class="level-info-label"><span class="lang-en">Cells to find:</span><span class="lang-es">Celdas a encontrar:</span></span><span class="level-info-value" id="cellsDisplay">5</span></div>
</div>
<div class="upgrade-banner" id="upgradeBanner"><p class="upgrade-banner-text"><span class="lang-en">üöÄ Unlock TEMPO & ELITE speeds!</span><span class="lang-es">üöÄ ¬°Desbloquea velocidades TEMPO y ELITE!</span></p><div class="upgrade-banner-chips"><span class="upgrade-chip unlocked">‚úì 60</span><span class="upgrade-chip locked">üîí 90</span><span class="upgrade-chip locked">üîí 120</span></div><a href="https://buy.stripe.com/9B6bJ2c9i1qy0Qrbqh00005" class="upgrade-banner-btn"><span class="lang-en">UNLOCK $5/mo</span><span class="lang-es">DESBLOQUEAR $5/mes</span></a></div>
<button class="letsgo-btn" id="letsGoBtn"><span class="lang-en">LET'S GO!</span><span class="lang-es">¬°PA'LANTE!</span></button>
</div>
</div>

<div class="screen" id="screen-play">
<div class="play-container">
<div class="play-stats"><div class="play-stat"><div class="play-stat-value" id="playLevel">1</div><div class="play-stat-label"><span class="lang-en">Level</span><span class="lang-es">Nivel</span></div></div><div class="play-stat"><div class="play-stat-value" id="playRound">0</div><div class="play-stat-label"><span class="lang-en">Round</span><span class="lang-es">Ronda</span></div></div><div class="play-stat"><div class="play-stat-value" id="playStreak">0</div><div class="play-stat-label">üî•</div></div><div class="play-stat"><div class="play-stat-value" id="playScore">0</div><div class="play-stat-label"><span class="lang-en">Score</span><span class="lang-es">Puntos</span></div></div></div>
<div class="play-message"><span class="play-message-text" id="playMessage"><span class="lang-en">TAP TO START!</span><span class="lang-es">¬°TOCA PARA COMENZAR!</span></span></div>
<div class="play-progress"><span class="play-progress-label"><span class="lang-en">LEVEL UP:</span><span class="lang-es">SUBIR:</span></span><div class="play-progress-stars"><span class="play-progress-star" id="star1">‚≠ê</span><span class="play-progress-star" id="star2">‚≠ê</span></div></div>
<div class="play-court-wrap"><div class="play-court" id="playCourt"></div></div>
<div class="play-info"><div class="play-info-badge" id="playBadge">L1 TRAINING</div><div class="play-info-taps" id="playTaps">0/5</div><div class="play-info-score" id="playTotal">0</div></div>
<button class="play-action-btn" id="playActionBtn"><span class="lang-en">LET'S GO</span><span class="lang-es">PA'LANTE</span></button>
</div>
</div>

<div class="overlay" id="levelUpOverlay"><div class="overlay-card"><div class="overlay-emoji">‚≠ê</div><h2 class="overlay-title"><span class="lang-en">LEVEL UP!</span><span class="lang-es">¬°SUBISTE!</span></h2><p class="overlay-message" id="levelUpMessage"></p><button class="overlay-btn" id="levelUpBtn"><span class="lang-en">LET'S GO!</span><span class="lang-es">¬°VAMOS!</span></button></div></div>
<div class="overlay" id="upgradeOverlay"><div class="overlay-card"><div class="overlay-emoji">üîì</div><h2 class="overlay-title">UNLOCK ALL RITNOME‚Ñ¢</h2><div class="upgrade-banner-chips" style="margin:15px 0"><span class="upgrade-chip unlocked">‚úì 60</span><span class="upgrade-chip locked">üîí 90</span><span class="upgrade-chip locked">üîí 120</span></div><p class="overlay-message"><span class="lang-en">Get all BPM speeds for just $5/month!</span><span class="lang-es">¬°Obt√©n todas las velocidades por solo $5/mes!</span></p><a href="https://buy.stripe.com/9B6bJ2c9i1qy0Qrbqh00005" class="overlay-btn" style="display:block;text-decoration:none;margin-bottom:8px">UPGRADE üöÄ</a><button class="overlay-btn secondary" id="upgradeCloseBtn"><span class="lang-en">CONTINUE FREE</span><span class="lang-es">CONTINUAR GRATIS</span></button></div></div>
<div class="emoji-container" id="emojiContainer"></div>
<div class="coach-message" id="coachMessage"></div>

<script>
(function(){
var $=function(id){return document.getElementById(id)},$$=function(sel){return document.querySelectorAll(sel)};
var screenDemo=$('screen-demo'),screenTrophy=$('screen-trophy'),screenPlay=$('screen-play'),currentScreen='demo';
function showScreen(name){screenDemo.classList.remove('active');screenTrophy.classList.remove('active');screenPlay.classList.remove('active');currentScreen=name;if(name==='demo')screenDemo.classList.add('active');else if(name==='trophy')screenTrophy.classList.add('active');else if(name==='play')screenPlay.classList.add('active');updateBackBtn()}
function updateBackBtn(){var btn=$('backBtn');if(currentScreen==='demo'){btn.href='/';btn.onclick=null}else if(currentScreen==='trophy'){btn.href='#';btn.onclick=function(e){e.preventDefault();showScreen('demo');startDemo()}}else if(currentScreen==='play'){btn.href='#';btn.onclick=function(e){e.preventDefault();showScreen('trophy');stopGame()}}}
var currentLang=localStorage.getItem('lc-lang')||'en';
function setLang(lang){currentLang=lang;localStorage.setItem('lc-lang',lang);document.body.className=lang;$('btnEn').className=lang==='en'?'nav-lang-btn active':'nav-lang-btn';$('btnEs').className=lang==='es'?'nav-lang-btn active':'nav-lang-btn';updateTrophyUI();updatePlayUI()}
$('btnEn').onclick=function(){setLang('en')};$('btnEs').onclick=function(){setLang('es')};
var speedAccess={allSpeeds:false};try{var sa=localStorage.getItem('lc-speed-access');if(sa)speedAccess=JSON.parse(sa)}catch(e){}
var host=window.location.hostname,isProduction=host.indexOf('ritnome')>-1||host.indexOf('laughcourt')>-1||host.indexOf('github.io')>-1||host.indexOf('gostardigital')>-1;
function checkAuth(){if(!isProduction)return true;var user=null;try{user=JSON.parse(localStorage.getItem('lc-user'))}catch(e){}if(!user||!user.pin||user.pin.length<4)return false;var sp=sessionStorage.getItem('lc-pin'),st=sessionStorage.getItem('lc-token');if(!sp||!st)return false;return true}

var demoCourt=$('demoCourt'),demoLabel=$('demoLabel'),demoCells=[],demoEpoch=0,demoTimeouts=[];
function initDemoCourt(){demoCourt.innerHTML='';demoCells=[];for(var i=0;i<25;i++){var c=document.createElement('div');c.className='demo-cell';demoCourt.appendChild(c);demoCells.push(c)}}
function setDemoTimeout(fn,delay){var id=setTimeout(function(){var idx=demoTimeouts.indexOf(id);if(idx>-1)demoTimeouts.splice(idx,1);fn()},delay);demoTimeouts.push(id);return id}
function clearDemoTimeouts(){demoTimeouts.forEach(function(id){clearTimeout(id)});demoTimeouts=[]}
function shuffleArray(a){for(var i=a.length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1)),t=a[i];a[i]=a[j];a[j]=t}}
function randomCells(count){var arr=[];for(var i=0;i<25;i++)arr.push(i);shuffleArray(arr);return arr.slice(0,count)}

function runDemoRound(epoch){
if(epoch!==demoEpoch||currentScreen!=='demo')return;
var targets=randomCells(5);
demoCells.forEach(function(c){c.className='demo-cell'});
setDemoTimeout(function(){if(epoch!==demoEpoch)return;demoLabel.innerHTML='<span class="lang-en">WATCH THE FLASH!</span><span class="lang-es">¬°MIRA EL DESTELLO!</span>';demoLabel.className='demo-label phase-watch';targets.forEach(function(idx){demoCells[idx].classList.add('lit')})},500);
setDemoTimeout(function(){if(epoch!==demoEpoch)return;targets.forEach(function(idx){demoCells[idx].classList.remove('lit')});demoLabel.innerHTML='<span class="lang-en">FIND THEM!</span><span class="lang-es">¬°ENCU√âNTRALOS!</span>';demoLabel.className='demo-label phase-find'},500+1500);
targets.forEach(function(idx,i){setDemoTimeout(function(){if(epoch!==demoEpoch)return;demoCells[idx].classList.add('selected')},500+1500+500+(i*300))});
setDemoTimeout(function(){if(epoch!==demoEpoch)return;targets.forEach(function(idx){demoCells[idx].classList.remove('selected');demoCells[idx].classList.add('correct')});demoLabel.innerHTML='<span class="lang-en">‚úÖ PERFECT!</span><span class="lang-es">‚úÖ ¬°PERFECTO!</span>';demoLabel.className='demo-label phase-success';demoCourt.classList.add('joy-pulse');setTimeout(function(){demoCourt.classList.remove('joy-pulse')},500)},500+1500+500+(5*300)+200);
setDemoTimeout(function(){if(epoch!==demoEpoch)return;demoCells.forEach(function(c){c.className='demo-cell'});demoLabel.innerHTML='<span class="lang-en">üëÄ WATCH...</span><span class="lang-es">üëÄ MIRA...</span>';demoLabel.className='demo-label';runDemoRound(epoch)},500+1500+500+(5*300)+1500)}
function startDemo(){demoEpoch++;clearDemoTimeouts();runDemoRound(demoEpoch)}
function stopDemo(){demoEpoch++;clearDemoTimeouts()}
var playbookToggle=$('playbookToggle'),playbookContent=$('playbookContent');playbookToggle.onclick=function(){playbookToggle.classList.toggle('open');playbookContent.classList.toggle('open')};
$('playNowBtn').onclick=function(){if(checkAuth()){stopDemo();showScreen('trophy')}else{window.location.href='/login'}};

var gameState={speed:'slow',level:1,score:0,streak:0,perfectCount:0,round:0},SPEED_CONFIG={slow:2500,med:1500,fast:800};
function getCellCount(level){return level+4}
function getSpeedKey(speed,key){return'lc-flash-'+speed+'-'+key}
function loadSpeedState(speed){return{level:parseInt(localStorage.getItem(getSpeedKey(speed,'level')))||1,score:parseInt(localStorage.getItem(getSpeedKey(speed,'score')))||0,streak:parseInt(localStorage.getItem(getSpeedKey(speed,'streak')))||0}}
function saveSpeedState(){localStorage.setItem(getSpeedKey(gameState.speed,'level'),gameState.level);localStorage.setItem(getSpeedKey(gameState.speed,'score'),gameState.score);localStorage.setItem(getSpeedKey(gameState.speed,'streak'),gameState.streak)}

function updateTrophyUI(){
var slowData=loadSpeedState('slow'),medData=loadSpeedState('med'),fastData=loadSpeedState('fast');
$('levelSlow').textContent='LEVEL '+slowData.level;$('scoreSlow').textContent=slowData.score+' pts';
$('levelMed').textContent='LEVEL '+medData.level;$('scoreMed').textContent=medData.score+' pts';
$('levelFast').textContent='LEVEL '+fastData.level;$('scoreFast').textContent=fastData.score+' pts';
$$('.bpm-tier').forEach(function(t){t.classList.remove('active')});
if(gameState.speed==='slow')$('tierSlow').classList.add('active');else if(gameState.speed==='med')$('tierMed').classList.add('active');else $('tierFast').classList.add('active');
if(speedAccess.allSpeeds){$('tierMed').classList.remove('locked');$('tierFast').classList.remove('locked');$('tierMed').querySelector('.bpm-tier-status').className='bpm-tier-status unlocked';$('tierMed').querySelector('.bpm-tier-status').innerHTML='‚úì PRO';$('tierFast').querySelector('.bpm-tier-status').className='bpm-tier-status unlocked';$('tierFast').querySelector('.bpm-tier-status').innerHTML='‚úì PRO';$('upgradeBanner').style.display='none'}else{$('tierMed').classList.add('locked');$('tierFast').classList.add('locked');$('upgradeBanner').style.display='block'}
$$('.level-btn').forEach(function(b){b.classList.toggle('active',parseInt(b.dataset.level)===gameState.level)});
$('cellsDisplay').textContent=getCellCount(gameState.level)}

$$('.bpm-tier').forEach(function(tier){tier.onclick=function(){var spd=tier.dataset.speed;if(!speedAccess.allSpeeds&&spd!=='slow'){$('upgradeOverlay').classList.add('show');return}gameState.speed=spd;var data=loadSpeedState(spd);gameState.level=data.level;gameState.score=data.score;gameState.streak=data.streak;gameState.perfectCount=0;gameState.round=0;updateTrophyUI()}});
$$('.level-btn').forEach(function(btn){btn.onclick=function(){gameState.level=parseInt(btn.dataset.level);gameState.perfectCount=0;gameState.round=0;saveSpeedState();updateTrophyUI()}});
$('upgradeCloseBtn').onclick=function(){$('upgradeOverlay').classList.remove('show')};
$('letsGoBtn').onclick=function(){showScreen('play');initGame()};

var playCourt=$('playCourt'),playCells=[],targetCells=[],selectedCells=[],isPlaying=false,canTap=false;
var LAUGH_EMOJIS=['üòÇ','üòÜ','ü§£','üòÑ','üòÅ','ü•≥','üòä','üèÄ'],PARTY_EMOJIS=['ü•≥','üéâ','üòÇ','ü§£','‚ú®','üí´','üèÄ','üèÜ'],audioCtx=null;
function initPlayCourt(){playCourt.innerHTML='';playCells=[];for(var i=0;i<25;i++){var c=document.createElement('div');c.className='play-cell';c.dataset.index=i;c.onclick=function(){handleTap(parseInt(this.dataset.index))};playCourt.appendChild(c);playCells.push(c)}}
function updatePlayUI(){$('playLevel').textContent=gameState.level;$('playRound').textContent=gameState.round;$('playStreak').textContent=gameState.streak;$('playScore').textContent=gameState.score;$('playTotal').textContent=gameState.score;var spName=gameState.speed==='slow'?'TRAINING':gameState.speed==='med'?'TEMPO':'ELITE';$('playBadge').textContent='L'+gameState.level+' '+spName;updateTapsCounter();updateProgressStars()}
function updateTapsCounter(){$('playTaps').textContent=selectedCells.length+'/'+getCellCount(gameState.level)}
function updateProgressStars(){$('star1').className=gameState.perfectCount>=1?'play-progress-star earned':'play-progress-star';$('star2').className=gameState.perfectCount>=2?'play-progress-star earned':'play-progress-star'}
function initGame(){initPlayCourt();var data=loadSpeedState(gameState.speed);gameState.level=data.level;gameState.score=data.score;gameState.streak=data.streak;gameState.perfectCount=0;gameState.round=0;isPlaying=false;canTap=false;selectedCells=[];updatePlayUI();$('playMessage').innerHTML='<span class="lang-en">TAP LET\'S GO!</span><span class="lang-es">¬°TOCA PA\'LANTE!</span>';$('playActionBtn').disabled=false}
function stopGame(){isPlaying=false;canTap=false}

function playTone(freq,dur){if(!audioCtx)try{audioCtx=new(window.AudioContext||window.webkitAudioContext)()}catch(e){return}try{if(audioCtx.state==='suspended')audioCtx.resume();var osc=audioCtx.createOscillator(),gain=audioCtx.createGain();osc.type='sine';osc.frequency.value=freq;osc.connect(gain);gain.connect(audioCtx.destination);gain.gain.setValueAtTime(0.25,audioCtx.currentTime);gain.gain.exponentialRampToValueAtTime(0.01,audioCtx.currentTime+dur);osc.start();osc.stop(audioCtx.currentTime+dur+0.05)}catch(e){}}
function playFlashSound(){playTone(660,0.15)}function playTapSound(){playTone(440,0.1)}function playCorrectSound(){[523,659,784].forEach(function(f,i){setTimeout(function(){playTone(f,0.12)},i*80)})}function playWrongSound(){playTone(200,0.3)}
function getCourtCenter(){var r=playCourt.getBoundingClientRect();return{x:r.left+r.width/2,y:r.top+r.height/2}}
function createBurstEmoji(emoji,x,y,type){var el=document.createElement('div');el.className='burst-emoji'+(type?' '+type:'');el.textContent=emoji;var angle=Math.random()*Math.PI*2,dist=50+Math.random()*80;el.style.cssText='left:'+x+'px;top:'+y+'px;--tx:'+Math.cos(angle)*dist+'px;--ty:'+Math.sin(angle)*dist+'px;--rot:'+(Math.random()-0.5)*720+'deg';$('emojiContainer').appendChild(el);setTimeout(function(){if(el.parentNode)el.remove()},2000)}
function laughCelebration(intensity){var center=getCourtCenter(),count=intensity==='party'?8:intensity==='big'?5:intensity==='medium'?3:2,emojis=intensity==='party'?PARTY_EMOJIS:LAUGH_EMOJIS,type=intensity==='party'?'party':intensity==='big'?'big':'';for(var i=0;i<count;i++){(function(idx){setTimeout(function(){createBurstEmoji(emojis[Math.floor(Math.random()*emojis.length)],center.x+(Math.random()-0.5)*20,center.y+(Math.random()-0.5)*20,type)},idx*35)})(i)}playCourt.classList.add('joy-pulse');setTimeout(function(){playCourt.classList.remove('joy-pulse')},500)}
function showCoach(msg){$('coachMessage').textContent=msg;$('coachMessage').classList.add('show');setTimeout(function(){$('coachMessage').classList.remove('show')},2000)}

function startRound(){
if(isPlaying)return;isPlaying=true;canTap=false;selectedCells=[];gameState.round++;updatePlayUI();$('playActionBtn').disabled=true;
playCells.forEach(function(c){c.className='play-cell'});
var needed=getCellCount(gameState.level),available=[];for(var i=0;i<25;i++)available.push(i);shuffleArray(available);targetCells=available.slice(0,needed);
$('playMessage').innerHTML='<span class="lang-en">WATCH...</span><span class="lang-es">MIRA...</span>';$('playMessage').className='play-message-text watch';
setTimeout(function(){playFlashSound();targetCells.forEach(function(i){playCells[i].classList.add('lit')});setTimeout(function(){targetCells.forEach(function(i){playCells[i].classList.remove('lit')});$('playMessage').innerHTML='<span class="lang-en">FIND THEM!</span><span class="lang-es">¬°ENCU√âNTRALOS!</span>';$('playMessage').className='play-message-text go';canTap=true},SPEED_CONFIG[gameState.speed])},500)}

function handleTap(idx){
if(!canTap||!isPlaying)return;var cell=playCells[idx];
if(cell.classList.contains('selected')){cell.classList.remove('selected');var i=selectedCells.indexOf(idx);if(i>-1)selectedCells.splice(i,1);updateTapsCounter();return}
playTapSound();cell.classList.add('selected');selectedCells.push(idx);updateTapsCounter();
if(selectedCells.length>=getCellCount(gameState.level)){canTap=false;setTimeout(revealResults,300)}}

function revealResults(){
var correct=0,needed=getCellCount(gameState.level);
selectedCells.forEach(function(i){if(targetCells.indexOf(i)!==-1){playCells[i].classList.remove('selected');playCells[i].classList.add('correct');correct++}else{playCells[i].classList.remove('selected');playCells[i].classList.add('wrong')}});
targetCells.forEach(function(i){if(selectedCells.indexOf(i)===-1)playCells[i].classList.add('missed')});
var isPerfect=correct===needed;
if(isPerfect){playCorrectSound();gameState.perfectCount++;gameState.streak++;gameState.score+=needed*10*gameState.level*(gameState.speed==='fast'?3:gameState.speed==='med'?2:1);updatePlayUI();saveSpeedState();var intensity=gameState.streak>=5?'party':gameState.streak>=3?'big':'medium';laughCelebration(intensity);$('playMessage').innerHTML='<span class="lang-en">PERFECT! '+correct+'/'+needed+'</span><span class="lang-es">¬°PERFECTO! '+correct+'/'+needed+'</span>';$('playMessage').className='play-message-text perfect';var msgs=gameState.streak>=5?['üèÜ LEGEND!','üèÜ WOW!']:gameState.streak>=3?['üî• FIRE!','ü§£ AMAZING!']:['üòÑ NICE!','üòä GREAT!'];showCoach(msgs[Math.floor(Math.random()*msgs.length)]);if(gameState.perfectCount>=2){setTimeout(function(){if(gameState.level<10)levelUp();else{showCoach('üëë MAX LEVEL!');gameState.perfectCount=0;updateProgressStars();finishRound()}},1200)}else{setTimeout(finishRound,1500)}}
else{playWrongSound();gameState.perfectCount=0;gameState.streak=0;updatePlayUI();saveSpeedState();$('playMessage').innerHTML='<span class="lang-en">MISSED! '+correct+'/'+needed+'</span><span class="lang-es">¬°FALLASTE! '+correct+'/'+needed+'</span>';$('playMessage').className='play-message-text miss';setTimeout(finishRound,2000)}}

function levelUp(){gameState.level++;gameState.perfectCount=0;saveSpeedState();$$('.level-btn').forEach(function(b){b.classList.toggle('active',parseInt(b.dataset.level)===gameState.level)});updateProgressStars();laughCelebration('party');$('levelUpMessage').innerHTML=currentLang==='es'?'¬°Ahora est√°s en Nivel '+gameState.level+'!':'You are now Level '+gameState.level+'!';$('levelUpOverlay').classList.add('show');updatePlayUI()}
$('levelUpBtn').onclick=function(){$('levelUpOverlay').classList.remove('show');finishRound()};
function finishRound(){isPlaying=false;$('playMessage').innerHTML='<span class="lang-en">TAP LET\'S GO!</span><span class="lang-es">¬°TOCA PA\'LANTE!</span>';$('playMessage').className='play-message-text';$('playActionBtn').disabled=false}
$('playActionBtn').onclick=startRound;

initDemoCourt();setLang(currentLang);startDemo();
if(isProduction){var pin=sessionStorage.getItem('lc-pin');if(pin){fetch('/api/user/speed-access/'+pin).then(function(r){return r.json()}).then(function(d){speedAccess=d;localStorage.setItem('lc-speed-access',JSON.stringify(d));updateTrophyUI()}).catch(function(){})}}
})();
</script>
</body>
</html>
