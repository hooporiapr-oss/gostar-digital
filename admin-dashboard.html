<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Dashboard - Team GoTrotters | GoStar Digital</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Outfit:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
:root {
    --orange: #FF6B00;
    --orange-dark: #CC5500;
    --teal: #00D9A5;
    --gold: #FFD700;
    --purple: #9B59B6;
    --blue: #3B82F6;
    --dark: #0a0a0f;
    --darker: #050508;
    --card: #111118;
    --card-hover: #1a1a24;
    --text: #FFFFFF;
    --muted: #8892a0;
    --border: rgba(255,255,255,0.08);
    --success: #00D9A5;
    --danger: #FF4757;
    --sidebar: 260px;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    font-family: 'Outfit', sans-serif;
    background: var(--dark);
    color: var(--text);
    min-height: 100vh;
}

body.es .lang-en { display: none !important; }
body.en .lang-es { display: none !important; }

.login-screen {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: linear-gradient(135deg, var(--dark) 0%, var(--darker) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
}

.login-screen.hidden { display: none; }

.login-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 24px;
    padding: 48px 40px;
    width: 100%;
    max-width: 380px;
    text-align: center;
}

.login-logo {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 2.5rem;
    letter-spacing: 4px;
    margin-bottom: 10px;
}

.login-logo .go { color: var(--orange); }
.login-logo .trotters { color: var(--teal); }

.login-badge {
    display: inline-block;
    font-size: 0.7rem;
    font-weight: 700;
    color: var(--dark);
    background: var(--gold);
    padding: 5px 15px;
    border-radius: 20px;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 30px;
}

.login-subtitle {
    font-size: 0.9rem;
    color: var(--muted);
    margin-bottom: 30px;
}

.pin-input-group {
    display: flex;
    justify-content: center;
    gap: 12px;
    margin-bottom: 24px;
}

.pin-input {
    width: 60px;
    height: 72px;
    font-size: 1.8rem;
    font-weight: 700;
    font-family: 'Bebas Neue', sans-serif;
    text-align: center;
    background: var(--darker);
    border: 2px solid var(--border);
    border-radius: 12px;
    color: var(--text);
    transition: all 0.2s;
}

.pin-input:focus {
    outline: none;
    border-color: var(--orange);
    box-shadow: 0 0 20px rgba(255,107,0,0.2);
}

.login-btn {
    width: 100%;
    padding: 16px;
    background: linear-gradient(135deg, var(--orange), var(--orange-dark));
    color: var(--text);
    border: none;
    border-radius: 12px;
    font-family: 'Bebas Neue', sans-serif;
    font-size: 1.1rem;
    letter-spacing: 2px;
    cursor: pointer;
    transition: all 0.3s;
}

.login-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 25px rgba(255,107,0,0.4);
}

.login-error {
    color: var(--danger);
    font-size: 0.85rem;
    margin-top: 15px;
    display: none;
}

.login-error.show { display: block; }

.dashboard { display: none; min-height: 100vh; }
.dashboard.visible { display: flex; }

.sidebar {
    width: var(--sidebar);
    background: var(--darker);
    border-right: 1px solid var(--border);
    padding: 24px 0;
    display: flex;
    flex-direction: column;
    position: fixed;
    height: 100vh;
    overflow-y: auto;
}

.sidebar-header {
    padding: 0 24px 24px;
    border-bottom: 1px solid var(--border);
    margin-bottom: 20px;
}

.sidebar-logo {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 1.5rem;
    letter-spacing: 3px;
    margin-bottom: 5px;
}

.sidebar-logo .go { color: var(--orange); }
.sidebar-logo .trotters { color: var(--teal); }

.sidebar-team {
    font-size: 0.75rem;
    color: var(--muted);
    margin-bottom: 10px;
}

.admin-badge {
    display: inline-block;
    background: linear-gradient(135deg, var(--danger), #cc3344);
    color: var(--text);
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.65rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 1px;
}

.nav-section { padding: 0 12px; margin-bottom: 20px; }

.nav-section-title {
    font-size: 0.65rem;
    font-weight: 700;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 1px;
    padding: 0 16px;
    margin-bottom: 10px;
}

.nav-item {
    display: flex;
    align-items: center;
    gap: 12px;
    width: 100%;
    padding: 12px 16px;
    border: none;
    background: transparent;
    border-radius: 10px;
    color: var(--muted);
    font-family: 'Outfit', sans-serif;
    font-size: 0.9rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    text-align: left;
    margin-bottom: 4px;
}

.nav-item:hover { background: var(--card); color: var(--text); }
.nav-item.active { background: var(--orange); color: var(--text); }
.nav-item-icon { font-size: 1.1rem; width: 24px; text-align: center; }

.sidebar-footer {
    padding: 20px 24px;
    border-top: 1px solid var(--border);
    margin-top: auto;
}

.lang-toggle {
    display: flex;
    gap: 8px;
    background: var(--card);
    padding: 4px;
    border-radius: 10px;
    margin-bottom: 15px;
}

.lang-btn {
    flex: 1;
    padding: 8px;
    border: none;
    background: transparent;
    color: var(--muted);
    border-radius: 8px;
    font-weight: 600;
    font-size: 0.8rem;
    cursor: pointer;
    font-family: 'Outfit', sans-serif;
}

.lang-btn.active { background: var(--orange); color: var(--text); }

.logout-btn {
    width: 100%;
    padding: 12px;
    border: 1px solid var(--border);
    background: transparent;
    color: var(--muted);
    border-radius: 10px;
    font-weight: 600;
    font-size: 0.85rem;
    cursor: pointer;
    transition: all 0.2s;
    font-family: 'Outfit', sans-serif;
}

.logout-btn:hover { border-color: var(--danger); color: var(--danger); }

.main-content { flex: 1; margin-left: var(--sidebar); padding: 30px; max-width: 1400px; }
.page-header { margin-bottom: 30px; }
.page-title { font-family: 'Bebas Neue', sans-serif; font-size: 2rem; letter-spacing: 3px; margin-bottom: 5px; }
.page-subtitle { font-size: 0.9rem; color: var(--muted); }
.page-section { display: none; }
.page-section.active { display: block; }

.team-banner {
    background: linear-gradient(135deg, rgba(255,107,0,0.15), rgba(0,217,165,0.15));
    border: 1px solid var(--orange);
    border-radius: 16px;
    padding: 20px 24px;
    margin-bottom: 30px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 15px;
}

.team-banner-text { font-size: 1rem; }
.team-banner-text strong { color: var(--orange); font-size: 1.2rem; }
.team-banner-badge { background: var(--teal); color: var(--dark); padding: 8px 16px; border-radius: 20px; font-weight: 700; font-size: 0.85rem; }

.stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px; }

.stat-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 24px;
    transition: all 0.3s;
}

.stat-card:hover { transform: translateY(-3px); border-color: var(--orange); }

.stat-card-icon {
    width: 48px;
    height: 48px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    margin-bottom: 15px;
}

.stat-card-icon.orange { background: rgba(255,107,0,0.15); }
.stat-card-icon.teal { background: rgba(0,217,165,0.15); }
.stat-card-icon.gold { background: rgba(255,215,0,0.15); }
.stat-card-icon.purple { background: rgba(155,89,182,0.15); }
.stat-card-value { font-family: 'Bebas Neue', sans-serif; font-size: 2.2rem; letter-spacing: 2px; margin-bottom: 5px; }
.stat-card-label { font-size: 0.8rem; color: var(--muted); text-transform: uppercase; letter-spacing: 1px; }

.circuit-cards-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin-bottom: 30px; }

.circuit-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    overflow: hidden;
    transition: all 0.3s;
}

.circuit-card:hover { transform: translateY(-3px); }

.circuit-card-header { padding: 16px 20px; display: flex; align-items: center; gap: 12px; }
.circuit-card-header.c1 { background: linear-gradient(135deg, rgba(255,107,0,0.2), transparent); border-bottom: 2px solid var(--orange); }
.circuit-card-header.c2 { background: linear-gradient(135deg, rgba(0,217,165,0.2), transparent); border-bottom: 2px solid var(--teal); }
.circuit-card-header.c3 { background: linear-gradient(135deg, rgba(255,215,0,0.2), transparent); border-bottom: 2px solid var(--gold); }
.circuit-card-icon { font-size: 1.5rem; }
.circuit-card-title { font-family: 'Bebas Neue', sans-serif; font-size: 1.1rem; letter-spacing: 2px; flex: 1; }
.circuit-card-num { font-size: 0.7rem; color: var(--muted); }

.circuit-card-edit {
    background: transparent;
    border: 1px solid var(--border);
    color: var(--muted);
    padding: 6px 12px;
    border-radius: 8px;
    font-size: 0.75rem;
    cursor: pointer;
    transition: all 0.2s;
}

.circuit-card-edit:hover { border-color: var(--orange); color: var(--orange); }
.circuit-card-body { padding: 20px; }
.circuit-card-stats { display: flex; gap: 20px; }
.circuit-stat { text-align: center; flex: 1; }
.circuit-stat-value { font-family: 'Bebas Neue', sans-serif; font-size: 1.5rem; }
.circuit-stat-label { font-size: 0.7rem; color: var(--muted); text-transform: uppercase; }

.table-card { background: var(--card); border: 1px solid var(--border); border-radius: 16px; overflow: hidden; margin-bottom: 30px; }
.table-header { padding: 20px 24px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px; }
.table-title { font-family: 'Bebas Neue', sans-serif; font-size: 1.2rem; letter-spacing: 2px; }
.table-actions { display: flex; gap: 10px; }
.btn { padding: 10px 20px; border: none; border-radius: 10px; font-weight: 600; font-size: 0.85rem; cursor: pointer; transition: all 0.2s; font-family: 'Outfit', sans-serif; }
.btn-primary { background: var(--orange); color: var(--text); }
.btn-primary:hover { background: var(--orange-dark); }
.btn-secondary { background: var(--card); border: 1px solid var(--border); color: var(--text); }
.btn-secondary:hover { border-color: var(--orange); }
.btn-danger { background: transparent; border: 1px solid var(--danger); color: var(--danger); }
.btn-danger:hover { background: var(--danger); color: var(--text); }

.table-container { overflow-x: auto; }
table { width: 100%; border-collapse: collapse; }
th, td { padding: 14px 20px; text-align: left; border-bottom: 1px solid var(--border); }
th { font-size: 0.75rem; font-weight: 700; color: var(--muted); text-transform: uppercase; letter-spacing: 1px; background: var(--darker); }
td { font-size: 0.9rem; }
tr:hover { background: var(--card-hover); }

.badge { display: inline-block; padding: 4px 10px; border-radius: 20px; font-size: 0.7rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; }
.badge-trial { background: rgba(155,89,182,0.15); color: var(--purple); }
.badge-paid { background: rgba(0,217,165,0.15); color: var(--teal); }

.tier-badge { display: inline-flex; align-items: center; gap: 4px; padding: 3px 8px; border-radius: 6px; font-size: 0.65rem; font-weight: 700; }
.tier-badge.practice { background: rgba(155,89,182,0.2); color: #b57edc; }
.tier-badge.level3 { background: rgba(255,215,0,0.2); color: var(--gold); }
.tier-badge.level4 { background: rgba(255,107,0,0.2); color: var(--orange); }
.tier-badge.level5 { background: rgba(0,217,165,0.2); color: var(--teal); }
.tier-badge.level6 { background: rgba(52,152,219,0.2); color: var(--blue); }
.tier-badge.level7 { background: rgba(155,89,182,0.2); color: var(--purple); }
.tier-badge.level8 { background: rgba(255,215,0,0.2); color: var(--gold); }
.tier-badge.level9 { background: rgba(255,107,0,0.2); color: var(--orange); }
.tier-badge.master { background: linear-gradient(135deg, rgba(255,215,0,0.3), rgba(255,107,0,0.3)); color: var(--gold); }

.action-btns { display: flex; gap: 6px; }

.action-btn {
    width: 32px;
    height: 32px;
    border: 1px solid var(--border);
    background: transparent;
    border-radius: 8px;
    color: var(--muted);
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.9rem;
}

.action-btn:hover { border-color: var(--orange); color: var(--orange); }
.action-btn.delete:hover { border-color: var(--danger); color: var(--danger); }

.activity-list { padding: 0; }

.activity-item {
    display: flex;
    align-items: flex-start;
    gap: 15px;
    padding: 16px 20px;
    border-bottom: 1px solid var(--border);
    transition: background 0.2s;
}

.activity-item:last-child { border-bottom: none; }
.activity-item:hover { background: var(--card-hover); }

.activity-icon {
    width: 40px;
    height: 40px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.1rem;
    flex-shrink: 0;
}

.activity-icon.user { background: rgba(0,217,165,0.15); color: var(--teal); }
.activity-icon.circuit { background: rgba(155,89,182,0.15); color: var(--purple); }
.activity-content { flex: 1; }
.activity-text { font-size: 0.9rem; margin-bottom: 3px; }
.activity-time { font-size: 0.75rem; color: var(--muted); }
.activity-actions { display: flex; gap: 6px; opacity: 0; transition: opacity 0.2s; }
.activity-item:hover .activity-actions { opacity: 1; }

.tier-dist-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
.tier-dist-table th, .tier-dist-table td { padding: 10px 12px; text-align: center; border: 1px solid var(--border); font-size: 0.8rem; }
.tier-dist-table th { background: var(--darker); font-weight: 600; color: var(--muted); }
.tier-dist-table td { background: var(--card); }

.modal-overlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.8);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    padding: 20px;
}

.modal-overlay.show { display: flex; }

.modal {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 20px;
    width: 100%;
    max-width: 480px;
    max-height: 90vh;
    overflow-y: auto;
}

.modal-header { padding: 24px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
.modal-title { font-family: 'Bebas Neue', sans-serif; font-size: 1.3rem; letter-spacing: 2px; }

.modal-close {
    width: 36px;
    height: 36px;
    border: none;
    background: var(--darker);
    border-radius: 10px;
    color: var(--muted);
    font-size: 1.2rem;
    cursor: pointer;
}

.modal-close:hover { color: var(--danger); }
.modal-body { padding: 24px; }
.form-group { margin-bottom: 20px; }
.form-label { display: block; font-size: 0.8rem; font-weight: 600; color: var(--muted); margin-bottom: 8px; text-transform: uppercase; letter-spacing: 1px; }

.form-input, .form-select {
    width: 100%;
    padding: 14px 16px;
    background: var(--darker);
    border: 1px solid var(--border);
    border-radius: 10px;
    color: var(--text);
    font-size: 0.95rem;
    font-family: 'Outfit', sans-serif;
}

.form-input:focus, .form-select:focus { outline: none; border-color: var(--orange); }
.form-row { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; }
.modal-footer { padding: 20px 24px; border-top: 1px solid var(--border); display: flex; justify-content: flex-end; gap: 12px; }
.confirm-dialog { text-align: center; padding: 20px 0; }
.confirm-dialog-icon { font-size: 3rem; margin-bottom: 15px; }
.confirm-dialog-title { font-family: 'Bebas Neue', sans-serif; font-size: 1.5rem; letter-spacing: 2px; margin-bottom: 10px; }
.confirm-dialog-text { color: var(--muted); font-size: 0.9rem; margin-bottom: 5px; }

.toast {
    position: fixed;
    bottom: 30px;
    right: 30px;
    background: var(--card);
    border: 1px solid var(--teal);
    border-radius: 12px;
    padding: 16px 24px;
    display: flex;
    align-items: center;
    gap: 12px;
    transform: translateY(100px);
    opacity: 0;
    transition: all 0.3s;
    z-index: 2000;
}

.toast.show { transform: translateY(0); opacity: 1; }
.toast.error { border-color: var(--danger); }
.toast-icon { font-size: 1.2rem; }
.toast-text { font-size: 0.9rem; }

@media (max-width: 1024px) {
    .sidebar { width: 80px; padding: 15px 0; }
    .sidebar-header { padding: 0 10px 15px; }
    .sidebar-logo span, .sidebar-team, .nav-item span:not(.nav-item-icon), .nav-section-title, .sidebar-footer .lang-toggle, .logout-btn span { display: none; }
    .nav-item { justify-content: center; padding: 12px; }
    .nav-item-icon { margin: 0; }
    .main-content { margin-left: 80px; }
}

@media (max-width: 768px) {
    .sidebar { display: none; }
    .main-content { margin-left: 0; }
    .stats-grid { grid-template-columns: 1fr 1fr; }
    .team-banner { flex-direction: column; text-align: center; }
    .form-row { grid-template-columns: 1fr; }
}
</style>
</head>
<body class="en">

<div class="login-screen" id="loginScreen">
    <div class="login-card">
        <div class="login-logo"><span class="go">Go</span><span class="trotters">Trotters</span></div>
        <div class="login-badge">Coach Admin Portal</div>
        <p class="login-subtitle">
            <span class="lang-en">Enter your 4-digit admin PIN</span>
            <span class="lang-es">Ingresa tu PIN de 4 d√≠gitos</span>
        </p>
        <div class="pin-input-group">
            <input type="password" class="pin-input" maxlength="1" id="pin1" inputmode="numeric">
            <input type="password" class="pin-input" maxlength="1" id="pin2" inputmode="numeric">
            <input type="password" class="pin-input" maxlength="1" id="pin3" inputmode="numeric">
            <input type="password" class="pin-input" maxlength="1" id="pin4" inputmode="numeric">
        </div>
        <button class="login-btn" id="loginBtn">
            <span class="lang-en">ACCESS DASHBOARD</span>
            <span class="lang-es">ACCEDER</span>
        </button>
        <p class="login-error" id="loginError">
            <span class="lang-en">Invalid PIN</span>
            <span class="lang-es">PIN inv√°lido</span>
        </p>
    </div>
</div>

<div class="dashboard" id="dashboard">
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-logo"><span class="go">Go</span><span class="trotters">Trotters</span></div>
            <div class="sidebar-team">Team GoTrotters</div>
            <span class="admin-badge">Coach Admin</span>
        </div>
        <nav class="nav-section">
            <div class="nav-section-title">
                <span class="lang-en">Dashboard</span>
                <span class="lang-es">Panel</span>
            </div>
            <button class="nav-item active" data-page="overview">
                <span class="nav-item-icon">üìä</span>
                <span class="lang-en">Overview</span>
                <span class="lang-es">Resumen</span>
            </button>
            <button class="nav-item" data-page="team">
                <span class="nav-item-icon">üèÄ</span>
                <span class="lang-en">Team Members</span>
                <span class="lang-es">Miembros</span>
            </button>
            <button class="nav-item" data-page="circuits">
                <span class="nav-item-icon">üî∫</span>
                <span class="lang-en">MAXI¬≥‚Ñ¢ Circuit</span>
                <span class="lang-es">Circuito MAXI¬≥‚Ñ¢</span>
            </button>
            <button class="nav-item" data-page="activity">
                <span class="nav-item-icon">üìã</span>
                <span class="lang-en">Activity</span>
                <span class="lang-es">Actividad</span>
            </button>
        </nav>
        <div class="sidebar-footer">
            <div class="lang-toggle">
                <button class="lang-btn active" id="btnEn">EN</button>
                <button class="lang-btn" id="btnEs">ES</button>
            </div>
            <button class="logout-btn" id="logoutBtn">üö™ 
                <span class="lang-en">Logout</span>
                <span class="lang-es">Salir</span>
            </button>
        </div>
    </aside>

    <main class="main-content">
        <section class="page-section active" id="page-overview">
            <header class="page-header">
                <h1 class="page-title">TEAM GOTROTTERS</h1>
                <p class="page-subtitle">
                    <span class="lang-en">Coach Dashboard ‚Ä¢ The MAXI¬≥‚Ñ¢ Circuit ‚Ä¢ 10-Tier Structure</span>
                    <span class="lang-es">Panel del Coach ‚Ä¢ El Circuito MAXI¬≥‚Ñ¢ ‚Ä¢ Estructura 10 Niveles</span>
                </p>
            </header>
            <div class="team-banner">
                <div class="team-banner-text">
                    <span class="lang-en">Membership:</span>
                    <span class="lang-es">Membres√≠a:</span> 
                    <strong>$5<span class="lang-en">/month per member</span><span class="lang-es">/mes por miembro</span></strong>
                </div>
                <div class="team-banner-badge">
                    <span class="lang-en">Join the Team</span>
                    <span class="lang-es">√önete al Equipo</span>
                </div>
            </div>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-card-icon teal">üèÄ</div>
                    <div class="stat-card-value" id="totalUsers">8</div>
                    <div class="stat-card-label">
                        <span class="lang-en">Team Members</span>
                        <span class="lang-es">Miembros</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-icon orange">üí∞</div>
                    <div class="stat-card-value">$<span id="monthlyRevenue">30</span></div>
                    <div class="stat-card-label">
                        <span class="lang-en">Monthly Revenue</span>
                        <span class="lang-es">Ingreso Mensual</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-icon gold">üÜì</div>
                    <div class="stat-card-value" id="trialUsers">2</div>
                    <div class="stat-card-label">
                        <span class="lang-en">On Trial</span>
                        <span class="lang-es">En Prueba</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-card-icon purple">üëë</div>
                    <div class="stat-card-value" id="totalMasters">1</div>
                    <div class="stat-card-label">MASTER 10</div>
                </div>
            </div>
            <div class="circuit-cards-grid" id="overviewCircuits"></div>
        </section>

        <section class="page-section" id="page-team">
            <header class="page-header">
                <h1 class="page-title">
                    <span class="lang-en">TEAM MEMBERS</span>
                    <span class="lang-es">MIEMBROS DEL EQUIPO</span>
                </h1>
                <p class="page-subtitle">
                    <span class="lang-en">All GoTrotters ‚Ä¢ $5/month per member</span>
                    <span class="lang-es">Todos los GoTrotters ‚Ä¢ $5/mes por miembro</span>
                </p>
            </header>
            <div class="table-card">
                <div class="table-header">
                    <h3 class="table-title">ALL GOTROTTERS</h3>
                    <div class="table-actions">
                        <button class="btn btn-primary" id="addUserBtn">+ 
                            <span class="lang-en">Add Member</span>
                            <span class="lang-es">Agregar</span>
                        </button>
                        <button class="btn btn-secondary" id="exportBtn">üì• Export</button>
                    </div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th><span class="lang-en">Name</span><span class="lang-es">Nombre</span></th>
                                <th>Email</th>
                                <th><span class="lang-en">Status</span><span class="lang-es">Estado</span></th>
                                <th>üß†</th>
                                <th>‚ö°</th>
                                <th>üëÅÔ∏è</th>
                                <th><span class="lang-en">Last Active</span><span class="lang-es">√öltima Vez</span></th>
                                <th><span class="lang-en">Actions</span><span class="lang-es">Acciones</span></th>
                            </tr>
                        </thead>
                        <tbody id="usersTable"></tbody>
                    </table>
                </div>
            </div>
        </section>

        <section class="page-section" id="page-circuits">
            <header class="page-header">
                <h1 class="page-title">THE TRIAD CIRCUIT</h1>
                <p class="page-subtitle">
                    <span class="lang-en">Three circuits ‚Ä¢ 10-tier progression ‚Ä¢ Coach-led</span>
                    <span class="lang-es">Tres circuitos ‚Ä¢ Progresi√≥n de 10 niveles ‚Ä¢ Guiado por Coach</span>
                </p>
            </header>
            <div class="circuit-cards-grid" id="circuitsAnalytics"></div>
            <div class="table-card">
                <div class="table-header">
                    <h3 class="table-title">10-TIER DISTRIBUTION</h3>
                </div>
                <div class="table-container" style="padding:20px">
                    <table class="tier-dist-table">
                        <thead><tr><th>Tier</th><th>üß†</th><th>‚ö°</th><th>üëÅÔ∏è</th></tr></thead>
                        <tbody id="tierDistTable"></tbody>
                    </table>
                </div>
            </div>
        </section>

        <section class="page-section" id="page-activity">
            <header class="page-header">
                <h1 class="page-title">
                    <span class="lang-en">ACTIVITY LOG</span>
                    <span class="lang-es">REGISTRO DE ACTIVIDAD</span>
                </h1>
                <p class="page-subtitle">
                    <span class="lang-en">Recent team activity</span>
                    <span class="lang-es">Actividad reciente del equipo</span>
                </p>
            </header>
            <div class="table-card">
                <div class="table-header">
                    <h3 class="table-title">
                        <span class="lang-en">RECENT ACTIVITY</span>
                        <span class="lang-es">ACTIVIDAD RECIENTE</span>
                    </h3>
                    <div class="table-actions">
                        <button class="btn btn-primary" id="addActivityBtn">+ 
                            <span class="lang-en">Add Entry</span>
                            <span class="lang-es">Agregar</span>
                        </button>
                        <button class="btn btn-danger" id="clearActivityBtn">
                            <span class="lang-en">Clear All</span>
                            <span class="lang-es">Limpiar Todo</span>
                        </button>
                    </div>
                </div>
                <div class="activity-list" id="activityList"></div>
            </div>
        </section>
    </main>
</div>

<div class="modal-overlay" id="userModal">
    <div class="modal">
        <div class="modal-header">
            <h3 class="modal-title" id="userModalTitle">ADD GOTROTTER</h3>
            <button class="modal-close" data-close="userModal">√ó</button>
        </div>
        <div class="modal-body">
            <input type="hidden" id="userId">
            <div class="form-group">
                <label class="form-label"><span class="lang-en">Name</span><span class="lang-es">Nombre</span></label>
                <input type="text" class="form-input" id="userName" placeholder="John Smith">
            </div>
            <div class="form-group">
                <label class="form-label">Email</label>
                <input type="email" class="form-input" id="userEmail" placeholder="john@email.com">
            </div>
            <div class="form-group">
                <label class="form-label"><span class="lang-en">Status</span><span class="lang-es">Estado</span></label>
                <select class="form-select" id="userStatus">
                    <option value="trial">Trial (7 days free)</option>
                    <option value="paid">Paid ($5/month)</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">10-Tier Structure</label>
                <div class="form-row">
                    <div>
                        <label class="form-label" style="font-size:0.7rem">üß† Memory</label>
                        <select class="form-select" id="userC1"></select>
                    </div>
                    <div>
                        <label class="form-label" style="font-size:0.7rem">‚ö° Agility</label>
                        <select class="form-select" id="userC2"></select>
                    </div>
                    <div>
                        <label class="form-label" style="font-size:0.7rem">üëÅÔ∏è Tracking</label>
                        <select class="form-select" id="userC3"></select>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" data-close="userModal"><span class="lang-en">Cancel</span><span class="lang-es">Cancelar</span></button>
            <button class="btn btn-primary" id="saveUserBtn"><span class="lang-en">Save</span><span class="lang-es">Guardar</span></button>
        </div>
    </div>
</div>

<div class="modal-overlay" id="deleteModal">
    <div class="modal">
        <div class="modal-header">
            <h3 class="modal-title"><span class="lang-en">CONFIRM</span><span class="lang-es">CONFIRMAR</span></h3>
            <button class="modal-close" data-close="deleteModal">√ó</button>
        </div>
        <div class="modal-body">
            <div class="confirm-dialog">
                <div class="confirm-dialog-icon">‚ö†Ô∏è</div>
                <div class="confirm-dialog-title"><span class="lang-en">ARE YOU SURE?</span><span class="lang-es">¬øEST√ÅS SEGURO?</span></div>
                <div class="confirm-dialog-text" id="deleteText"></div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" data-close="deleteModal"><span class="lang-en">Cancel</span><span class="lang-es">Cancelar</span></button>
            <button class="btn btn-danger" id="confirmDeleteBtn"><span class="lang-en">Delete</span><span class="lang-es">Eliminar</span></button>
        </div>
    </div>
</div>

<div class="modal-overlay" id="circuitModal">
    <div class="modal">
        <div class="modal-header">
            <h3 class="modal-title" id="circuitModalTitle">EDIT CIRCUIT</h3>
            <button class="modal-close" data-close="circuitModal">√ó</button>
        </div>
        <div class="modal-body">
            <input type="hidden" id="circuitId">
            <div class="form-group">
                <label class="form-label"><span class="lang-en">Total Sessions</span><span class="lang-es">Sesiones Totales</span></label>
                <input type="number" class="form-input" id="circuitSessions" min="0">
            </div>
            <div class="form-group">
                <label class="form-label"><span class="lang-en">Average Tier</span><span class="lang-es">Nivel Promedio</span></label>
                <input type="number" class="form-input" id="circuitAvg" min="1" max="10" step="0.1">
            </div>
            <div class="form-group">
                <label class="form-label"><span class="lang-en">Masters Count</span><span class="lang-es">Cantidad de Masters</span></label>
                <input type="number" class="form-input" id="circuitMasters" min="0">
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" data-close="circuitModal"><span class="lang-en">Cancel</span><span class="lang-es">Cancelar</span></button>
            <button class="btn btn-primary" id="saveCircuitBtn"><span class="lang-en">Save</span><span class="lang-es">Guardar</span></button>
        </div>
    </div>
</div>

<div class="modal-overlay" id="activityModal">
    <div class="modal">
        <div class="modal-header">
            <h3 class="modal-title" id="activityModalTitle">ADD ACTIVITY</h3>
            <button class="modal-close" data-close="activityModal">√ó</button>
        </div>
        <div class="modal-body">
            <input type="hidden" id="activityId">
            <div class="form-group">
                <label class="form-label"><span class="lang-en">Type</span><span class="lang-es">Tipo</span></label>
                <select class="form-select" id="activityType">
                    <option value="user">üèÄ Team Activity</option>
                    <option value="circuit">üî∫ Circuit Progress</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label"><span class="lang-en">Description</span><span class="lang-es">Descripci√≥n</span></label>
                <input type="text" class="form-input" id="activityText" placeholder="Carmen Rivera reached MASTER 10">
            </div>
            <div class="form-group">
                <label class="form-label"><span class="lang-en">Time</span><span class="lang-es">Tiempo</span></label>
                <input type="text" class="form-input" id="activityTime" placeholder="5 minutes ago">
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" data-close="activityModal"><span class="lang-en">Cancel</span><span class="lang-es">Cancelar</span></button>
            <button class="btn btn-primary" id="saveActivityBtn"><span class="lang-en">Save</span><span class="lang-es">Guardar</span></button>
        </div>
    </div>
</div>

<div class="toast" id="toast">
    <span class="toast-icon" id="toastIcon">‚úì</span>
    <span class="toast-text" id="toastText">Saved</span>
</div>

<script>
(function() {
    'use strict';

    // 10-TIER STRUCTURE
    var tierList = ['PRACTICE 1','PRACTICE 2','LEVEL 3','LEVEL 4','LEVEL 5','LEVEL 6','LEVEL 7','LEVEL 8','LEVEL 9','MASTER 10'];
    var tierClasses = ['practice','practice','level3','level4','level5','level6','level7','level8','level9','master'];

    // THE TRIAD CIRCUIT
    var circuits = {
        c1: {name: 'MEMORY', icon: 'üß†', label: 'Circuit 1', sessions: 245, avg: 4.2, masters: 1},
        c2: {name: 'MENTAL AGILITY', icon: '‚ö°', label: 'Circuit 2', sessions: 187, avg: 3.8, masters: 0},
        c3: {name: 'VISUAL TRACKING', icon: 'üëÅÔ∏è', label: 'Circuit 3', sessions: 156, avg: 3.5, masters: 0}
    };

    // TEAM GOTROTTERS
    var users = [
        {id:1, name:'Mar√≠a Garc√≠a', email:'maria@email.com', status:'paid', c1:5, c2:4, c3:3, lastActive:'2026-01-09'},
        {id:2, name:'Roberto L√≥pez', email:'roberto@email.com', status:'paid', c1:7, c2:6, c3:5, lastActive:'2026-01-09'},
        {id:3, name:'Carmen Rivera', email:'carmen@email.com', status:'paid', c1:10, c2:8, c3:7, lastActive:'2026-01-08'},
        {id:4, name:'Jos√© Mart√≠nez', email:'jose@email.com', status:'paid', c1:3, c2:2, c3:2, lastActive:'2026-01-09'},
        {id:5, name:'Ana Rodr√≠guez', email:'ana@email.com', status:'trial', c1:2, c2:1, c3:1, lastActive:'2026-01-07'},
        {id:6, name:'Pedro Santos', email:'pedro@email.com', status:'paid', c1:4, c2:3, c3:3, lastActive:'2026-01-09'},
        {id:7, name:'Luis Hern√°ndez', email:'luis@email.com', status:'paid', c1:8, c2:7, c3:6, lastActive:'2026-01-08'},
        {id:8, name:'Rosa D√≠az', email:'rosa@email.com', status:'trial', c1:1, c2:1, c3:1, lastActive:'2026-01-09'}
    ];

    var activities = [
        {id:1, type:'user', text:'Rosa D√≠az joined Team GoTrotters (trial)', time:'5 minutes ago'},
        {id:2, type:'circuit', text:'Roberto L√≥pez reached LEVEL 8 in Memory', time:'12 minutes ago'},
        {id:3, type:'user', text:'Pedro Santos converted to paid ($5/mo)', time:'1 hour ago'},
        {id:4, type:'circuit', text:'Carmen Rivera reached MASTER 10! üëë', time:'3 hours ago'},
        {id:5, type:'user', text:'Ana Rodr√≠guez joined Team GoTrotters (trial)', time:'1 day ago'}
    ];

    var nextUserId = 9, nextActivityId = 6, deleteTarget = null;
    var currentLang = localStorage.getItem('gt-admin-lang') || 'en';

    function init() {
        setLang(currentLang);
        setupPinInputs();
        setupEventListeners();
        populateTierSelects();
        if (sessionStorage.getItem('gostar-admin-auth') === 'true') showDashboard();
    }

    function setLang(lang) {
        currentLang = lang;
        localStorage.setItem('gt-admin-lang', lang);
        document.body.className = lang;
        document.getElementById('btnEn').className = lang === 'en' ? 'lang-btn active' : 'lang-btn';
        document.getElementById('btnEs').className = lang === 'es' ? 'lang-btn active' : 'lang-btn';
    }

    function setupPinInputs() {
        var pins = [document.getElementById('pin1'), document.getElementById('pin2'), document.getElementById('pin3'), document.getElementById('pin4')];
        pins.forEach(function(input, idx) {
            input.addEventListener('input', function() { if (this.value.length === 1 && idx < 3) pins[idx + 1].focus(); });
            input.addEventListener('keydown', function(e) {
                if (e.key === 'Backspace' && this.value === '' && idx > 0) pins[idx - 1].focus();
                if (e.key === 'Enter') attemptLogin();
            });
        });
        pins[0].focus();
    }

    function attemptLogin() {
        var pin = '';
        for (var i = 1; i <= 4; i++) pin += document.getElementById('pin' + i).value;
        if (pin === '1628') {
            sessionStorage.setItem('gostar-admin-auth', 'true');
            showDashboard();
        } else {
            document.getElementById('loginError').classList.add('show');
            for (var i = 1; i <= 4; i++) document.getElementById('pin' + i).value = '';
            document.getElementById('pin1').focus();
            setTimeout(function() { document.getElementById('loginError').classList.remove('show'); }, 3000);
        }
    }

    function showDashboard() {
        document.getElementById('loginScreen').classList.add('hidden');
        document.getElementById('dashboard').classList.add('visible');
        renderAll();
    }

    function logout() {
        sessionStorage.removeItem('gostar-admin-auth');
        document.getElementById('dashboard').classList.remove('visible');
        document.getElementById('loginScreen').classList.remove('hidden');
        for (var i = 1; i <= 4; i++) document.getElementById('pin' + i).value = '';
        document.getElementById('pin1').focus();
    }

    function setupEventListeners() {
        document.getElementById('loginBtn').addEventListener('click', attemptLogin);
        document.getElementById('logoutBtn').addEventListener('click', logout);
        document.getElementById('btnEn').addEventListener('click', function() { setLang('en'); });
        document.getElementById('btnEs').addEventListener('click', function() { setLang('es'); });

        document.querySelectorAll('.nav-item').forEach(function(btn) {
            btn.addEventListener('click', function() {
                var page = this.getAttribute('data-page');
                showPage(page);
                document.querySelectorAll('.nav-item').forEach(function(n) { n.classList.remove('active'); });
                this.classList.add('active');
            });
        });

        document.querySelectorAll('[data-close]').forEach(function(btn) {
            btn.addEventListener('click', function() { closeModal(this.getAttribute('data-close')); });
        });

        document.getElementById('addUserBtn').addEventListener('click', openAddUserModal);
        document.getElementById('saveUserBtn').addEventListener('click', saveUser);
        document.getElementById('exportBtn').addEventListener('click', exportUsers);
        document.getElementById('addActivityBtn').addEventListener('click', openAddActivityModal);
        document.getElementById('saveActivityBtn').addEventListener('click', saveActivity);
        document.getElementById('clearActivityBtn').addEventListener('click', function() {
            deleteTarget = {type: 'clearActivity'};
            document.getElementById('deleteText').textContent = currentLang === 'es' ? 'Esto eliminar√° todas las entradas.' : 'This will remove all entries.';
            openModal('deleteModal');
        });
        document.getElementById('saveCircuitBtn').addEventListener('click', saveCircuitStats);
        document.getElementById('confirmDeleteBtn').addEventListener('click', confirmDelete);

        document.querySelectorAll('.modal-overlay').forEach(function(overlay) {
            overlay.addEventListener('click', function(e) { if (e.target === overlay) overlay.classList.remove('show'); });
        });
    }

    function showPage(page) {
        document.querySelectorAll('.page-section').forEach(function(s) { s.classList.remove('active'); });
        document.getElementById('page-' + page).classList.add('active');
    }

    function openModal(id) { document.getElementById(id).classList.add('show'); }
    function closeModal(id) { document.getElementById(id).classList.remove('show'); }

    function showToast(message, isError) {
        var toast = document.getElementById('toast');
        document.getElementById('toastText').textContent = message;
        document.getElementById('toastIcon').textContent = isError ? '‚úó' : '‚úì';
        toast.classList.toggle('error', isError);
        toast.classList.add('show');
        setTimeout(function() { toast.classList.remove('show'); }, 3000);
    }

    function getTierBadge(level) {
        var idx = Math.min(Math.max(level - 1, 0), 9);
        return '<span class="tier-badge ' + tierClasses[idx] + '">' + tierList[idx] + '</span>';
    }

    function getStatusBadge(status) {
        return '<span class="badge badge-' + status + '">' + (status === 'trial' ? 'Trial' : 'Paid') + '</span>';
    }

    function populateTierSelects() {
        var html = '';
        tierList.forEach(function(tier, idx) { html += '<option value="' + (idx + 1) + '">' + (idx + 1) + ' - ' + tier + '</option>'; });
        ['userC1', 'userC2', 'userC3'].forEach(function(id) { document.getElementById(id).innerHTML = html; });
    }

    function renderAll() {
        renderStats();
        renderOverviewCircuits();
        renderUsersTable();
        renderCircuitsAnalytics();
        renderTierDistribution();
        renderActivityList();
    }

    function renderStats() {
        var paid = users.filter(function(u) { return u.status === 'paid'; }).length;
        var trial = users.filter(function(u) { return u.status === 'trial'; }).length;
        var masters = users.filter(function(u) { return u.c1 === 10 || u.c2 === 10 || u.c3 === 10; }).length;
        document.getElementById('totalUsers').textContent = users.length;
        document.getElementById('monthlyRevenue').textContent = paid * 5;
        document.getElementById('trialUsers').textContent = trial;
        document.getElementById('totalMasters').textContent = masters;
    }

    function renderOverviewCircuits() {
        var html = '';
        ['c1', 'c2', 'c3'].forEach(function(key, idx) {
            var c = circuits[key];
            var members = users.filter(function(u) { return u[key] > 0; }).length;
            var avg = members > 0 ? (users.reduce(function(sum, u) { return sum + u[key]; }, 0) / members).toFixed(1) : '0';
            var masterCount = users.filter(function(u) { return u[key] === 10; }).length;
            html += '<div class="circuit-card"><div class="circuit-card-header c' + (idx+1) + '"><span class="circuit-card-icon">' + c.icon + '</span><span class="circuit-card-title">' + c.name + '</span><span class="circuit-card-num">' + c.label + '</span></div><div class="circuit-card-body"><div class="circuit-card-stats"><div class="circuit-stat"><div class="circuit-stat-value">' + members + '</div><div class="circuit-stat-label">Members</div></div><div class="circuit-stat"><div class="circuit-stat-value">' + avg + '</div><div class="circuit-stat-label">Avg Tier</div></div><div class="circuit-stat"><div class="circuit-stat-value">' + masterCount + '</div><div class="circuit-stat-label">Masters</div></div></div></div></div>';
        });
        document.getElementById('overviewCircuits').innerHTML = html;
    }

    function renderUsersTable() {
        var html = '';
        users.forEach(function(u) {
            html += '<tr><td>' + u.name + '</td><td>' + u.email + '</td><td>' + getStatusBadge(u.status) + '</td><td>' + getTierBadge(u.c1) + '</td><td>' + getTierBadge(u.c2) + '</td><td>' + getTierBadge(u.c3) + '</td><td>' + u.lastActive + '</td><td><div class="action-btns"><button class="action-btn" onclick="window.editUser(' + u.id + ')" title="Edit">‚úèÔ∏è</button><button class="action-btn delete" onclick="window.deleteUser(' + u.id + ')" title="Delete">üóëÔ∏è</button></div></td></tr>';
        });
        document.getElementById('usersTable').innerHTML = html;
    }

    function renderCircuitsAnalytics() {
        var html = '';
        ['c1', 'c2', 'c3'].forEach(function(key, idx) {
            var c = circuits[key];
            html += '<div class="circuit-card"><div class="circuit-card-header c' + (idx+1) + '"><span class="circuit-card-icon">' + c.icon + '</span><span class="circuit-card-title">' + c.name + '</span><span class="circuit-card-num">' + c.label + '</span><button class="circuit-card-edit" onclick="window.editCircuit(\'' + key + '\')">‚úèÔ∏è Edit</button></div><div class="circuit-card-body"><div class="circuit-card-stats"><div class="circuit-stat"><div class="circuit-stat-value">' + c.sessions + '</div><div class="circuit-stat-label">Sessions</div></div><div class="circuit-stat"><div class="circuit-stat-value">' + c.avg + '</div><div class="circuit-stat-label">Avg</div></div><div class="circuit-stat"><div class="circuit-stat-value">' + c.masters + '</div><div class="circuit-stat-label">Masters</div></div></div></div></div>';
        });
        document.getElementById('circuitsAnalytics').innerHTML = html;
    }

    function renderTierDistribution() {
        var html = '';
        tierList.forEach(function(tier, idx) {
            var level = idx + 1;
            var c1 = users.filter(function(u) { return u.c1 === level; }).length;
            var c2 = users.filter(function(u) { return u.c2 === level; }).length;
            var c3 = users.filter(function(u) { return u.c3 === level; }).length;
            html += '<tr><td>' + getTierBadge(level) + '</td><td>' + c1 + '</td><td>' + c2 + '</td><td>' + c3 + '</td></tr>';
        });
        document.getElementById('tierDistTable').innerHTML = html;
    }

    function renderActivityList() {
        if (activities.length === 0) {
            document.getElementById('activityList').innerHTML = '<div style="padding:40px;text-align:center;color:var(--muted)">No activity yet</div>';
            return;
        }
        var html = '';
        activities.forEach(function(a) {
            html += '<div class="activity-item"><div class="activity-icon ' + a.type + '">' + (a.type === 'user' ? 'üèÄ' : 'üî∫') + '</div><div class="activity-content"><div class="activity-text">' + a.text + '</div><div class="activity-time">' + a.time + '</div></div><div class="activity-actions"><button class="action-btn" onclick="window.editActivity(' + a.id + ')" title="Edit">‚úèÔ∏è</button><button class="action-btn delete" onclick="window.deleteActivity(' + a.id + ')" title="Delete">üóëÔ∏è</button></div></div>';
        });
        document.getElementById('activityList').innerHTML = html;
    }

    function openAddUserModal() {
        document.getElementById('userModalTitle').textContent = currentLang === 'es' ? 'AGREGAR GOTROTTER' : 'ADD GOTROTTER';
        document.getElementById('userId').value = '';
        document.getElementById('userName').value = '';
        document.getElementById('userEmail').value = '';
        document.getElementById('userStatus').value = 'trial';
        document.getElementById('userC1').value = '1';
        document.getElementById('userC2').value = '1';
        document.getElementById('userC3').value = '1';
        openModal('userModal');
    }

    window.editUser = function(id) {
        var user = users.find(function(u) { return u.id === id; });
        if (!user) return;
        document.getElementById('userModalTitle').textContent = currentLang === 'es' ? 'EDITAR GOTROTTER' : 'EDIT GOTROTTER';
        document.getElementById('userId').value = id;
        document.getElementById('userName').value = user.name;
        document.getElementById('userEmail').value = user.email;
        document.getElementById('userStatus').value = user.status;
        document.getElementById('userC1').value = user.c1;
        document.getElementById('userC2').value = user.c2;
        document.getElementById('userC3').value = user.c3;
        openModal('userModal');
    };

    function saveUser() {
        var id = document.getElementById('userId').value;
        var name = document.getElementById('userName').value.trim();
        var email = document.getElementById('userEmail').value.trim();
        var status = document.getElementById('userStatus').value;
        var c1 = parseInt(document.getElementById('userC1').value);
        var c2 = parseInt(document.getElementById('userC2').value);
        var c3 = parseInt(document.getElementById('userC3').value);
        if (!name || !email) { showToast(currentLang === 'es' ? 'Ingresa nombre y email' : 'Enter name and email', true); return; }
        if (id) {
            var idx = users.findIndex(function(u) { return u.id === parseInt(id); });
            if (idx > -1) { users[idx].name = name; users[idx].email = email; users[idx].status = status; users[idx].c1 = c1; users[idx].c2 = c2; users[idx].c3 = c3; }
        } else {
            users.push({ id: nextUserId++, name: name, email: email, status: status, c1: c1, c2: c2, c3: c3, lastActive: new Date().toISOString().split('T')[0] });
        }
        closeModal('userModal');
        renderAll();
        showToast(currentLang === 'es' ? 'Guardado' : 'Saved');
    }

    window.deleteUser = function(id) {
        var user = users.find(function(u) { return u.id === id; });
        if (!user) return;
        deleteTarget = {type: 'user', id: id};
        document.getElementById('deleteText').innerHTML = (currentLang === 'es' ? 'Eliminar ' : 'Delete ') + '<strong style="color:var(--orange)">' + user.name + '</strong>?';
        openModal('deleteModal');
    };

    window.editCircuit = function(key) {
        var c = circuits[key];
        document.getElementById('circuitModalTitle').textContent = 'EDIT: ' + c.name;
        document.getElementById('circuitId').value = key;
        document.getElementById('circuitSessions').value = c.sessions;
        document.getElementById('circuitAvg').value = c.avg;
        document.getElementById('circuitMasters').value = c.masters;
        openModal('circuitModal');
    };

    function saveCircuitStats() {
        var key = document.getElementById('circuitId').value;
        circuits[key].sessions = parseInt(document.getElementById('circuitSessions').value) || 0;
        circuits[key].avg = parseFloat(document.getElementById('circuitAvg').value) || 0;
        circuits[key].masters = parseInt(document.getElementById('circuitMasters').value) || 0;
        closeModal('circuitModal');
        renderAll();
        showToast(currentLang === 'es' ? 'Guardado' : 'Saved');
    }

    function openAddActivityModal() {
        document.getElementById('activityModalTitle').textContent = currentLang === 'es' ? 'AGREGAR ACTIVIDAD' : 'ADD ACTIVITY';
        document.getElementById('activityId').value = '';
        document.getElementById('activityType').value = 'user';
        document.getElementById('activityText').value = '';
        document.getElementById('activityTime').value = '';
        openModal('activityModal');
    }

    window.editActivity = function(id) {
        var item = activities.find(function(a) { return a.id === id; });
        if (!item) return;
        document.getElementById('activityModalTitle').textContent = currentLang === 'es' ? 'EDITAR ACTIVIDAD' : 'EDIT ACTIVITY';
        document.getElementById('activityId').value = id;
        document.getElementById('activityType').value = item.type;
        document.getElementById('activityText').value = item.text;
        document.getElementById('activityTime').value = item.time;
        openModal('activityModal');
    };

    function saveActivity() {
        var id = document.getElementById('activityId').value;
        var type = document.getElementById('activityType').value;
        var text = document.getElementById('activityText').value.trim();
        var time = document.getElementById('activityTime').value.trim() || 'Just now';
        if (!text) { showToast(currentLang === 'es' ? 'Ingresa descripci√≥n' : 'Enter description', true); return; }
        if (id) {
            var idx = activities.findIndex(function(a) { return a.id === parseInt(id); });
            if (idx > -1) { activities[idx].type = type; activities[idx].text = text; activities[idx].time = time; }
        } else {
            activities.unshift({ id: nextActivityId++, type: type, text: text, time: time });
        }
        closeModal('activityModal');
        renderActivityList();
        showToast(currentLang === 'es' ? 'Guardado' : 'Saved');
    }

    window.deleteActivity = function(id) {
        deleteTarget = {type: 'activity', id: id};
        document.getElementById('deleteText').textContent = currentLang === 'es' ? 'Eliminar esta entrada?' : 'Delete this entry?';
        openModal('deleteModal');
    };

    function confirmDelete() {
        if (!deleteTarget) return;
        if (deleteTarget.type === 'user') {
            users = users.filter(function(u) { return u.id !== deleteTarget.id; });
            renderAll();
        } else if (deleteTarget.type === 'activity') {
            activities = activities.filter(function(a) { return a.id !== deleteTarget.id; });
            renderActivityList();
        } else if (deleteTarget.type === 'clearActivity') {
            activities = [];
            renderActivityList();
        }
        deleteTarget = null;
        closeModal('deleteModal');
        showToast(currentLang === 'es' ? 'Eliminado' : 'Deleted');
    }

    function exportUsers() {
        var csv = 'Name,Email,Status,Memory,Agility,Tracking,LastActive\n';
        users.forEach(function(u) { csv += u.name + ',' + u.email + ',' + u.status + ',' + tierList[u.c1 - 1] + ',' + tierList[u.c2 - 1] + ',' + tierList[u.c3 - 1] + ',' + u.lastActive + '\n'; });
        var blob = new Blob([csv], {type: 'text/csv'});
        var a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = 'team-gotrotters-export.csv';
        a.click();
        showToast(currentLang === 'es' ? 'Exportado' : 'Exported');
    }

    init();
})();
</script>
</body>
</html>
