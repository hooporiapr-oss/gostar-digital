<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Dashboard - GoTrotters</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Outfit:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
:root{--orange:#FF6B00;--orange-dark:#CC5500;--teal:#00D9A5;--gold:#FFD700;--purple:#9B59B6;--blue:#3498db;--dark:#0a0a0f;--darker:#050508;--card:#111118;--card-hover:#1a1a24;--text:#FFFFFF;--muted:#8892a0;--border:rgba(255,255,255,0.08);--success:#00D9A5;--danger:#FF4757;--warning:#FFD93D;--sidebar:260px}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Outfit',sans-serif;background:var(--dark);color:var(--text);min-height:100vh}
body.es .lang-en{display:none !important}
body.en .lang-es{display:none !important}

.login-screen{position:fixed;top:0;left:0;right:0;bottom:0;background:linear-gradient(135deg,var(--dark) 0%,var(--darker) 100%);display:flex;align-items:center;justify-content:center;z-index:9999}
.login-screen.hidden{display:none}
.login-card{background:var(--card);border:1px solid var(--border);border-radius:24px;padding:48px 40px;width:100%;max-width:380px;text-align:center}
.login-logo{font-family:'Bebas Neue',sans-serif;font-size:2.5rem;letter-spacing:4px;margin-bottom:10px}
.login-logo .go{color:var(--orange)}
.login-logo .trotters{color:var(--teal)}
.login-badge{display:inline-block;font-size:0.7rem;font-weight:700;color:var(--dark);background:var(--gold);padding:5px 15px;border-radius:20px;text-transform:uppercase;letter-spacing:1px;margin-bottom:30px}
.login-subtitle{font-size:0.9rem;color:var(--muted);margin-bottom:30px}
.pin-input-group{display:flex;justify-content:center;gap:12px;margin-bottom:24px}
.pin-input{width:60px;height:72px;font-size:1.8rem;font-weight:700;font-family:'Bebas Neue',sans-serif;text-align:center;background:var(--darker);border:2px solid var(--border);border-radius:12px;color:var(--text);transition:all 0.2s}
.pin-input:focus{outline:none;border-color:var(--orange);box-shadow:0 0 20px rgba(255,107,0,0.2)}
.login-btn{width:100%;padding:16px;background:linear-gradient(135deg,var(--orange),var(--orange-dark));color:var(--text);border:none;border-radius:12px;font-family:'Bebas Neue',sans-serif;font-size:1.1rem;letter-spacing:2px;cursor:pointer;transition:all 0.3s}
.login-btn:hover{transform:translateY(-2px);box-shadow:0 5px 25px rgba(255,107,0,0.4)}
.login-error{color:var(--danger);font-size:0.85rem;margin-top:15px;display:none}
.login-error.show{display:block}

.dashboard{display:none;min-height:100vh}
.dashboard.visible{display:flex}
.sidebar{width:var(--sidebar);background:var(--darker);border-right:1px solid var(--border);padding:24px 0;display:flex;flex-direction:column;position:fixed;height:100vh;overflow-y:auto}
.sidebar-header{padding:0 24px 24px;border-bottom:1px solid var(--border);margin-bottom:20px}
.sidebar-logo{font-family:'Bebas Neue',sans-serif;font-size:1.5rem;letter-spacing:3px;margin-bottom:10px}
.sidebar-logo .go{color:var(--orange)}
.sidebar-logo .trotters{color:var(--teal)}
.admin-badge{display:inline-block;background:linear-gradient(135deg,var(--danger),#cc3344);color:var(--text);padding:4px 12px;border-radius:20px;font-size:0.65rem;font-weight:700;text-transform:uppercase;letter-spacing:1px}
.nav-section{padding:0 12px;margin-bottom:20px}
.nav-section-title{font-size:0.65rem;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:1px;padding:0 16px;margin-bottom:10px}
.nav-item{display:flex;align-items:center;gap:12px;width:100%;padding:12px 16px;border:none;background:transparent;border-radius:10px;color:var(--muted);font-family:'Outfit',sans-serif;font-size:0.9rem;font-weight:500;cursor:pointer;transition:all 0.2s;text-align:left;margin-bottom:4px}
.nav-item:hover{background:var(--card);color:var(--text)}
.nav-item.active{background:var(--orange);color:var(--text)}
.nav-item-icon{font-size:1.1rem;width:24px;text-align:center}
.sidebar-footer{padding:20px 24px;border-top:1px solid var(--border);margin-top:auto}
.lang-toggle{display:flex;gap:8px;background:var(--card);padding:4px;border-radius:10px;margin-bottom:15px}
.lang-btn{flex:1;padding:8px;border:none;background:transparent;color:var(--muted);border-radius:8px;font-weight:600;font-size:0.8rem;cursor:pointer;font-family:'Outfit',sans-serif}
.lang-btn.active{background:var(--orange);color:var(--text)}
.logout-btn{width:100%;padding:12px;border:1px solid var(--border);background:transparent;color:var(--muted);border-radius:10px;font-weight:600;font-size:0.85rem;cursor:pointer;transition:all 0.2s}
.logout-btn:hover{border-color:var(--danger);color:var(--danger)}

.main-content{flex:1;margin-left:var(--sidebar);padding:30px;max-width:1400px}
.page-header{margin-bottom:30px}
.page-title{font-family:'Bebas Neue',sans-serif;font-size:2rem;letter-spacing:3px;margin-bottom:5px}
.page-subtitle{font-size:0.9rem;color:var(--muted)}

.page-section{display:none}
.page-section.active{display:block}

.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-bottom:30px}
.stat-card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:24px;transition:all 0.3s}
.stat-card:hover{transform:translateY(-3px);border-color:var(--orange)}
.stat-card-icon{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.5rem;margin-bottom:15px}
.stat-card-icon.orange{background:rgba(255,107,0,0.15);color:var(--orange)}
.stat-card-icon.teal{background:rgba(0,217,165,0.15);color:var(--teal)}
.stat-card-icon.gold{background:rgba(255,215,0,0.15);color:var(--gold)}
.stat-card-icon.purple{background:rgba(155,89,182,0.15);color:var(--purple)}
.stat-card-value{font-family:'Bebas Neue',sans-serif;font-size:2.2rem;letter-spacing:2px;margin-bottom:5px}
.stat-card-label{font-size:0.8rem;color:var(--muted);text-transform:uppercase;letter-spacing:1px}

.game-cards-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;margin-bottom:30px}
.game-card{background:var(--card);border:1px solid var(--border);border-radius:16px;overflow:hidden;transition:all 0.3s}
.game-card:hover{transform:translateY(-3px)}
.game-card-header{padding:16px 20px;display:flex;align-items:center;gap:12px}
.game-card-header.g1{background:linear-gradient(135deg,rgba(255,107,0,0.2),transparent);border-bottom:2px solid var(--orange)}
.game-card-header.g2{background:linear-gradient(135deg,rgba(0,217,165,0.2),transparent);border-bottom:2px solid var(--teal)}
.game-card-header.g3{background:linear-gradient(135deg,rgba(255,215,0,0.2),transparent);border-bottom:2px solid var(--gold)}
.game-card-icon{font-size:1.5rem}
.game-card-title{font-family:'Bebas Neue',sans-serif;font-size:1.1rem;letter-spacing:2px}
.game-card-body{padding:20px}
.game-card-stats{display:flex;gap:20px}
.game-stat{text-align:center;flex:1}
.game-stat-value{font-family:'Bebas Neue',sans-serif;font-size:1.5rem}
.game-stat-label{font-size:0.7rem;color:var(--muted);text-transform:uppercase}

.table-card{background:var(--card);border:1px solid var(--border);border-radius:16px;overflow:hidden;margin-bottom:30px}
.table-header{padding:20px 24px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:15px}
.table-title{font-family:'Bebas Neue',sans-serif;font-size:1.2rem;letter-spacing:2px}
.table-actions{display:flex;gap:10px}
.btn{padding:10px 20px;border:none;border-radius:10px;font-weight:600;font-size:0.85rem;cursor:pointer;transition:all 0.2s;font-family:'Outfit',sans-serif}
.btn-primary{background:var(--orange);color:var(--text)}
.btn-primary:hover{background:var(--orange-dark)}
.btn-secondary{background:var(--card);border:1px solid var(--border);color:var(--text)}
.btn-secondary:hover{border-color:var(--orange)}
.table-container{overflow-x:auto}
table{width:100%;border-collapse:collapse}
th,td{padding:14px 20px;text-align:left;border-bottom:1px solid var(--border)}
th{font-size:0.75rem;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:1px;background:var(--darker)}
td{font-size:0.9rem}
tr:hover{background:var(--card-hover)}

.badge{display:inline-block;padding:4px 10px;border-radius:20px;font-size:0.7rem;font-weight:700;text-transform:uppercase;letter-spacing:0.5px}
.badge-active{background:rgba(0,217,165,0.15);color:var(--teal)}
.badge-inactive{background:rgba(255,71,87,0.15);color:var(--danger)}
.badge-trial{background:rgba(155,89,182,0.15);color:var(--purple)}
.badge-starter{background:rgba(0,217,165,0.15);color:var(--teal)}
.badge-professional{background:rgba(255,107,0,0.15);color:var(--orange)}
.badge-enterprise{background:rgba(255,215,0,0.15);color:var(--gold)}

.tier-badge{display:inline-flex;align-items:center;gap:4px;padding:3px 8px;border-radius:6px;font-size:0.65rem;font-weight:700}
.tier-badge.tryout{background:rgba(155,89,182,0.2);color:#b57edc}
.tier-badge.rookie{background:rgba(255,215,0,0.2);color:var(--gold)}
.tier-badge.jv{background:rgba(255,107,0,0.2);color:var(--orange)}
.tier-badge.varsity{background:rgba(0,217,165,0.2);color:var(--teal)}
.tier-badge.college{background:rgba(52,152,219,0.2);color:var(--blue)}
.tier-badge.pro{background:rgba(155,89,182,0.2);color:var(--purple)}
.tier-badge.allstar{background:rgba(255,215,0,0.2);color:var(--gold)}
.tier-badge.legend{background:rgba(255,107,0,0.2);color:var(--orange)}
.tier-badge.master{background:linear-gradient(135deg,rgba(255,215,0,0.3),rgba(255,107,0,0.3));color:var(--gold)}

.modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.8);display:none;align-items:center;justify-content:center;z-index:1000;padding:20px}
.modal-overlay.show{display:flex}
.modal{background:var(--card);border:1px solid var(--border);border-radius:20px;width:100%;max-width:480px;max-height:90vh;overflow-y:auto}
.modal-header{padding:24px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
.modal-title{font-family:'Bebas Neue',sans-serif;font-size:1.3rem;letter-spacing:2px}
.modal-close{width:36px;height:36px;border:none;background:var(--darker);border-radius:10px;color:var(--muted);font-size:1.2rem;cursor:pointer}
.modal-close:hover{color:var(--danger)}
.modal-body{padding:24px}
.form-group{margin-bottom:20px}
.form-label{display:block;font-size:0.8rem;font-weight:600;color:var(--muted);margin-bottom:8px;text-transform:uppercase;letter-spacing:1px}
.form-input,.form-select{width:100%;padding:14px 16px;background:var(--darker);border:1px solid var(--border);border-radius:10px;color:var(--text);font-size:0.95rem;font-family:'Outfit',sans-serif}
.form-input:focus,.form-select:focus{outline:none;border-color:var(--orange)}
.modal-footer{padding:20px 24px;border-top:1px solid var(--border);display:flex;justify-content:flex-end;gap:12px}

.tier-dist-table{width:100%;border-collapse:collapse;margin-top:15px}
.tier-dist-table th,.tier-dist-table td{padding:10px 12px;text-align:center;border:1px solid var(--border);font-size:0.8rem}
.tier-dist-table th{background:var(--darker);font-weight:600;color:var(--muted)}
.tier-dist-table td{background:var(--card)}

.activity-list{padding:0}
.activity-item{display:flex;align-items:flex-start;gap:15px;padding:16px 20px;border-bottom:1px solid var(--border)}
.activity-item:last-child{border-bottom:none}
.activity-icon{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:1.1rem;flex-shrink:0}
.activity-icon.facility{background:rgba(255,107,0,0.15);color:var(--orange)}
.activity-icon.user{background:rgba(0,217,165,0.15);color:var(--teal)}
.activity-icon.license{background:rgba(255,215,0,0.15);color:var(--gold)}
.activity-icon.game{background:rgba(155,89,182,0.15);color:var(--purple)}
.activity-content{flex:1}
.activity-text{font-size:0.9rem;margin-bottom:3px}
.activity-time{font-size:0.75rem;color:var(--muted)}

@media(max-width:1024px){.sidebar{width:80px;padding:15px 0}.sidebar-header{padding:0 10px 15px}.sidebar-logo span,.nav-item span:not(.nav-item-icon),.nav-section-title,.sidebar-footer .lang-toggle,.logout-btn span{display:none}.nav-item{justify-content:center;padding:12px}.nav-item-icon{margin:0}.main-content{margin-left:80px}}
@media(max-width:768px){.sidebar{display:none}.main-content{margin-left:0}.stats-grid{grid-template-columns:1fr 1fr}}
</style>
</head>
<body class="en">

<!-- LOGIN SCREEN - 4 DIGIT PIN -->
<div class="login-screen" id="loginScreen">
<div class="login-card">
<div class="login-logo"><span class="go">Go</span><span class="trotters">Trotters</span></div>
<div class="login-badge">Admin Portal</div>
<p class="login-subtitle"><span class="lang-en">Enter your 4-digit admin PIN</span><span class="lang-es">Ingresa tu PIN de 4 d√≠gitos</span></p>
<div class="pin-input-group">
<input type="password" class="pin-input" maxlength="1" id="pin1" inputmode="numeric" pattern="[0-9]*">
<input type="password" class="pin-input" maxlength="1" id="pin2" inputmode="numeric" pattern="[0-9]*">
<input type="password" class="pin-input" maxlength="1" id="pin3" inputmode="numeric" pattern="[0-9]*">
<input type="password" class="pin-input" maxlength="1" id="pin4" inputmode="numeric" pattern="[0-9]*">
</div>
<button class="login-btn" onclick="attemptLogin()"><span class="lang-en">ACCESS DASHBOARD</span><span class="lang-es">ACCEDER</span></button>
<p class="login-error" id="loginError"><span class="lang-en">Invalid PIN. Please try again.</span><span class="lang-es">PIN inv√°lido. Intenta de nuevo.</span></p>
</div>
</div>

<!-- DASHBOARD -->
<div class="dashboard" id="dashboard">
<aside class="sidebar">
<div class="sidebar-header">
<div class="sidebar-logo"><span class="go">Go</span><span class="trotters">Trotters</span></div>
<span class="admin-badge">Master Admin</span>
</div>
<nav class="nav-section">
<div class="nav-section-title"><span class="lang-en">Dashboard</span><span class="lang-es">Panel</span></div>
<button class="nav-item active" onclick="showPage('overview')"><span class="nav-item-icon">üìä</span><span class="lang-en">Overview</span><span class="lang-es">Resumen</span></button>
<button class="nav-item" onclick="showPage('facilities')"><span class="nav-item-icon">üè¢</span><span class="lang-en">Facilities</span><span class="lang-es">Facilidades</span></button>
<button class="nav-item" onclick="showPage('licenses')"><span class="nav-item-icon">üé´</span><span class="lang-en">Licenses</span><span class="lang-es">Licencias</span></button>
<button class="nav-item" onclick="showPage('gotrotters')"><span class="nav-item-icon">üèÄ</span><span class="lang-en">GoTrotters</span><span class="lang-es">GoTrotters</span></button>
</nav>
<nav class="nav-section">
<div class="nav-section-title"><span class="lang-en">Analytics</span><span class="lang-es">An√°lisis</span></div>
<button class="nav-item" onclick="showPage('analytics')"><span class="nav-item-icon">üìà</span><span class="lang-en">3 Point Play</span><span class="lang-es">3 Point Play</span></button>
<button class="nav-item" onclick="showPage('activity')"><span class="nav-item-icon">üìã</span><span class="lang-en">Activity</span><span class="lang-es">Actividad</span></button>
</nav>
<div class="sidebar-footer">
<div class="lang-toggle">
<button class="lang-btn active" onclick="setLang('en')">EN</button>
<button class="lang-btn" onclick="setLang('es')">ES</button>
</div>
<button class="logout-btn" onclick="logout()">üö™ <span class="lang-en">Logout</span><span class="lang-es">Salir</span></button>
</div>
</aside>

<main class="main-content">
<!-- OVERVIEW -->
<section class="page-section active" id="page-overview">
<header class="page-header">
<h1 class="page-title"><span class="lang-en">PLATFORM OVERVIEW</span><span class="lang-es">RESUMEN DE PLATAFORMA</span></h1>
<p class="page-subtitle"><span class="lang-en">GoTrotters Memory Training - Master Admin Dashboard</span><span class="lang-es">Entrenamiento de Memoria GoTrotters - Panel de Administrador</span></p>
</header>
<div class="stats-grid">
<div class="stat-card"><div class="stat-card-icon orange">üè¢</div><div class="stat-card-value" id="totalFacilities">4</div><div class="stat-card-label"><span class="lang-en">Facilities</span><span class="lang-es">Facilidades</span></div></div>
<div class="stat-card"><div class="stat-card-icon teal">üèÄ</div><div class="stat-card-value" id="totalUsers">28</div><div class="stat-card-label"><span class="lang-en">GoTrotters</span><span class="lang-es">GoTrotters</span></div></div>
<div class="stat-card"><div class="stat-card-icon gold">üé´</div><div class="stat-card-value" id="totalLicenses">120</div><div class="stat-card-label"><span class="lang-en">Total Licenses</span><span class="lang-es">Licencias Totales</span></div></div>
<div class="stat-card"><div class="stat-card-icon purple">‚≠ê</div><div class="stat-card-value" id="totalMastered">42</div><div class="stat-card-label"><span class="lang-en">Levels Mastered</span><span class="lang-es">Niveles Dominados</span></div></div>
</div>
<div class="game-cards-grid">
<div class="game-card"><div class="game-card-header g1"><span class="game-card-icon">üèÄ</span><span class="game-card-title">MASTERS OF THE GAME</span></div><div class="game-card-body"><div class="game-card-stats"><div class="game-stat"><div class="game-stat-value">28</div><div class="game-stat-label">Players</div></div><div class="game-stat"><div class="game-stat-value">4.2</div><div class="game-stat-label">Avg Level</div></div><div class="game-stat"><div class="game-stat-value">3</div><div class="game-stat-label">Masters</div></div></div></div></div>
<div class="game-card"><div class="game-card-header g2"><span class="game-card-icon">üìã</span><span class="game-card-title">THE PLAYBOOK</span></div><div class="game-card-body"><div class="game-card-stats"><div class="game-stat"><div class="game-stat-value">24</div><div class="game-stat-label">Players</div></div><div class="game-stat"><div class="game-stat-value">3.8</div><div class="game-stat-label">Avg Level</div></div><div class="game-stat"><div class="game-stat-value">2</div><div class="game-stat-label">Masters</div></div></div></div></div>
<div class="game-card"><div class="game-card-header g3"><span class="game-card-icon">‚ö°</span><span class="game-card-title">THE FAST BREAK</span></div><div class="game-card-body"><div class="game-card-stats"><div class="game-stat"><div class="game-stat-value">22</div><div class="game-stat-label">Players</div></div><div class="game-stat"><div class="game-stat-value">3.5</div><div class="game-stat-label">Avg Level</div></div><div class="game-stat"><div class="game-stat-value">1</div><div class="game-stat-label">Masters</div></div></div></div></div>
</div>
<div class="table-card">
<div class="table-header"><h3 class="table-title"><span class="lang-en">RECENT FACILITIES</span><span class="lang-es">FACILIDADES RECIENTES</span></h3></div>
<div class="table-container"><table><thead><tr><th><span class="lang-en">Facility</span><span class="lang-es">Facilidad</span></th><th>GoTrotters</th><th><span class="lang-en">License</span><span class="lang-es">Licencia</span></th><th><span class="lang-en">Status</span><span class="lang-es">Estado</span></th></tr></thead><tbody id="recentFacilitiesTable"></tbody></table></div>
</div>
</section>

<!-- FACILITIES -->
<section class="page-section" id="page-facilities">
<header class="page-header">
<h1 class="page-title"><span class="lang-en">FACILITIES</span><span class="lang-es">FACILIDADES</span></h1>
<p class="page-subtitle"><span class="lang-en">Manage training facilities</span><span class="lang-es">Administra las facilidades</span></p>
</header>
<div class="table-card">
<div class="table-header"><h3 class="table-title"><span class="lang-en">ALL FACILITIES</span><span class="lang-es">TODAS LAS FACILIDADES</span></h3><div class="table-actions"><button class="btn btn-primary" onclick="openModal('addFacilityModal')">+ <span class="lang-en">Add</span><span class="lang-es">Agregar</span></button></div></div>
<div class="table-container"><table><thead><tr><th><span class="lang-en">Name</span><span class="lang-es">Nombre</span></th><th>PIN</th><th><span class="lang-en">Type</span><span class="lang-es">Tipo</span></th><th><span class="lang-en">Pool</span><span class="lang-es">Grupo</span></th><th>GoTrotters</th><th><span class="lang-en">Status</span><span class="lang-es">Estado</span></th></tr></thead><tbody id="facilitiesTable"></tbody></table></div>
</div>
</section>

<!-- LICENSES -->
<section class="page-section" id="page-licenses">
<header class="page-header">
<h1 class="page-title"><span class="lang-en">LICENSES</span><span class="lang-es">LICENCIAS</span></h1>
<p class="page-subtitle"><span class="lang-en">Manage license pools</span><span class="lang-es">Administra grupos de licencias</span></p>
</header>
<div class="stats-grid">
<div class="stat-card"><div class="stat-card-icon gold">üé´</div><div class="stat-card-value" id="licTotal">120</div><div class="stat-card-label">Total</div></div>
<div class="stat-card"><div class="stat-card-icon teal">‚úÖ</div><div class="stat-card-value" id="licUsed">28</div><div class="stat-card-label"><span class="lang-en">Used</span><span class="lang-es">Usadas</span></div></div>
<div class="stat-card"><div class="stat-card-icon orange">üì¶</div><div class="stat-card-value" id="licAvailable">92</div><div class="stat-card-label"><span class="lang-en">Available</span><span class="lang-es">Disponibles</span></div></div>
</div>
<div class="table-card">
<div class="table-header"><h3 class="table-title"><span class="lang-en">LICENSE POOLS</span><span class="lang-es">GRUPOS DE LICENCIAS</span></h3><div class="table-actions"><button class="btn btn-primary" onclick="openModal('addLicenseModal')">+ <span class="lang-en">Create</span><span class="lang-es">Crear</span></button></div></div>
<div class="table-container"><table><thead><tr><th><span class="lang-en">Facility</span><span class="lang-es">Facilidad</span></th><th><span class="lang-en">Type</span><span class="lang-es">Tipo</span></th><th><span class="lang-en">Pool</span><span class="lang-es">Grupo</span></th><th><span class="lang-en">Used</span><span class="lang-es">Usadas</span></th><th><span class="lang-en">Expires</span><span class="lang-es">Expira</span></th></tr></thead><tbody id="licensesTable"></tbody></table></div>
</div>
</section>

<!-- GOTROTTERS -->
<section class="page-section" id="page-gotrotters">
<header class="page-header">
<h1 class="page-title">GOTROTTERS</h1>
<p class="page-subtitle"><span class="lang-en">All users across all facilities</span><span class="lang-es">Todos los usuarios</span></p>
</header>
<div class="table-card">
<div class="table-header"><h3 class="table-title"><span class="lang-en">ALL GOTROTTERS</span><span class="lang-es">TODOS LOS GOTROTTERS</span></h3><div class="table-actions"><button class="btn btn-secondary" onclick="exportUsers()">üì• Export</button></div></div>
<div class="table-container"><table><thead><tr><th><span class="lang-en">Name</span><span class="lang-es">Nombre</span></th><th><span class="lang-en">Facility</span><span class="lang-es">Facilidad</span></th><th>üèÄ</th><th>üìã</th><th>‚ö°</th><th>Total</th><th><span class="lang-en">Last Active</span><span class="lang-es">√öltima Vez</span></th></tr></thead><tbody id="usersTable"></tbody></table></div>
</div>
</section>

<!-- ANALYTICS -->
<section class="page-section" id="page-analytics">
<header class="page-header">
<h1 class="page-title">3 POINT PLAY ANALYTICS</h1>
<p class="page-subtitle"><span class="lang-en">Performance across all three games</span><span class="lang-es">Rendimiento en los tres juegos</span></p>
</header>
<div class="game-cards-grid">
<div class="game-card"><div class="game-card-header g1"><span class="game-card-icon">üèÄ</span><span class="game-card-title">MASTERS OF THE GAME</span></div><div class="game-card-body"><div class="game-card-stats"><div class="game-stat"><div class="game-stat-value">1,245</div><div class="game-stat-label">Plays</div></div><div class="game-stat"><div class="game-stat-value">4.2</div><div class="game-stat-label">Avg</div></div><div class="game-stat"><div class="game-stat-value">3</div><div class="game-stat-label">Masters</div></div></div></div></div>
<div class="game-card"><div class="game-card-header g2"><span class="game-card-icon">üìã</span><span class="game-card-title">THE PLAYBOOK</span></div><div class="game-card-body"><div class="game-card-stats"><div class="game-stat"><div class="game-stat-value">987</div><div class="game-stat-label">Plays</div></div><div class="game-stat"><div class="game-stat-value">3.8</div><div class="game-stat-label">Avg</div></div><div class="game-stat"><div class="game-stat-value">2</div><div class="game-stat-label">Masters</div></div></div></div></div>
<div class="game-card"><div class="game-card-header g3"><span class="game-card-icon">‚ö°</span><span class="game-card-title">THE FAST BREAK</span></div><div class="game-card-body"><div class="game-card-stats"><div class="game-stat"><div class="game-stat-value">856</div><div class="game-stat-label">Plays</div></div><div class="game-stat"><div class="game-stat-value">3.5</div><div class="game-stat-label">Avg</div></div><div class="game-stat"><div class="game-stat-value">1</div><div class="game-stat-label">Masters</div></div></div></div></div>
</div>
<div class="table-card">
<div class="table-header"><h3 class="table-title"><span class="lang-en">10-TIER DISTRIBUTION</span><span class="lang-es">DISTRIBUCI√ìN 10 NIVELES</span></h3></div>
<div class="table-container" style="padding:20px"><table class="tier-dist-table"><thead><tr><th>Tier</th><th>üèÄ</th><th>üìã</th><th>‚ö°</th></tr></thead><tbody id="tierDistTable"></tbody></table></div>
</div>
</section>

<!-- ACTIVITY -->
<section class="page-section" id="page-activity">
<header class="page-header">
<h1 class="page-title"><span class="lang-en">ACTIVITY LOG</span><span class="lang-es">REGISTRO DE ACTIVIDAD</span></h1>
<p class="page-subtitle"><span class="lang-en">Recent platform activity</span><span class="lang-es">Actividad reciente</span></p>
</header>
<div class="table-card">
<div class="table-header"><h3 class="table-title"><span class="lang-en">RECENT ACTIVITY</span><span class="lang-es">ACTIVIDAD RECIENTE</span></h3></div>
<div class="activity-list" id="activityList"></div>
</div>
</section>
</main>
</div>

<!-- MODALS -->
<div class="modal-overlay" id="addFacilityModal">
<div class="modal">
<div class="modal-header"><h3 class="modal-title"><span class="lang-en">ADD FACILITY</span><span class="lang-es">AGREGAR FACILIDAD</span></h3><button class="modal-close" onclick="closeModal('addFacilityModal')">√ó</button></div>
<div class="modal-body">
<div class="form-group"><label class="form-label"><span class="lang-en">Facility Name</span><span class="lang-es">Nombre</span></label><input type="text" class="form-input" id="facName" placeholder="Sunrise Senior Living"></div>
<div class="form-group"><label class="form-label">4-Digit PIN</label><input type="text" class="form-input" id="facPin" placeholder="1234" maxlength="4"></div>
<div class="form-group"><label class="form-label"><span class="lang-en">License Type</span><span class="lang-es">Tipo</span></label><select class="form-select" id="facLicType"><option value="starter">Starter (10)</option><option value="professional">Professional (25)</option><option value="enterprise">Enterprise (50+)</option></select></div>
<div class="form-group"><label class="form-label"><span class="lang-en">Pool Size</span><span class="lang-es">Tama√±o</span></label><input type="number" class="form-input" id="facPoolSize" value="25"></div>
<div class="form-group"><label class="form-label">Email</label><input type="email" class="form-input" id="facEmail" placeholder="admin@facility.com"></div>
</div>
<div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal('addFacilityModal')"><span class="lang-en">Cancel</span><span class="lang-es">Cancelar</span></button><button class="btn btn-primary" onclick="createFacility()"><span class="lang-en">Create</span><span class="lang-es">Crear</span></button></div>
</div>
</div>

<div class="modal-overlay" id="addLicenseModal">
<div class="modal">
<div class="modal-header"><h3 class="modal-title"><span class="lang-en">CREATE LICENSE</span><span class="lang-es">CREAR LICENCIA</span></h3><button class="modal-close" onclick="closeModal('addLicenseModal')">√ó</button></div>
<div class="modal-body">
<div class="form-group"><label class="form-label"><span class="lang-en">Facility</span><span class="lang-es">Facilidad</span></label><select class="form-select" id="licFacility"></select></div>
<div class="form-group"><label class="form-label"><span class="lang-en">Type</span><span class="lang-es">Tipo</span></label><select class="form-select" id="licType"><option value="starter">Starter</option><option value="professional">Professional</option><option value="enterprise">Enterprise</option></select></div>
<div class="form-group"><label class="form-label"><span class="lang-en">Pool Size</span><span class="lang-es">Tama√±o</span></label><input type="number" class="form-input" id="licPoolSize" value="25"></div>
<div class="form-group"><label class="form-label"><span class="lang-en">Duration</span><span class="lang-es">Duraci√≥n</span></label><select class="form-select" id="licDuration"><option value="7">7 Days (Trial)</option><option value="30">30 Days</option><option value="365" selected>1 Year</option></select></div>
</div>
<div class="modal-footer"><button class="btn btn-secondary" onclick="closeModal('addLicenseModal')"><span class="lang-en">Cancel</span><span class="lang-es">Cancelar</span></button><button class="btn btn-primary" onclick="createLicense()"><span class="lang-en">Create</span><span class="lang-es">Crear</span></button></div>
</div>
</div>

<script>
// 10-Tier System
var tierList = ['TRYOUT 1','TRYOUT 2','ROOKIE','JV','VARSITY','COLLEGE','PRO','ALL-STAR','LEGEND','MASTER'];
var tierClasses = ['tryout','tryout','rookie','jv','varsity','college','pro','allstar','legend','master'];

// Demo Data
var facilities = [
    {id:1, name:'Sunrise Senior Living', pin:'2847', licenseType:'professional', poolSize:25, used:8, status:'active'},
    {id:2, name:'Golden Years Care', pin:'5923', licenseType:'enterprise', poolSize:50, used:12, status:'active'},
    {id:3, name:'Paradise Residence', pin:'1456', licenseType:'starter', poolSize:10, used:5, status:'trial'},
    {id:4, name:'Coastal Living', pin:'7734', licenseType:'professional', poolSize:25, used:3, status:'active'}
];
var users = [
    {id:1, name:'Mar√≠a Garc√≠a', facility:'Sunrise Senior Living', g1:5, g2:4, g3:3, lastActive:'2025-01-05'},
    {id:2, name:'Roberto L√≥pez', facility:'Sunrise Senior Living', g1:7, g2:6, g3:5, lastActive:'2025-01-05'},
    {id:3, name:'Carmen Rivera', facility:'Golden Years Care', g1:10, g2:8, g3:7, lastActive:'2025-01-04'},
    {id:4, name:'Jos√© Mart√≠nez', facility:'Golden Years Care', g1:3, g2:2, g3:2, lastActive:'2025-01-05'},
    {id:5, name:'Ana Rodr√≠guez', facility:'Paradise Residence', g1:6, g2:5, g3:4, lastActive:'2025-01-03'},
    {id:6, name:'Pedro Santos', facility:'Coastal Living', g1:4, g2:3, g3:3, lastActive:'2025-01-05'},
    {id:7, name:'Luis Hern√°ndez', facility:'Sunrise Senior Living', g1:8, g2:7, g3:6, lastActive:'2025-01-04'},
    {id:8, name:'Rosa D√≠az', facility:'Golden Years Care', g1:9, g2:8, g3:8, lastActive:'2025-01-05'}
];
var activity = [
    {icon:'user', text:'Mar√≠a Garc√≠a joined Sunrise Senior Living', time:'5 minutes ago'},
    {icon:'game', text:'Roberto L√≥pez reached PRO in Masters of the Game', time:'12 minutes ago'},
    {icon:'facility', text:'Coastal Living was added to the platform', time:'1 hour ago'},
    {icon:'license', text:'25 Professional licenses assigned to Sunrise', time:'2 hours ago'},
    {icon:'game', text:'Carmen Rivera became a MASTER in all 3 games!', time:'3 hours ago'}
];

// Language
var currentLang = localStorage.getItem('gt-admin-lang') || 'en';
function setLang(l) {
    currentLang = l;
    localStorage.setItem('gt-admin-lang', l);
    document.body.className = l;
    document.querySelectorAll('.lang-btn').forEach(function(b) { b.classList.toggle('active', b.textContent.trim() === l.toUpperCase()); });
}
setLang(currentLang);

// PIN Input - 4 DIGITS
document.querySelectorAll('.pin-input').forEach(function(input, idx, inputs) {
    input.addEventListener('input', function() {
        if (this.value.length === 1 && idx < inputs.length - 1) inputs[idx + 1].focus();
    });
    input.addEventListener('keydown', function(e) {
        if (e.key === 'Backspace' && this.value === '' && idx > 0) inputs[idx - 1].focus();
        if (e.key === 'Enter') attemptLogin();
    });
});

// LOGIN - 4-DIGIT PIN: 1628
function attemptLogin() {
    var pin = '';
    for (var i = 1; i <= 4; i++) pin += document.getElementById('pin' + i).value;
    
    // Validate against ADMIN_PIN (1628) - In production this goes through API
    if (pin === '1628') {
        sessionStorage.setItem('gostar-admin-auth', 'true');
        document.getElementById('loginScreen').classList.add('hidden');
        document.getElementById('dashboard').classList.add('visible');
        loadDashboard();
    } else {
        document.getElementById('loginError').classList.add('show');
        for (var i = 1; i <= 4; i++) document.getElementById('pin' + i).value = '';
        document.getElementById('pin1').focus();
        setTimeout(function() { document.getElementById('loginError').classList.remove('show'); }, 3000);
    }
}

function logout() {
    sessionStorage.removeItem('gostar-admin-auth');
    document.getElementById('dashboard').classList.remove('visible');
    document.getElementById('loginScreen').classList.remove('hidden');
    for (var i = 1; i <= 4; i++) document.getElementById('pin' + i).value = '';
    document.getElementById('pin1').focus();
}

// Check auth on load
if (sessionStorage.getItem('gostar-admin-auth') === 'true') {
    document.getElementById('loginScreen').classList.add('hidden');
    document.getElementById('dashboard').classList.add('visible');
    loadDashboard();
}

function showPage(page) {
    document.querySelectorAll('.page-section').forEach(function(s) { s.classList.remove('active'); });
    document.querySelectorAll('.nav-item').forEach(function(n) { n.classList.remove('active'); });
    document.getElementById('page-' + page).classList.add('active');
    event.target.closest('.nav-item').classList.add('active');
}

function openModal(id) { document.getElementById(id).classList.add('show'); if (id === 'addLicenseModal') populateFacilitySelect(); }
function closeModal(id) { document.getElementById(id).classList.remove('show'); }

function getTierBadge(level) {
    var idx = Math.min(level - 1, 9); if (idx < 0) idx = 0;
    return '<span class="tier-badge ' + tierClasses[idx] + '">' + tierList[idx] + '</span>';
}
function getLicenseBadge(type) { return '<span class="badge badge-' + type + '">' + type.charAt(0).toUpperCase() + type.slice(1) + '</span>'; }
function getStatusBadge(status) { return '<span class="badge badge-' + status + '">' + status.charAt(0).toUpperCase() + status.slice(1) + '</span>'; }

function loadDashboard() {
    var html = '';
    facilities.slice(0, 4).forEach(function(f) { html += '<tr><td>' + f.name + '</td><td>' + f.used + '</td><td>' + getLicenseBadge(f.licenseType) + '</td><td>' + getStatusBadge(f.status) + '</td></tr>'; });
    document.getElementById('recentFacilitiesTable').innerHTML = html;
    
    html = '';
    facilities.forEach(function(f) { html += '<tr><td>' + f.name + '</td><td>' + f.pin + '</td><td>' + getLicenseBadge(f.licenseType) + '</td><td>' + f.used + '/' + f.poolSize + '</td><td>' + f.used + '</td><td>' + getStatusBadge(f.status) + '</td></tr>'; });
    document.getElementById('facilitiesTable').innerHTML = html;
    
    html = '';
    facilities.forEach(function(f) { var exp = new Date(); exp.setFullYear(exp.getFullYear() + 1); html += '<tr><td>' + f.name + '</td><td>' + getLicenseBadge(f.licenseType) + '</td><td>' + f.poolSize + '</td><td>' + f.used + '</td><td>' + exp.toLocaleDateString() + '</td></tr>'; });
    document.getElementById('licensesTable').innerHTML = html;
    
    html = '';
    users.forEach(function(u) { html += '<tr><td>' + u.name + '</td><td>' + u.facility + '</td><td>' + getTierBadge(u.g1) + '</td><td>' + getTierBadge(u.g2) + '</td><td>' + getTierBadge(u.g3) + '</td><td>' + (u.g1+u.g2+u.g3) + '/30</td><td>' + u.lastActive + '</td></tr>'; });
    document.getElementById('usersTable').innerHTML = html;
    
    html = '';
    tierList.forEach(function(tier, idx) {
        var g1 = users.filter(function(u) { return u.g1 === idx + 1; }).length;
        var g2 = users.filter(function(u) { return u.g2 === idx + 1; }).length;
        var g3 = users.filter(function(u) { return u.g3 === idx + 1; }).length;
        html += '<tr><td><span class="tier-badge ' + tierClasses[idx] + '">' + tier + '</span></td><td>' + g1 + '</td><td>' + g2 + '</td><td>' + g3 + '</td></tr>';
    });
    document.getElementById('tierDistTable').innerHTML = html;
    
    html = '';
    activity.forEach(function(a) { html += '<div class="activity-item"><div class="activity-icon ' + a.icon + '">' + (a.icon === 'facility' ? 'üè¢' : a.icon === 'user' ? 'üèÄ' : a.icon === 'license' ? 'üé´' : 'üéÆ') + '</div><div class="activity-content"><div class="activity-text">' + a.text + '</div><div class="activity-time">' + a.time + '</div></div></div>'; });
    document.getElementById('activityList').innerHTML = html;
}

function populateFacilitySelect() { var html = ''; facilities.forEach(function(f) { html += '<option value="' + f.id + '">' + f.name + '</option>'; }); document.getElementById('licFacility').innerHTML = html; }

function createFacility() {
    var name = document.getElementById('facName').value;
    var pin = document.getElementById('facPin').value;
    if (!name || pin.length !== 4) { alert('Enter valid name and 4-digit PIN'); return; }
    facilities.push({ id: facilities.length + 1, name: name, pin: pin, licenseType: document.getElementById('facLicType').value, poolSize: parseInt(document.getElementById('facPoolSize').value), used: 0, status: 'active' });
    closeModal('addFacilityModal'); loadDashboard();
    document.getElementById('totalFacilities').textContent = facilities.length;
}

function createLicense() { closeModal('addLicenseModal'); alert('License created!'); }

function exportUsers() {
    var csv = 'Name,Facility,Masters,Playbook,FastBreak,Total,LastActive\n';
    users.forEach(function(u) { csv += u.name + ',' + u.facility + ',' + tierList[u.g1-1] + ',' + tierList[u.g2-1] + ',' + tierList[u.g3-1] + ',' + (u.g1+u.g2+u.g3) + ',' + u.lastActive + '\n'; });
    var blob = new Blob([csv], {type: 'text/csv'});
    var a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'gotrotters-export.csv'; a.click();
}

document.getElementById('pin1').focus();
</script>
</body>
</html>
