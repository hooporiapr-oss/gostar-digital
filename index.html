<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>LaughCourt‚Ñ¢ - Exercise Your Memory. Exercise Your Smile.</title>
<meta name="description" content="LaughCourt - The ONLY laughter-powered memory fitness powered by Ritnome‚Ñ¢ rhythm-based cognitive training! 5 workouts. 10 tiers. $5/month.">
<link rel="icon" type="image/png" href="favicon.png">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Outfit:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
:root{--purple:#6B21A8;--purple-dark:#581C87;--purple-light:#9333EA;--teal:#00D9A5;--gold:#FFD700;--red:#FF1744;--orange:#FF6B00;--dark:#0a0a0f;--card:#111118;--text:#FFFFFF;--muted:#8892a0;--border:rgba(255,255,255,0.08)}
*{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{font-family:'Outfit',sans-serif;background:var(--dark);color:var(--text);min-height:100vh}
body.es .lang-en{display:none !important}
body.en .lang-es{display:none !important}

/* Language Toggle */
.lang-toggle{display:flex;gap:8px;justify-content:center;padding:20px}
.lang-btn{padding:8px 16px;border:2px solid var(--gold);background:transparent;color:var(--gold);border-radius:20px;font-weight:700;font-size:0.8rem;cursor:pointer;transition:all 0.3s}
.lang-btn.active{background:var(--gold);color:var(--dark)}

/* Header */
.header{text-align:center;padding:20px}
.logo{font-family:'Bebas Neue',sans-serif;font-size:clamp(2.5rem,10vw,4rem);letter-spacing:2px}
.logo .laugh{color:var(--gold)}
.logo .court{color:var(--text)}
.powered-by{font-size:0.7rem;color:var(--muted);letter-spacing:2px;text-transform:uppercase;margin-top:5px}
.powered-by .ritnome{color:var(--gold);font-weight:700}
.tagline{font-family:'Bebas Neue',sans-serif;font-size:clamp(0.8rem,2.5vw,1.1rem);letter-spacing:3px;color:var(--purple-light);margin-top:8px}

/* Hero */
.hero{text-align:center;padding:30px 20px}
.hero-icon{width:100px;height:100px;border-radius:50%;object-fit:cover;animation:bounce 2s infinite;cursor:pointer;transition:transform 0.3s;border:3px solid var(--gold);box-shadow:0 0 20px rgba(255,215,0,0.4)}
.hero-icon:hover{transform:scale(1.1)}
@keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-8px)}}
.hero-coach-label{font-size:0.95rem;color:var(--gold);margin:15px 0 10px;cursor:pointer;transition:all 0.3s}
.hero-coach-label:hover{color:var(--teal);text-decoration:underline}
.hero-coach-label strong{color:var(--text)}
.hero-text{font-size:1rem;color:var(--muted);line-height:1.6;max-width:400px;margin:10px auto 0}
.hero-text strong{color:var(--text)}

/* Ritnome‚Ñ¢ BPM Badge */
.ritnome-badge{display:inline-flex;align-items:center;gap:10px;background:linear-gradient(135deg,rgba(255,23,68,0.15),rgba(255,215,0,0.15));border:2px solid rgba(255,215,0,0.4);border-radius:30px;padding:10px 20px;margin-top:15px}
.ritnome-badge-logo{font-family:'Bebas Neue',sans-serif;font-size:1.1rem;letter-spacing:2px;background:linear-gradient(135deg,var(--red),var(--gold));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.ritnome-badge-bpm{display:flex;gap:6px}
.bpm-chip{font-family:'Bebas Neue',sans-serif;font-size:0.75rem;padding:3px 10px;border-radius:12px;background:rgba(255,215,0,0.2);color:var(--gold);letter-spacing:1px}

/* Courts */
.courts{padding:30px 20px;max-width:600px;margin:0 auto}
.section-title{font-family:'Bebas Neue',sans-serif;font-size:1.5rem;letter-spacing:3px;text-align:center;margin-bottom:20px;color:var(--gold)}
.court-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:15px}
@media(max-width:500px){.court-grid{grid-template-columns:1fr}}
.court-card{background:var(--card);border:2px solid rgba(107,33,168,0.3);border-radius:16px;padding:25px 15px;text-align:center;transition:all 0.3s}
.court-card:hover{border-color:var(--gold);transform:translateY(-3px)}
.court-emoji{font-size:3rem;margin-bottom:10px}
.court-name{font-family:'Bebas Neue',sans-serif;font-size:1.3rem;letter-spacing:2px;color:var(--gold);margin-bottom:8px}
.court-desc{font-size:0.85rem;color:var(--muted);line-height:1.5}

/* Pricing */
.pricing{padding:30px 20px;text-align:center}
.price-box{background:linear-gradient(135deg,rgba(107,33,168,0.2),rgba(255,215,0,0.1));border:3px solid var(--gold);border-radius:20px;padding:30px 20px;max-width:350px;margin:0 auto}
.price-amount{font-family:'Bebas Neue',sans-serif;font-size:3.5rem;color:var(--gold)}
.price-amount span{font-size:1.2rem;color:var(--muted)}
.price-features{list-style:none;margin:20px 0;text-align:left;padding:0 10px}
.price-features li{padding:8px 0;font-size:0.9rem;color:var(--muted);display:flex;align-items:center;gap:10px}
.price-features li::before{content:'‚úì';color:var(--teal);font-weight:bold}
.cta-btn{display:inline-block;padding:18px 50px;font-family:'Bebas Neue',sans-serif;font-size:1.4rem;letter-spacing:3px;background:linear-gradient(135deg,var(--gold),#FFA500);color:var(--dark);border:none;border-radius:50px;cursor:pointer;text-decoration:none;box-shadow:0 8px 30px rgba(255,215,0,0.4);transition:all 0.3s;margin-top:20px}
.cta-btn:hover{transform:translateY(-3px) scale(1.02);box-shadow:0 12px 40px rgba(255,215,0,0.5)}

/* Returning User */
.returning{padding:20px;text-align:center}
.returning-link{color:var(--purple-light);font-size:0.9rem;cursor:pointer;text-decoration:underline}
.returning-link:hover{color:var(--gold)}

/* Footer */
.footer{text-align:center;padding:30px 20px;font-size:0.75rem;color:var(--muted);border-top:1px solid var(--border)}
.footer a{color:var(--gold);text-decoration:none}
.footer-legal{margin:12px 0}
.footer-brand{margin-bottom:10px}
.ritnome-tm{font-family:'Bebas Neue',sans-serif;font-size:1.8rem;letter-spacing:4px;background:linear-gradient(135deg,#FF1744,#FFD700);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;display:block}
.footer-tagline{font-size:0.65rem;letter-spacing:2px;text-transform:uppercase;color:var(--muted);display:block;margin-top:2px}
.footer-company{margin:10px 0}
.footer-copyright{font-size:0.6rem;opacity:0.6;margin-top:8px}

/* PIN Modal */
.modal{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.9);z-index:100;align-items:center;justify-content:center;padding:20px}
.modal.active{display:flex}
.modal-content{background:var(--card);border:2px solid var(--gold);border-radius:24px;padding:40px 30px;max-width:400px;width:100%;text-align:center;position:relative}
.modal-close{position:absolute;top:15px;right:20px;background:none;border:none;color:var(--muted);font-size:1.5rem;cursor:pointer}
.modal-title{font-family:'Bebas Neue',sans-serif;font-size:1.8rem;letter-spacing:2px;color:var(--gold);margin-bottom:15px}
.modal-text{color:var(--muted);font-size:0.95rem;margin-bottom:20px;line-height:1.5}
.email-input{width:100%;padding:14px 20px;background:var(--dark);border:2px solid rgba(255,255,255,0.2);border-radius:12px;font-family:'Outfit',sans-serif;font-size:1rem;color:var(--text);outline:none;margin-bottom:15px}
.email-input:focus{border-color:var(--gold)}
.modal-btn{width:100%;padding:14px;font-family:'Bebas Neue',sans-serif;font-size:1.1rem;letter-spacing:2px;background:linear-gradient(135deg,var(--gold),#FFA500);color:var(--dark);border:none;border-radius:30px;cursor:pointer;transition:all 0.3s}
.modal-btn:hover{transform:scale(1.02)}
.modal-btn:disabled{opacity:0.5;cursor:not-allowed}

/* PIN Display */
.pin-display{background:linear-gradient(135deg,rgba(107,33,168,0.2),rgba(255,215,0,0.2));border:3px solid var(--gold);border-radius:16px;padding:25px;margin:20px 0}
.pin-label{font-size:0.8rem;color:var(--muted);letter-spacing:1px;margin-bottom:8px}
.pin-value{font-family:'Bebas Neue',sans-serif;font-size:3rem;letter-spacing:12px;color:var(--gold);text-shadow:0 0 20px rgba(255,215,0,0.5)}
.pin-note{font-size:0.8rem;color:var(--teal);margin-top:10px}
.play-btn{margin-top:20px;padding:16px 40px;font-family:'Bebas Neue',sans-serif;font-size:1.2rem;letter-spacing:2px;background:linear-gradient(135deg,var(--teal),#00B894);color:var(--dark);border:none;border-radius:30px;cursor:pointer;transition:all 0.3s}
.play-btn:hover{transform:scale(1.05)}

/* PIN Input */
.pin-input-container{display:flex;gap:10px;justify-content:center;margin:20px 0}
.pin-digit{width:50px;height:60px;background:var(--dark);border:2px solid rgba(255,255,255,0.2);border-radius:10px;font-family:'Bebas Neue',sans-serif;font-size:2rem;color:var(--text);text-align:center;outline:none}
.pin-digit:focus{border-color:var(--gold)}

/* Success Animation */
.confetti-container{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1000;overflow:hidden}
.confetti{position:absolute;width:10px;height:10px;top:-10px;animation:fall 4s linear forwards}
@keyframes fall{0%{transform:translateY(0) rotate(0deg);opacity:1}100%{transform:translateY(100vh) rotate(720deg);opacity:0}}

/* Questions */
.questions{padding:10px 20px;text-align:center}
.questions-link{color:var(--teal);font-size:0.9rem;cursor:pointer}
.questions-link:hover{color:var(--gold)}

/* Chat FAB */
.chat-fab{position:fixed;bottom:25px;right:25px;width:60px;height:60px;border-radius:50%;background:linear-gradient(135deg,var(--purple),var(--purple-dark));border:3px solid var(--gold);cursor:pointer;box-shadow:0 5px 25px rgba(107,33,168,0.5);z-index:50;display:flex;align-items:center;justify-content:center;transition:all 0.3s;animation:fabPulse 2s infinite}
.chat-fab:hover{transform:scale(1.1)}
.chat-fab img{width:40px;height:40px;border-radius:50%}
@keyframes fabPulse{0%,100%{box-shadow:0 5px 25px rgba(107,33,168,0.5)}50%{box-shadow:0 5px 35px rgba(255,215,0,0.4)}}

/* Chat Modal - Full Screen Mobile, Centered Desktop */
.chat-modal{display:none;position:fixed;top:0;left:0;right:0;bottom:0;width:100%;height:100%;background:var(--card);z-index:100;flex-direction:column;overflow:hidden}
.chat-modal.active{display:flex}

/* Desktop: Centered with max dimensions */
@media(min-width:768px){
.chat-modal{top:50%;left:50%;transform:translate(-50%,-50%);width:500px;height:85vh;max-height:750px;border:2px solid var(--gold);border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,0.8)}
}

/* Chat Header */
.chat-header{padding:15px;background:linear-gradient(135deg,rgba(107,33,168,0.3),rgba(255,215,0,0.1));border-bottom:1px solid rgba(255,215,0,0.3);display:flex;align-items:center;gap:12px;flex-shrink:0}
.chat-header img{width:45px;height:45px;border-radius:50%;border:2px solid var(--gold)}
.chat-header-info{flex:1}
.chat-header-name{font-family:'Bebas Neue',sans-serif;font-size:1.2rem;letter-spacing:1px;color:var(--gold)}
.chat-header-status{font-size:0.75rem;color:var(--teal)}
.chat-header-actions{display:flex;align-items:center;gap:10px}
.chat-home-btn{background:none;border:2px solid var(--gold);color:var(--gold);padding:8px 14px;border-radius:20px;font-family:'Bebas Neue',sans-serif;font-size:0.85rem;letter-spacing:1px;cursor:pointer;transition:all 0.3s;text-decoration:none;display:flex;align-items:center;gap:5px}
.chat-home-btn:hover{background:var(--gold);color:var(--dark)}
.chat-close-btn{background:none;border:none;color:var(--muted);font-size:1.8rem;cursor:pointer;padding:5px 10px;transition:color 0.3s}
.chat-close-btn:hover{color:var(--gold)}

/* Chat Body */
.chat-body{flex:1;overflow-y:auto;padding:20px;display:flex;flex-direction:column;gap:15px}
.chat-msg{max-width:90%;padding:14px 18px;border-radius:18px;font-size:0.95rem;line-height:1.6;animation:msgIn 0.3s ease}
@keyframes msgIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.chat-msg.bot{background:var(--dark);align-self:flex-start;border-bottom-left-radius:4px;border:1px solid rgba(255,215,0,0.2)}
.chat-msg.bot strong{color:var(--gold)}
.chat-msg.bot .ritnome-highlight{color:var(--red);font-weight:700}
.chat-options{display:flex;flex-wrap:wrap;gap:10px;margin-top:12px}
.chat-option{padding:12px 18px;background:rgba(255,215,0,0.1);border:2px solid rgba(255,215,0,0.4);color:var(--gold);border-radius:25px;font-size:0.85rem;font-weight:600;cursor:pointer;transition:all 0.2s}
.chat-option:hover{background:rgba(255,215,0,0.2);transform:scale(1.02)}
.chat-option.ritnome-option{background:rgba(255,23,68,0.15);border-color:rgba(255,23,68,0.5);color:var(--red)}
.chat-option.ritnome-option:hover{background:rgba(255,23,68,0.25)}
.joke-box{margin-top:12px;padding:12px;background:rgba(255,215,0,0.1);border-left:3px solid var(--gold);border-radius:8px;font-style:italic;color:var(--gold);font-size:0.9rem}
.ritnome-box{margin-top:12px;padding:14px;background:linear-gradient(135deg,rgba(255,23,68,0.15),rgba(255,215,0,0.1));border-left:4px solid var(--red);border-radius:8px;font-size:0.9rem}
.ritnome-box .bpm-visual{display:flex;gap:8px;margin-top:10px;justify-content:center}
.ritnome-box .bpm-item{text-align:center;padding:8px 12px;background:rgba(0,0,0,0.3);border-radius:10px}
.ritnome-box .bpm-item .icon{font-size:1.2rem}
.ritnome-box .bpm-item .value{font-family:'Bebas Neue',sans-serif;font-size:1.1rem;color:var(--gold)}
.ritnome-box .bpm-item .label{font-size:0.6rem;color:var(--muted);text-transform:uppercase}

/* Mobile optimizations */
@media(max-width:767px){
.chat-body{padding:15px}
.chat-msg{max-width:95%;font-size:0.9rem;padding:12px 15px}
.chat-option{padding:10px 14px;font-size:0.8rem}
.chat-header{padding:12px 15px}
.chat-home-btn{padding:6px 12px;font-size:0.8rem}
}
</style>
</head>
<body class="en">
<div class="confetti-container" id="confetti"></div>

<!-- Language Toggle -->
<div class="lang-toggle">
<button class="lang-btn active" data-lang="en">EN</button>
<button class="lang-btn" data-lang="es">ES</button>
</div>

<!-- Header -->
<header class="header">
<div class="logo"><span class="laugh">LAUGH</span><span class="court">COURT</span><sup style="font-size:0.3em">‚Ñ¢</sup></div>
<div class="powered-by">Powered by <span class="ritnome">Ritnome‚Ñ¢</span></div>
<div class="tagline">
<span class="lang-en">RECALL. MATCH. DRILL. REFLEX. RITMO.</span>
<span class="lang-es">RECALL. MATCH. DRILL. REFLEX. RITMO.</span>
</div>
</header>

<!-- Hero -->
<section class="hero">
<img src="go_chat.png" alt="Coach GoTrotter" class="hero-icon" id="heroIcon">
<p class="hero-coach-label">
<span class="lang-en">Meet <strong>Coach GoTrotter AI</strong> ‚Äî Click to Learn!</span>
<span class="lang-es">Conoce a <strong>Coach GoTrotter AI</strong> ‚Äî ¬°Haz Clic!</span>
</p>
<p class="hero-text">
<span class="lang-en"><strong>5 Workouts. 10 Tiers.</strong> The ONLY laughter-powered cognitive fitness platform!</span>
<span class="lang-es"><strong>5 Entrenamientos. 10 Niveles.</strong> ¬°La √öNICA plataforma de fitness cognitivo impulsada por risa!</span>
</p>
<!-- Ritnome‚Ñ¢ BPM Badge -->
<div class="ritnome-badge">
<span class="ritnome-badge-logo">üéµ Ritnome‚Ñ¢</span>
<div class="ritnome-badge-bpm">
<span class="bpm-chip">60 BPM</span>
<span class="bpm-chip">90 BPM</span>
<span class="bpm-chip">120 BPM</span>
</div>
</div>
</section>

<!-- Courts -->
<section class="courts">
<h2 class="section-title">
<span class="lang-en">üí™ FIVE LAUGHCOURT WORKOUTS</span>
<span class="lang-es">üí™ CINCO ENTRENAMIENTOS LAUGHCOURT</span>
</h2>
<div class="court-grid">
<div class="court-card">
<div class="court-emoji">üß†</div>
<div class="court-name">THE RECALL</div>
<p class="court-desc">
<span class="lang-en">Watch the sequence light up ‚Üí Tap it back! Sequence memory training with laughs.</span>
<span class="lang-es">¬°Mira la secuencia iluminarse ‚Üí Rep√≠tela! Entrenamiento de memoria de secuencias con risas.</span>
</p>
</div>
<div class="court-card">
<div class="court-emoji">üéØ</div>
<div class="court-name">THE MATCH</div>
<p class="court-desc">
<span class="lang-en">Colors flash ‚Üí Find the match! Color recognition + spatial memory training.</span>
<span class="lang-es">¬°Los colores brillan ‚Üí Encuentra el par! Reconocimiento de color + memoria espacial.</span>
</p>
</div>
<div class="court-card">
<div class="court-emoji">üèÄ</div>
<div class="court-name">THE DRILL</div>
<p class="court-desc">
<span class="lang-en">Numbers flash ‚Üí Tap the sequence! Digit span memory training forward & backward.</span>
<span class="lang-es">¬°N√∫meros brillan ‚Üí Toca la secuencia! Entrenamiento de memoria num√©rica hacia adelante y atr√°s.</span>
</p>
</div>
<div class="court-card">
<div class="court-emoji">‚ö°</div>
<div class="court-name">THE REFLEX</div>
<p class="court-desc">
<span class="lang-en">Green lights up ‚Üí Tap FAST! Reaction time + eye-hand coordination training.</span>
<span class="lang-es">¬°Verde se ilumina ‚Üí Toca R√ÅPIDO! Entrenamiento de tiempo de reacci√≥n + coordinaci√≥n.</span>
</p>
</div>
<div class="court-card">
<div class="court-emoji">üéµ</div>
<div class="court-name">THE RITMO</div>
<p class="court-desc">
<span class="lang-en">Listen to the beat ‚Üí Tap it back! Rhythm + timing training for auditory processing.</span>
<span class="lang-es">¬°Escucha el ritmo ‚Üí Rep√≠telo! Entrenamiento de ritmo + tiempo para procesamiento auditivo.</span>
</p>
</div>
</div>
</section>

<!-- Pricing -->
<section class="pricing">
<div class="price-box">
<div class="price-amount">$5<span>/mo</span></div>
<ul class="price-features">
<li><span class="lang-en">5 LaughCourt workouts</span><span class="lang-es">5 entrenamientos LaughCourt</span></li>
<li><span class="lang-en">Ritnome‚Ñ¢ tempo control (60/90/120 BPM)</span><span class="lang-es">Control de tempo Ritnome‚Ñ¢ (60/90/120 BPM)</span></li>
<li><span class="lang-en">10 tiers (3 circuits each to level up)</span><span class="lang-es">10 niveles (3 circuitos cada uno para subir)</span></li>
<li><span class="lang-en">Bilingual (EN/ES)</span><span class="lang-es">Biling√ºe (EN/ES)</span></li>
<li><span class="lang-en">Cancel anytime</span><span class="lang-es">Cancela cuando quieras</span></li>
</ul>
<a href="https://buy.stripe.com/9B6bJ2c9i1qy0Qrbqh00005" class="cta-btn">
<span class="lang-en">SUBSCRIBE NOW üòÇ</span>
<span class="lang-es">¬°SUSCR√çBETE! üòÇ</span>
</a>
</div>
</section>

<!-- Returning User -->
<section class="returning">
<span class="returning-link" id="returningBtn">
<span class="lang-en">üîë Already subscribed? Enter your PIN</span>
<span class="lang-es">üîë ¬øYa suscrito? Ingresa tu PIN</span>
</span>
</section>

<!-- Questions Link -->
<section class="questions">
<span class="questions-link" id="questionsBtn">
<span class="lang-en">‚ùì Questions? Chat with Coach GoTrotter AI</span>
<span class="lang-es">‚ùì ¬øPreguntas? Habla con Coach GoTrotter AI</span>
</span>
</section>

<!-- Footer -->
<footer class="footer">
<div class="footer-brand">
<span class="ritnome-tm">Ritnome‚Ñ¢</span>
<span class="footer-tagline">Rhythm-Based Cognitive Training</span>
</div>
<div class="footer-company">
<span class="lang-en">by</span>
<span class="lang-es">por</span>
<a href="https://gostar.digital"> GoStar Digital LLC</a> üáµüá∑
</div>
<div class="footer-legal">
<a href="privacy.html">Privacy Policy</a> ¬∑ <a href="terms.html">Terms of Use</a>
</div>
<div class="footer-copyright">¬© 2025 GoStar Digital LLC. All rights reserved.</div>
</footer>

<!-- Chat FAB -->
<button class="chat-fab" id="chatFab">
<img src="go_chat.png" alt="Coach">
</button>

<!-- Success Modal (after Stripe payment) -->
<div class="modal" id="successModal">
<div class="modal-content">
<button class="modal-close" id="closeSuccess">√ó</button>
<div class="modal-title">üéâ <span class="lang-en">PAYMENT SUCCESSFUL!</span><span class="lang-es">¬°PAGO EXITOSO!</span></div>
<p class="modal-text">
<span class="lang-en">Enter the email you used at checkout to get your PIN:</span>
<span class="lang-es">Ingresa el email que usaste para obtener tu PIN:</span>
</p>
<input type="email" class="email-input" id="successEmail" placeholder="your@email.com">
<button class="modal-btn" id="successBtn">
<span class="lang-en">GET MY PIN</span>
<span class="lang-es">OBTENER MI PIN</span>
</button>
<div id="pinResult"></div>
</div>
</div>

<!-- Returning User Modal -->
<div class="modal" id="returningModal">
<div class="modal-content">
<button class="modal-close" id="closeReturning">√ó</button>
<div class="modal-title">üîë <span class="lang-en">WELCOME BACK!</span><span class="lang-es">¬°BIENVENIDO!</span></div>
<p class="modal-text">
<span class="lang-en">Enter your 4-digit PIN:</span>
<span class="lang-es">Ingresa tu PIN de 4 d√≠gitos:</span>
</p>
<div class="pin-input-container">
<input type="tel" class="pin-digit" maxlength="1" data-idx="0">
<input type="tel" class="pin-digit" maxlength="1" data-idx="1">
<input type="tel" class="pin-digit" maxlength="1" data-idx="2">
<input type="tel" class="pin-digit" maxlength="1" data-idx="3">
</div>
<button class="modal-btn" id="pinLoginBtn" disabled>
<span class="lang-en">LET'S LAUGH!</span>
<span class="lang-es">¬°A RE√çR!</span>
</button>
<p style="margin-top:15px">
<span class="returning-link" id="forgotPinBtn">
<span class="lang-en">Forgot PIN? Use email</span>
<span class="lang-es">¬øOlvidaste tu PIN? Usa email</span>
</span>
</p>
<div id="loginResult"></div>
</div>
</div>

<!-- Forgot PIN Modal -->
<div class="modal" id="forgotModal">
<div class="modal-content">
<button class="modal-close" id="closeForgot">√ó</button>
<div class="modal-title">üìß <span class="lang-en">RECOVER PIN</span><span class="lang-es">RECUPERAR PIN</span></div>
<p class="modal-text">
<span class="lang-en">Enter your subscription email:</span>
<span class="lang-es">Ingresa tu email de suscripci√≥n:</span>
</p>
<input type="email" class="email-input" id="forgotEmail" placeholder="your@email.com">
<button class="modal-btn" id="forgotBtn">
<span class="lang-en">RECOVER PIN</span>
<span class="lang-es">RECUPERAR PIN</span>
</button>
<div id="forgotResult"></div>
</div>
</div>

<!-- Chat Modal - Full Screen -->
<div class="chat-modal" id="chatModal">
<div class="chat-header">
<img src="go_chat.png" alt="Coach">
<div class="chat-header-info">
<div class="chat-header-name">GOTROTTER‚Ñ¢ AI</div>
<div class="chat-header-status">üü¢ <span class="lang-en">Ritnome‚Ñ¢ Expert Ready!</span><span class="lang-es">¬°Experto en Ritnome‚Ñ¢ Listo!</span></div>
</div>
<div class="chat-header-actions">
<a href="index.html" class="chat-home-btn">
<span class="lang-en">üè† HOME</span>
<span class="lang-es">üè† INICIO</span>
</a>
<button class="chat-close-btn" id="chatClose">√ó</button>
</div>
</div>
<div class="chat-body" id="chatBody"></div>
</div>

<script>
(function(){
// Language
var lang = localStorage.getItem('lc-lang') || 'en';
function setLang(l) {
    lang = l;
    localStorage.setItem('lc-lang', l);
    document.body.className = l;
    document.querySelectorAll('.lang-btn').forEach(function(b) {
        b.classList.toggle('active', b.dataset.lang === l);
    });
}
setLang(lang);
document.querySelectorAll('.lang-btn').forEach(function(b) {
    b.addEventListener('click', function() { setLang(this.dataset.lang); });
});

// Modals
var successModal = document.getElementById('successModal');
var returningModal = document.getElementById('returningModal');
var forgotModal = document.getElementById('forgotModal');

document.getElementById('returningBtn').onclick = function() { returningModal.classList.add('active'); };
document.getElementById('closeSuccess').onclick = function() { successModal.classList.remove('active'); };
document.getElementById('closeReturning').onclick = function() { returningModal.classList.remove('active'); };
document.getElementById('closeForgot').onclick = function() { forgotModal.classList.remove('active'); };
document.getElementById('forgotPinBtn').onclick = function() { 
    returningModal.classList.remove('active'); 
    forgotModal.classList.add('active'); 
};

// Check URL for success (after Stripe payment)
if (window.location.search.includes('success')) {
    window.history.replaceState({}, '', window.location.pathname);
    successModal.classList.add('active');
    createConfetti();
}

// Check URL for upgrade (from locked BPM in workouts) - NEW!
if (window.location.search.includes('upgrade=true')) {
    window.history.replaceState({}, '', window.location.pathname);
    // Redirect to Stripe checkout
    window.location.href = 'https://buy.stripe.com/9B6bJ2c9i1qy0Qrbqh00005';
}

// PIN Input handling
var pinDigits = document.querySelectorAll('.pin-digit');
var pinLoginBtn = document.getElementById('pinLoginBtn');
pinDigits.forEach(function(d, i) {
    d.addEventListener('input', function() {
        this.value = this.value.replace(/[^0-9]/g, '');
        if (this.value && i < 3) pinDigits[i + 1].focus();
        checkPinReady();
    });
    d.addEventListener('keydown', function(e) {
        if (e.key === 'Backspace' && !this.value && i > 0) pinDigits[i - 1].focus();
    });
});

function checkPinReady() {
    var pin = '';
    pinDigits.forEach(function(d) { pin += d.value; });
    pinLoginBtn.disabled = pin.length !== 4;
}

// Get PIN by email (after payment)
document.getElementById('successBtn').onclick = function() {
    var email = document.getElementById('successEmail').value.trim().toLowerCase();
    if (!email || !email.includes('@')) { alert('Please enter valid email'); return; }
    this.disabled = true;
    this.textContent = 'Loading...';
    fetch('/api/stripe/status/' + encodeURIComponent(email))
        .then(function(r) { return r.json(); })
        .then(function(d) {
            if (d.subscribed && d.pin) {
                showPinSuccess(d.pin, 'pinResult');
            } else {
                document.getElementById('pinResult').innerHTML = '<p style="color:#FF4757;margin-top:15px">No subscription found. Try again.</p>';
            }
            document.getElementById('successBtn').disabled = false;
            document.getElementById('successBtn').innerHTML = '<span class="lang-en">GET MY PIN</span><span class="lang-es">OBTENER MI PIN</span>';
        })
        .catch(function() {
            document.getElementById('pinResult').innerHTML = '<p style="color:#FF4757;margin-top:15px">Connection error.</p>';
            document.getElementById('successBtn').disabled = false;
        });
};

// Login with PIN - Creates session token for single-device enforcement
pinLoginBtn.onclick = function() {
    var pin = '';
    pinDigits.forEach(function(d) { pin += d.value; });
    this.disabled = true;
    this.textContent = 'Loading...';
    
    // First validate PIN
    fetch('/api/subscriber/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ pin: pin })
    })
    .then(function(r) { return r.json(); })
    .then(function(d) {
        if (d.success) {
            // PIN valid - now create session token
            return fetch('/api/session/create', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ pin: pin })
            })
            .then(function(r) { return r.json(); })
            .then(function(sess) {
                if (sess.success) {
                    // Session created - store PIN + token
                    localStorage.setItem('lc-user', JSON.stringify({ 
                        email: d.email, 
                        pin: pin,
                        sessionToken: sess.token,
                        maxConcurrent: sess.maxConcurrent
                    }));
                    sessionStorage.setItem('lc-pin', pin);
                    sessionStorage.setItem('lc-token', sess.token);
                    createConfetti();
                    setTimeout(function() { window.location.href = 'laugh-hub.html'; }, 1000);
                } else if (sess.error === 'limit_reached') {
                    // All seats in use (facility/multi-user plan)
                    document.getElementById('loginResult').innerHTML = 
                        '<p style="color:#FF4757;margin-top:15px">' +
                        '<span class="lang-en">All ' + sess.max + ' seats are in use. Try again later.</span>' +
                        '<span class="lang-es">Los ' + sess.max + ' asientos est√°n en uso. Intenta m√°s tarde.</span>' +
                        '</p>';
                    pinLoginBtn.disabled = false;
                    pinLoginBtn.innerHTML = '<span class="lang-en">LET\'S LAUGH!</span><span class="lang-es">¬°A RE√çR!</span>';
                } else {
                    document.getElementById('loginResult').innerHTML = '<p style="color:#FF4757;margin-top:15px">' + (sess.error || 'Session error') + '</p>';
                    pinLoginBtn.disabled = false;
                    pinLoginBtn.innerHTML = '<span class="lang-en">LET\'S LAUGH!</span><span class="lang-es">¬°A RE√çR!</span>';
                }
            });
        } else {
            document.getElementById('loginResult').innerHTML = '<p style="color:#FF4757;margin-top:15px">Invalid PIN.</p>';
            pinLoginBtn.disabled = false;
            pinLoginBtn.innerHTML = '<span class="lang-en">LET\'S LAUGH!</span><span class="lang-es">¬°A RE√çR!</span>';
        }
    })
    .catch(function() {
        document.getElementById('loginResult').innerHTML = '<p style="color:#FF4757;margin-top:15px">Connection error.</p>';
        pinLoginBtn.disabled = false;
    });
};

// Forgot PIN
document.getElementById('forgotBtn').onclick = function() {
    var email = document.getElementById('forgotEmail').value.trim().toLowerCase();
    if (!email || !email.includes('@')) { alert('Please enter valid email'); return; }
    this.disabled = true;
    this.textContent = 'Loading...';
    fetch('/api/stripe/status/' + encodeURIComponent(email))
        .then(function(r) { return r.json(); })
        .then(function(d) {
            if (d.subscribed && d.pin) {
                showPinSuccess(d.pin, 'forgotResult');
            } else {
                document.getElementById('forgotResult').innerHTML = '<p style="color:#FF4757;margin-top:15px">No subscription found.</p>';
            }
            document.getElementById('forgotBtn').disabled = false;
            document.getElementById('forgotBtn').innerHTML = '<span class="lang-en">RECOVER PIN</span><span class="lang-es">RECUPERAR PIN</span>';
        })
        .catch(function() {
            document.getElementById('forgotResult').innerHTML = '<p style="color:#FF4757;margin-top:15px">Connection error.</p>';
            document.getElementById('forgotBtn').disabled = false;
        });
};

function showPinSuccess(pin, targetId) {
    createConfetti();
    document.getElementById(targetId).innerHTML = 
        '<div class="pin-display">' +
        '<div class="pin-label">YOUR LAUGH PIN</div>' +
        '<div class="pin-value">' + pin + '</div>' +
        '<div class="pin-note">üìù Save this PIN!</div>' +
        '</div>' +
        '<button class="play-btn" onclick="goPlay(\'' + pin + '\')">üòÇ LET\'S PLAY!</button>';
}

// goPlay - also creates session token
window.goPlay = function(pin) {
    // Create session before navigating
    fetch('/api/session/create', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ pin: pin })
    })
    .then(function(r) { return r.json(); })
    .then(function(sess) {
        if (sess.success) {
            localStorage.setItem('lc-user', JSON.stringify({ 
                pin: pin,
                sessionToken: sess.token,
                maxConcurrent: sess.maxConcurrent
            }));
            sessionStorage.setItem('lc-pin', pin);
            sessionStorage.setItem('lc-token', sess.token);
            window.location.href = 'laugh-hub.html';
        } else if (sess.error === 'limit_reached') {
            alert('All ' + sess.max + ' seats are in use. Try again later.');
        } else {
            alert(sess.error || 'Session error');
        }
    })
    .catch(function() {
        alert('Connection error');
    });
};

function createConfetti() {
    var container = document.getElementById('confetti');
    var colors = ['#FFD700', '#6B21A8', '#00D9A5', '#FF1744', '#FF6B00'];
    for (var i = 0; i < 80; i++) {
        setTimeout(function() {
            var c = document.createElement('div');
            c.className = 'confetti';
            c.style.left = Math.random() * 100 + 'vw';
            c.style.background = colors[Math.floor(Math.random() * colors.length)];
            c.style.animationDuration = (Math.random() * 2 + 3) + 's';
            c.style.width = c.style.height = (Math.random() * 8 + 5) + 'px';
            c.style.borderRadius = Math.random() > 0.5 ? '50%' : '2px';
            container.appendChild(c);
            setTimeout(function() { c.remove(); }, 5000);
        }, i * 30);
    }
}

// ===== GOTROTTER AI CHAT (truncated for file size - full chat code follows) =====
var chatModal = document.getElementById('chatModal');
var chatBody = document.getElementById('chatBody');
var chatFab = document.getElementById('chatFab');

var jokes = [
    {en:"Why did the brain go to the gym? To work on its THINK-ing muscles! üí™üß†",es:"¬øPor qu√© el cerebro fue al gimnasio? ¬°Para trabajar sus m√∫sculos de PENSAR! üí™üß†"},
    {en:"I told my memory a joke... it forgot to laugh! üòÇ",es:"¬°Le cont√© un chiste a mi memoria... se le olvid√≥ re√≠r! üòÇ"},
    {en:"My neurons are having a party... want to join? üéâüß†",es:"Mis neuronas est√°n de fiesta... ¬øquieres unirte? üéâüß†"},
    {en:"Warning: My jokes may cause uncontrollable smiling! üòÑ",es:"Advertencia: ¬°Mis chistes pueden causar sonrisas incontrolables! üòÑ"},
    {en:"Your brain cells are doing a happy dance right now! üíÉüß†",es:"¬°Tus c√©lulas cerebrales est√°n bailando de alegr√≠a! üíÉüß†"}
];

function getJoke() {
    var j = jokes[Math.floor(Math.random() * jokes.length)];
    return lang === 'es' ? j.es : j.en;
}

function bi(en, es) {
    return '<span class="lang-en">' + en + '</span><span class="lang-es">' + es + '</span>';
}

function addBotMsg(text, options) {
    var msg = document.createElement('div');
    msg.className = 'chat-msg bot';
    var html = text;
    if (options && options.length) {
        html += '<div class="chat-options">';
        options.forEach(function(o) {
            var optClass = o.ritnome ? 'chat-option ritnome-option' : 'chat-option';
            html += '<button class="' + optClass + '" data-action="' + o.action + '">' + bi(o.en, o.es) + '</button>';
        });
        html += '</div>';
    }
    msg.innerHTML = html;
    chatBody.appendChild(msg);
    chatBody.scrollTop = chatBody.scrollHeight;
    msg.querySelectorAll('.chat-option').forEach(function(b) {
        b.addEventListener('click', function() { handleFaq(this.dataset.action); });
    });
}

function addJoke(text) {
    return text + '<div class="joke-box">üòÇ ' + getJoke() + '</div>';
}

var mainMenu = [
    {en:'üéµ RITNOME‚Ñ¢ ‚Äî Our Secret Weapon', es:'üéµ RITNOME‚Ñ¢ ‚Äî Nuestra Arma Secreta', action:'ritnome_intro', ritnome:true},
    {en:'üß† Laughter Science', es:'üß† Ciencia de la Risa', action:'science'},
    {en:'üí™ Brain Benefits', es:'üí™ Beneficios Cerebrales', action:'brain'},
    {en:'üí∞ Pricing', es:'üí∞ Precio', action:'price'}
];

function openChat() {
    chatModal.classList.add('active');
    if (chatBody.children.length === 0) {
        addBotMsg(addJoke(bi(
            "Hey! üòÇ I'm <strong>Coach GoTrotter AI</strong>!<br><br>Ask me about LaughCourt, Ritnome‚Ñ¢, or anything else!",
            "¬°Hola! üòÇ Soy <strong>Coach GoTrotter AI</strong>!<br><br>¬°Preg√∫ntame sobre LaughCourt, Ritnome‚Ñ¢, o cualquier otra cosa!"
        )), mainMenu);
    }
}

function handleFaq(action) {
    document.querySelectorAll('.chat-option').forEach(function(b) { b.style.opacity = '0.5'; b.style.pointerEvents = 'none'; });
    var responses = {
        ritnome_intro: { en: "üéµ <strong>RITNOME‚Ñ¢</strong> = Rhythm + Metronome!<br><br>Our proprietary rhythm-based cognitive training technology powers every LaughCourt workout at 60/90/120 BPM!", es: "üéµ <strong>RITNOME‚Ñ¢</strong> = Ritmo + Metr√≥nomo!<br><br>¬°Nuestra tecnolog√≠a de entrenamiento cognitivo basado en ritmo impulsa cada entrenamiento a 60/90/120 BPM!", options: mainMenu },
        science: { en: "üß† Laughter releases dopamine, reduces cortisol, and enhances memory retention by 40%!", es: "üß† ¬°La risa libera dopamina, reduce cortisol y mejora la retenci√≥n de memoria en un 40%!", options: mainMenu },
        brain: { en: "üí™ LaughCourt trains: sequence memory, spatial memory, digit span, reaction time, and rhythm timing!", es: "üí™ ¬°LaughCourt entrena: memoria de secuencia, memoria espacial, d√≠gitos, tiempo de reacci√≥n y ritmo!", options: mainMenu },
        price: { en: "üí∞ Just <strong>$5/month</strong>! 5 workouts, Ritnome‚Ñ¢ tempo control, 10 tiers, bilingual support. Cancel anytime!", es: "üí∞ ¬°Solo <strong>$5/mes</strong>! 5 entrenamientos, control de tempo Ritnome‚Ñ¢, 10 niveles, soporte biling√ºe. ¬°Cancela cuando quieras!", options: mainMenu },
        menu: { en: "What else would you like to learn? üòä", es: "¬øQu√© m√°s te gustar√≠a aprender? üòä", options: mainMenu }
    };
    setTimeout(function() {
        var r = responses[action] || responses.menu;
        addBotMsg(addJoke(bi(r.en, r.es)), r.options || mainMenu);
    }, 500);
}

chatFab.onclick = openChat;
document.getElementById('questionsBtn').onclick = openChat;
document.getElementById('chatClose').onclick = function() { chatModal.classList.remove('active'); };
document.getElementById('heroIcon').onclick = openChat;
document.querySelector('.hero-coach-label').onclick = openChat;
})();
</script>
</body>
</html>
