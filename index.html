<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="description" content="Hey Bori ‚Äî Tu Compa√±era Boricua. Compa√±√≠a, bienestar y cuidado para familias en Puerto Rico. Nunca m√°s sola. üáµüá∑">
  <title>Hey Bori ‚Äî Tu Compa√±era Boricua üáµüá∑</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400&family=Nunito:wght@400;500;600;700;800&family=Lora:ital,wght@0,400;0,500;1,400&display=swap" rel="stylesheet">
  <style>
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    :root{--body:'Nunito',sans-serif;--head:'Cormorant Garamond',serif;--accent:'Lora',serif;--text:#111827;--muted:#374151;--light:#5A6172;--card:#FFFFFF;--green:#2E7D52;--red:#B83D20;--purple:#5B4D8F;--gold:#8A6C2C;--gold-light:#B08A38;--blue:#2A5F95;--teal:#2A7E6E;--orange:#A45E35;--storm:#0F1729;--storm-accent:#3B82C4;--storm-warn:#D49520;--storm-danger:#D04040;--storm-safe:#2D8E5C;--shadow:0 3px 24px rgba(17,24,39,.14);--radius:18px;--border:1.5px solid rgba(17,24,39,.1)}
    body{min-height:100vh;background:linear-gradient(160deg,#C8BDAB 0%,#BBB09E 40%,#B0A594 100%);font-family:var(--body);color:var(--text);-webkit-font-smoothing:antialiased;letter-spacing:.01em}
    button,[role="button"]{min-height:48px;min-width:48px;cursor:pointer}
    .wrap{max-width:520px;margin:0 auto;padding:20px 16px 120px}
    .fi{opacity:0;transform:translateY(12px);animation:fu .5s ease forwards}
    .d1{animation-delay:.1s}.d2{animation-delay:.2s}.d3{animation-delay:.3s}
    .d4{animation-delay:.4s}.d5{animation-delay:.5s}.d6{animation-delay:.6s}
    .d7{animation-delay:.7s}.d8{animation-delay:.8s}.d9{animation-delay:.9s}.d10{animation-delay:1s}
    @keyframes fu{to{opacity:1;transform:translateY(0)}}
    @keyframes fadeIn{from{opacity:0}to{opacity:1}}
    @keyframes slideUp{from{transform:translateY(100%)}to{transform:translateY(0)}}
    @keyframes pop{0%{transform:scale(.9)}50%{transform:scale(1.05)}100%{transform:scale(1)}}
    @keyframes checkPop{0%{transform:scale(1)}50%{transform:scale(1.25)}100%{transform:scale(1)}}
    @keyframes shimmer{0%{background-position:-200% center}100%{background-position:200% center}}
    @keyframes glowPulse{0%,100%{opacity:.35;transform:scale(1)}50%{opacity:.65;transform:scale(1.08)}}
    @keyframes floatOrb{0%,100%{transform:translate(0,0)}33%{transform:translate(12px,-10px)}66%{transform:translate(-6px,6px)}}
    @keyframes lineGrow{from{width:0}to{width:60px}}
    @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.08)}}
    @keyframes blink{0%,100%{opacity:1}50%{opacity:.4}}
    @keyframes radarSweep{0%{transform:scale(.6);opacity:.8}100%{transform:scale(2.2);opacity:0}}
    @keyframes stormPulse{0%,100%{box-shadow:0 0 30px rgba(59,130,196,.15)}50%{box-shadow:0 0 60px rgba(59,130,196,.3)}}
    @keyframes safeGlow{0%,100%{box-shadow:0 8px 40px rgba(56,184,124,.3)}50%{box-shadow:0 8px 60px rgba(56,184,124,.5)}}
    @keyframes breathe{0%,100%{transform:scale(1)}50%{transform:scale(1.03)}}
    @keyframes countdownPulse{0%,100%{color:var(--storm-danger)}50%{color:var(--storm-warn)}}
    @keyframes slideIn{from{opacity:0;transform:translateX(-20px)}to{opacity:1;transform:translateX(0)}}

    /* ‚ïê‚ïê‚ïê BRAND ‚ïê‚ïê‚ïê */
    .brand{text-align:center;padding:40px 24px 32px;position:relative;overflow:hidden;background:linear-gradient(160deg,#111827 0%,#1A2035 40%,#1E2540 100%);border-radius:var(--radius);margin-bottom:16px;box-shadow:0 8px 40px rgba(17,24,39,.35);border:1.5px solid rgba(138,108,44,.15)}
    .brand::before{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:320px;height:320px;border-radius:50%;background:radial-gradient(circle,rgba(138,108,44,.2) 0%,rgba(138,108,44,.05) 40%,transparent 65%);animation:glowPulse 4s ease-in-out infinite;pointer-events:none}
    .brand::after{content:'';position:absolute;top:10%;right:8%;width:120px;height:120px;border-radius:50%;background:radial-gradient(circle,rgba(176,138,56,.08) 0%,transparent 70%);animation:floatOrb 8s ease-in-out infinite;pointer-events:none}
    .brand-sym{margin-bottom:14px;display:block;animation:breathe 4s ease-in-out infinite}
    .brand-title{font-family:var(--head);line-height:1.05;display:inline-block}
    .brand-title .ak{display:block;font-weight:700;font-size:52px;letter-spacing:8px;background:linear-gradient(135deg,#C4A258 0%,#E8C868 25%,#F0D878 50%,#E8C868 75%,#C4A258 100%);background-size:200% auto;-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;animation:shimmer 4s linear infinite;filter:drop-shadow(0 2px 8px rgba(176,138,56,.3))}
    .brand-title .wk{display:block;font-weight:500;font-size:22px;letter-spacing:16px;color:rgba(196,162,88,.7);text-transform:uppercase;margin-top:5px;padding-left:6px}
    .brand-line{width:80px;height:2px;background:linear-gradient(90deg,transparent,rgba(196,162,88,.6),transparent);margin:16px auto 12px;border:none;animation:lineGrow 1s ease forwards}
    .brand-tag{font-family:var(--body);font-size:11px;font-weight:800;color:rgba(255,255,255,.6);letter-spacing:3px;text-transform:uppercase;text-align:center;white-space:nowrap}
    .brand-accent-line{position:absolute;bottom:0;left:0;right:0;height:3px;background:linear-gradient(90deg,transparent 5%,rgba(196,162,88,.4) 30%,rgba(196,162,88,.6) 50%,rgba(196,162,88,.4) 70%,transparent 95%)}

    /* ‚ïê‚ïê‚ïê VIEW TOGGLE (3 tabs) ‚ïê‚ïê‚ïê */
    .view-toggle{display:flex;gap:5px;background:rgba(17,24,39,.08);border:1.5px solid rgba(17,24,39,.1);border-radius:14px;padding:5px;margin:0 0 16px;position:sticky;top:0;z-index:50;backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px)}
    .view-btn{flex:1;padding:13px 0;border:none;background:transparent;font-family:var(--body);font-size:14px;font-weight:700;color:var(--light);border-radius:10px;transition:all .25s;text-align:center}
    .view-btn.act{background:var(--text);color:white;box-shadow:0 3px 14px rgba(17,24,39,.25)}
    .view-btn.fam-active{background:var(--purple);color:white;box-shadow:0 3px 14px rgba(91,77,143,.3)}
    .view-btn.esc-active{background:var(--storm);color:white;box-shadow:0 3px 14px rgba(59,130,196,.3)}
    .view-btn.rit-active{background:linear-gradient(135deg,#6B21A8,#9333EA);color:white;box-shadow:0 3px 14px rgba(147,51,234,.35)}
    .view-btn.sopa-active{background:linear-gradient(135deg,#2D5A3D,#2E7D52);color:white;box-shadow:0 3px 14px rgba(46,125,82,.35)}
    .view-btn.domino-active{background:linear-gradient(135deg,#8A6C2C,#C4A258);color:white;box-shadow:0 3px 14px rgba(138,108,44,.35)}
    .view-btn.fam-active{background:linear-gradient(135deg,#7C3AED,#9333EA);color:white;box-shadow:0 3px 14px rgba(124,58,237,.35)}

    /* ‚ïê‚ïê‚ïê FAMILIA DASHBOARD ‚ïê‚ïê‚ïê */
    .fam-hero{background:linear-gradient(160deg,#2D1854 0%,#4C1D95 40%,#2D1854 100%);border-radius:var(--radius);padding:24px 16px;margin-bottom:12px;text-align:center;border:1.5px solid rgba(124,58,237,.2);box-shadow:0 8px 40px rgba(124,58,237,.2)}
    .fam-badge{display:inline-flex;align-items:center;gap:6px;background:rgba(124,58,237,.2);border:1px solid rgba(124,58,237,.3);border-radius:100px;padding:4px 12px;font-size:11px;font-weight:800;color:#C4B5FD;letter-spacing:1.5px;text-transform:uppercase;margin-bottom:6px}
    .fam-title{font-family:var(--head);font-size:26px;font-weight:700;color:white;margin-bottom:4px}
    .fam-sub{font-size:14px;color:rgba(255,255,255,.6);font-weight:600}
    .fam-card{background:var(--card);border-radius:var(--radius);padding:20px 16px;margin-bottom:12px;box-shadow:var(--shadow);border:var(--border)}
    .fam-card-title{font-family:var(--head);font-size:17px;font-weight:700;color:var(--text);margin-bottom:12px;text-align:center}
    .fam-setup-label{font-size:14px;font-weight:600;color:var(--text);margin-bottom:6px}
    .fam-setup-desc{font-size:12px;color:rgba(17,24,39,.5);margin-bottom:12px}
    .fam-input{width:100%;padding:14px;border:2px solid rgba(17,24,39,.1);border-radius:12px;font-family:var(--body);font-size:16px;color:var(--text);background:#F8F6F2;outline:none;box-sizing:border-box;margin-bottom:10px}
    .fam-input:focus{border-color:#7C3AED}
    .fam-btn{width:100%;padding:14px;border:none;border-radius:12px;font-family:var(--body);font-size:16px;font-weight:700;cursor:pointer;transition:all .3s;touch-action:manipulation}
    .fam-btn-primary{background:linear-gradient(135deg,#7C3AED,#9333EA);color:white;box-shadow:0 4px 16px rgba(124,58,237,.3)}
    .fam-btn-primary:active{transform:scale(.97)}
    .fam-msg{text-align:center;font-size:14px;font-weight:600;margin-top:8px;min-height:20px}
    .fam-msg-ok{color:#2E7D52}.fam-msg-err{color:#E53E3E}
    .fam-dash{display:none}
    .fam-dash.active{display:block}
    .fam-status{text-align:center;padding:16px;margin-bottom:12px;border-radius:var(--radius);font-size:18px;font-weight:700}
    .fam-status-active{background:rgba(46,125,82,.1);color:#2E7D52;border:2px solid rgba(46,125,82,.2)}
    .fam-status-inactive{background:rgba(229,62,62,.08);color:#E53E3E;border:2px solid rgba(229,62,62,.15)}
    .fam-today-stats{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px;margin-bottom:16px}
    .fam-today-stat{background:#F8F6F2;border-radius:14px;padding:14px 10px;text-align:center;border:1.5px solid rgba(17,24,39,.06)}
    .fam-today-stat-icon{font-size:24px;margin-bottom:4px}
    .fam-today-stat-val{font-family:var(--head);font-size:24px;font-weight:700;color:var(--text)}
    .fam-today-stat-label{font-size:10px;font-weight:700;color:rgba(17,24,39,.4);text-transform:uppercase;letter-spacing:.5px}
    .fam-week{display:flex;gap:6px;justify-content:center;margin:12px 0}
    .fam-week-day{width:36px;height:44px;border-radius:10px;display:flex;flex-direction:column;align-items:center;justify-content:center;font-size:10px;font-weight:700}
    .fam-week-day.active{background:rgba(46,125,82,.15);color:#2E7D52;border:1.5px solid rgba(46,125,82,.2)}
    .fam-week-day.inactive{background:#F5F0E8;color:rgba(17,24,39,.3);border:1.5px solid rgba(17,24,39,.06)}
    .fam-week-dot{width:8px;height:8px;border-radius:50%;margin-top:3px}
    .fam-week-dot.on{background:#2E7D52}.fam-week-dot.off{background:rgba(17,24,39,.15)}
    .fam-totals{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:12px}
    .fam-total{background:#F8F6F2;border-radius:12px;padding:12px;text-align:center;border:1.5px solid rgba(17,24,39,.06)}
    .fam-total-val{font-family:var(--head);font-size:20px;font-weight:700;color:var(--text)}
    .fam-total-label{font-size:10px;font-weight:700;color:rgba(17,24,39,.4);text-transform:uppercase}
    .fam-badges-list{display:flex;flex-wrap:wrap;gap:6px;justify-content:center;margin-top:8px}
    .fam-badge-earned{display:inline-flex;align-items:center;gap:4px;padding:5px 10px;border-radius:100px;font-size:11px;font-weight:700;background:rgba(124,58,237,.1);color:#7C3AED;border:1px solid rgba(124,58,237,.15)}
    .fam-back-btn{background:none;border:none;font-size:14px;font-weight:700;color:#7C3AED;cursor:pointer;padding:8px 0;font-family:var(--body)}

    /* ‚ïê‚ïê‚ïê DOMIN√ì MATH ‚ïê‚ïê‚ïê */
    .dom-hero{background:linear-gradient(160deg,#2C1810 0%,#4A2C17 40%,#2C1810 100%);border-radius:var(--radius);padding:20px 16px;margin-bottom:12px;text-align:center;border:1.5px solid rgba(138,108,44,.2);box-shadow:0 8px 40px rgba(138,108,44,.2)}
    .dom-badge{display:inline-flex;align-items:center;gap:6px;background:rgba(138,108,44,.2);border:1px solid rgba(138,108,44,.3);border-radius:100px;padding:4px 12px;font-size:11px;font-weight:800;color:#C4A258;letter-spacing:1.5px;text-transform:uppercase;margin-bottom:6px}
    .dom-title{font-family:var(--head);font-size:26px;font-weight:700;color:white;margin-bottom:2px}
    .dom-sub{font-size:13px;color:rgba(255,255,255,.6);font-weight:600}
    .dom-stats{display:flex;justify-content:center;gap:20px;margin-top:12px}
    .dom-stat-val{font-family:var(--head);font-size:22px;font-weight:700;color:white}
    .dom-stat-label{font-size:10px;color:rgba(255,255,255,.5);font-weight:700;text-transform:uppercase;letter-spacing:1px}
    .dom-game{background:var(--card);border-radius:var(--radius);padding:20px 16px;margin-bottom:12px;box-shadow:var(--shadow);border:var(--border);display:none}
    .dom-game.active{display:block}
    .dom-levels{background:var(--card);border-radius:var(--radius);padding:16px;margin-bottom:12px;box-shadow:var(--shadow);border:var(--border);display:flex;flex-direction:column;gap:10px}
    .dom-levels.hidden{display:none}
    .dom-levels-title{font-family:var(--head);font-size:16px;font-weight:700;color:var(--text);text-align:center;margin-bottom:4px}
    .dom-lvl-btn{display:flex;align-items:center;gap:12px;padding:14px 16px;border:2px solid rgba(44,24,16,.1);border-radius:14px;background:#FEFCF7;font-family:var(--body);cursor:pointer;transition:all .2s;touch-action:manipulation;text-align:left}
    .dom-lvl-btn:active{transform:scale(.97)}
    .dom-lvl-btn.dom-lvl-active{border-color:#8A6C2C;background:rgba(138,108,44,.08)}
    .dom-lvl-icon{font-size:24px;flex-shrink:0}
    .dom-lvl-name{font-size:16px;font-weight:700;color:#2C1810}
    .dom-lvl-desc{font-size:12px;color:rgba(44,24,16,.5);font-weight:600;margin-left:auto;white-space:nowrap}
    .dom-lvl-badge{display:inline-block;padding:5px 14px;border-radius:100px;font-size:12px;font-weight:800;color:white;margin-top:8px}
    .dom-lvl-badge-1{background:#2E7D52}.dom-lvl-badge-2{background:#C4A258}.dom-lvl-badge-3{background:#D97706}.dom-lvl-badge-4{background:#B83D20}
    .dom-question{text-align:center;margin-bottom:20px}
    .dom-tile{display:inline-flex;background:white;border-radius:12px;border:3px solid #2C1810;box-shadow:0 4px 16px rgba(0,0,0,.15);overflow:hidden;margin:0 auto}
    .dom-tile-half{padding:18px 22px;display:flex;align-items:center;justify-content:center;min-width:70px}
    .dom-tile-left{background:#FEFCF7;border-right:3px solid #2C1810}
    .dom-tile-right{background:#F5F0E8}
    .dom-tile-eq{font-family:var(--head);font-size:28px;font-weight:700;color:#2C1810}
    .dom-tile-q{font-family:var(--head);font-size:32px;font-weight:700;color:#7C3AED}
    .dom-answers{display:grid;grid-template-columns:1fr 1fr;gap:12px;max-width:320px;margin:0 auto}
    .dom-ans{display:flex;align-items:center;justify-content:center;background:white;border:3px solid rgba(44,24,16,.15);border-radius:14px;padding:20px;font-family:var(--head);font-size:28px;font-weight:700;color:#2C1810;cursor:pointer;transition:all .2s;touch-action:manipulation;box-shadow:0 2px 8px rgba(0,0,0,.06)}
    .dom-ans:active{transform:scale(.94)}
    .dom-ans.correct{background:#2E7D52;border-color:#2E7D52;color:white;animation:domCorrect .5s ease}
    .dom-ans.wrong{background:#E53E3E;border-color:#E53E3E;color:white;animation:domShake .4s ease}
    @keyframes domCorrect{0%{transform:scale(1)}50%{transform:scale(1.1)}100%{transform:scale(1)}}
    @keyframes domShake{0%,100%{transform:translateX(0)}25%{transform:translateX(-8px)}75%{transform:translateX(8px)}}
    .dom-feedback{text-align:center;font-family:var(--head);font-size:20px;font-weight:700;margin-top:16px;min-height:28px}
    .dom-streak{display:inline-flex;align-items:center;gap:4px;background:rgba(138,108,44,.1);border:1.5px solid rgba(138,108,44,.2);border-radius:100px;padding:6px 14px;font-size:13px;font-weight:700;color:#8A6C2C;margin-top:8px}
    .dom-badges{display:flex;flex-wrap:wrap;gap:6px;justify-content:center;margin-top:10px}
    .dom-badge-pill{display:inline-flex;align-items:center;gap:4px;padding:5px 10px;border-radius:100px;font-size:11px;font-weight:800;color:white;opacity:.35;transition:all .4s}
    .dom-badge-pill.earned{opacity:1;animation:badgePop .5s ease}
    .dom-badge-pill.just-earned{box-shadow:0 0 16px rgba(255,215,0,.6);transform:scale(1.1)}
    @keyframes badgePop{0%{transform:scale(0.5);opacity:0}50%{transform:scale(1.2)}100%{transform:scale(1);opacity:1}}
    .dom-badge-popup{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(44,24,16,.95);border:3px solid #C4A258;border-radius:20px;padding:28px 32px;text-align:center;z-index:300;animation:badgePopup .6s ease;box-shadow:0 16px 60px rgba(0,0,0,.4)}
    .dom-badge-popup-icon{font-size:56px;margin-bottom:8px}
    .dom-badge-popup-title{font-family:var(--head);font-size:22px;font-weight:700;color:#C4A258;margin-bottom:4px}
    .dom-badge-popup-desc{font-size:14px;color:rgba(255,255,255,.7);font-weight:600}
    @keyframes badgePopup{0%{transform:translate(-50%,-50%) scale(0.3);opacity:0}60%{transform:translate(-50%,-50%) scale(1.1)}100%{transform:translate(-50%,-50%) scale(1);opacity:1}}
    .dom-actions{display:flex;gap:8px;margin-top:16px;justify-content:center}
    .dom-btn{padding:10px 18px;border:none;border-radius:12px;font-family:var(--body);font-size:13px;font-weight:700;cursor:pointer;transition:all .3s}
    .dom-btn-next{background:linear-gradient(135deg,#8A6C2C,#C4A258);color:white;box-shadow:0 4px 16px rgba(138,108,44,.3)}
    .dom-btn-reset{background:rgba(44,24,16,.08);color:#2C1810;border:1.5px solid rgba(44,24,16,.1)}

    /* ‚ïê‚ïê‚ïê RITNOME‚Ñ¢ ‚ïê‚ïê‚ïê */
    .rit-hero{background:linear-gradient(160deg,#1A0A2E 0%,#2D1052 40%,#1E0E3A 100%);border-radius:var(--radius);padding:32px 24px;margin-bottom:16px;text-align:center;position:relative;overflow:hidden;border:1.5px solid rgba(147,51,234,.15);box-shadow:0 8px 40px rgba(107,33,168,.2)}
    .rit-hero::before{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:300px;height:300px;border-radius:50%;background:radial-gradient(circle,rgba(147,51,234,.15) 0%,rgba(147,51,234,.03) 50%,transparent 70%);animation:glowPulse 4s ease-in-out infinite;pointer-events:none}
    .rit-hero::after{content:'';position:absolute;top:20%;right:10%;width:100px;height:100px;border-radius:50%;background:radial-gradient(circle,rgba(236,72,153,.08) 0%,transparent 70%);animation:floatOrb 7s ease-in-out infinite;pointer-events:none}
    .rit-badge{display:inline-flex;align-items:center;gap:6px;background:rgba(147,51,234,.2);border:1px solid rgba(147,51,234,.3);border-radius:100px;padding:6px 16px;font-size:11px;font-weight:800;color:rgba(192,132,252,1);letter-spacing:2px;text-transform:uppercase;margin-bottom:16px}
    .rit-badge-dot{width:8px;height:8px;border-radius:50%;background:#A855F7;animation:pulse 2s ease-in-out infinite}
    .rit-logo{font-family:var(--head);font-size:44px;font-weight:700;letter-spacing:6px;background:linear-gradient(135deg,#C084FC 0%,#E879F9 30%,#F0ABFC 50%,#E879F9 70%,#C084FC 100%);background-size:200% auto;-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;animation:shimmer 4s linear infinite;margin-bottom:4px}
    .rit-tm{font-size:14px;color:rgba(192,132,252,.5);font-weight:700;letter-spacing:2px}
    .rit-tagline{font-family:var(--accent);font-size:13px;color:rgba(255,255,255,.4);font-style:italic;margin-top:10px;letter-spacing:1px}
    .rit-score-row{display:flex;justify-content:center;gap:24px;margin-top:20px;padding-top:18px;border-top:1px solid rgba(147,51,234,.1)}
    .rit-score-stat{text-align:center}
    .rit-score-val{font-family:var(--head);font-size:28px;font-weight:700;color:white}
    .rit-score-label{font-size:11px;color:rgba(192,132,252,.6);font-weight:700;text-transform:uppercase;letter-spacing:1px;margin-top:2px}
    .rit-section-h{font-family:var(--head);font-size:20px;font-weight:700;color:var(--text);margin-bottom:14px;text-align:center}
    .rit-game{background:var(--card);border-radius:var(--radius);padding:20px;margin-bottom:12px;box-shadow:var(--shadow);border:var(--border);display:flex;gap:16px;align-items:center;transition:all .25s;cursor:pointer;border-left:4px solid transparent;position:relative;overflow:hidden}
    .rit-game:hover{transform:translateY(-2px);box-shadow:0 8px 32px rgba(17,24,39,.14)}
    .rit-game:active{transform:scale(.98)}
    .rit-game-icon{width:60px;height:60px;border-radius:16px;display:flex;align-items:center;justify-content:center;font-size:28px;flex-shrink:0}
    .rit-game-body{flex:1;min-width:0}
    .rit-game-name{font-family:var(--head);font-size:20px;font-weight:700;color:var(--text);margin-bottom:2px}
    .rit-game-cat{font-size:12px;font-weight:800;color:rgba(147,51,234,.8);text-transform:uppercase;letter-spacing:1.5px;margin-bottom:4px}
    .rit-game-desc{font-size:13px;color:var(--text);font-weight:600;opacity:.75;line-height:1.4}
    .rit-game-go{width:44px;height:44px;border-radius:12px;background:linear-gradient(135deg,#7C3AED,#9333EA);color:white;display:flex;align-items:center;justify-content:center;font-size:18px;flex-shrink:0;box-shadow:0 3px 12px rgba(147,51,234,.25)}
    .rit-game-react{border-left-color:#9B59B6}.rit-game-react .rit-game-icon{background:rgba(155,89,182,.12)}
    .rit-game-recall{border-left-color:#FF6B35}.rit-game-recall .rit-game-icon{background:rgba(255,107,53,.12)}
    .rit-game-reflex{border-left-color:#00CED1}.rit-game-reflex .rit-game-icon{background:rgba(0,206,209,.12)}
    .rit-game-replay{border-left-color:#00D9A5}.rit-game-replay .rit-game-icon{background:rgba(0,217,165,.12)}
    .rit-game-rhythm{border-left-color:#9ACD32}.rit-game-rhythm .rit-game-icon{background:rgba(154,205,50,.12)}

    /* ‚ïê‚ïê‚ïê CONGA HERO ‚ïê‚ïê‚ïê */
    .conga-hero{background:linear-gradient(160deg,#0D0620 0%,#1A0A2E 20%,#3D1070 50%,#5B1A9E 75%,#2D1052 100%);border-radius:var(--radius);padding:32px 20px 28px;margin-bottom:16px;text-align:center;position:relative;overflow:hidden;border:2px solid rgba(168,85,247,.3);box-shadow:0 12px 60px rgba(107,33,168,.4);transition:all .3s}
    .conga-hero:active{transform:scale(.98)}
    .conga-hero-glow{position:absolute;top:40%;left:50%;transform:translate(-50%,-50%);width:500px;height:500px;border-radius:50%;background:radial-gradient(circle,rgba(168,85,247,.2) 0%,rgba(255,107,53,.08) 40%,transparent 65%);animation:glowPulse 3.5s ease-in-out infinite;pointer-events:none}
    .conga-hero-badge{display:inline-block;background:linear-gradient(135deg,#EF4444,#DC2626);border-radius:100px;padding:5px 16px;font-size:11px;font-weight:800;color:white;letter-spacing:2px;text-transform:uppercase;margin-bottom:16px;position:relative;z-index:1;animation:pulse 2s ease-in-out infinite}
    .conga-hero-drums{font-size:40px;letter-spacing:12px;margin-bottom:12px;position:relative;z-index:1}
    .conga-drum{display:inline-block;animation:drumBounce 1.2s ease-in-out infinite}
    .conga-drum.d1{animation-delay:0s}
    .conga-drum.d2{animation-delay:0.2s;font-size:48px}
    .conga-drum.d3{animation-delay:0.4s}
    @keyframes drumBounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-8px)}}
    .conga-hero-title{font-family:var(--head);font-size:52px;font-weight:700;letter-spacing:8px;position:relative;z-index:1;background:linear-gradient(135deg,#FFD700,#FF6B35,#FF1493,#FFD700);background-size:300% auto;-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;animation:shimmer 4s linear infinite;text-shadow:none;filter:drop-shadow(0 2px 10px rgba(255,107,53,.3))}
    .conga-hero-sub{font-size:14px;color:rgba(255,255,255,.55);font-weight:600;margin-top:6px;position:relative;z-index:1;letter-spacing:.5px}
    .conga-hero-genres{display:flex;justify-content:center;flex-wrap:wrap;gap:6px;margin-top:16px;position:relative;z-index:1}
    .conga-genre{padding:4px 10px;border-radius:100px;font-size:11px;font-weight:700;letter-spacing:.5px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);color:rgba(255,255,255,.5);transition:all .3s}
    .conga-hero:hover .conga-genre{border-color:rgba(255,215,0,.2);color:rgba(255,215,0,.6)}
    .conga-hero-btn{display:inline-flex;align-items:center;gap:10px;margin-top:20px;padding:16px 36px;border-radius:100px;background:linear-gradient(135deg,#FFD700,#FF8C42);color:#1A0A2E;font-family:var(--body);font-size:17px;font-weight:800;letter-spacing:.5px;box-shadow:0 6px 32px rgba(255,215,0,.4);position:relative;z-index:1;transition:all .3s;cursor:pointer;pointer-events:auto}
    .conga-hero:active .conga-hero-btn{transform:scale(1.04);box-shadow:0 8px 40px rgba(255,215,0,.55)}
    .conga-hero-btn-icon{font-size:20px;animation:pulse 2s ease-in-out infinite}
    .conga-hero-modes{font-size:11px;font-weight:700;color:rgba(255,255,255,.25);letter-spacing:1.5px;margin-top:14px;position:relative;z-index:1}

    /* ‚ïê‚ïê‚ïê STARTING FIVE STRIP ‚ïê‚ïê‚ïê */
    .s5-strip{background:linear-gradient(160deg,rgba(13,6,32,.6) 0%,rgba(45,16,82,.4) 100%);border-radius:var(--radius);padding:20px 16px;margin-bottom:16px;border:1.5px solid rgba(147,51,234,.2)}
    .s5-strip-label{font-family:'Bebas Neue',sans-serif;font-size:14px;font-weight:800;letter-spacing:3px;text-transform:uppercase;color:rgba(255,255,255,.45);text-align:center;margin-bottom:14px}
    .s5-strip-row{display:flex;justify-content:center;gap:10px;flex-wrap:wrap}
    .s5-mini{display:flex;flex-direction:column;align-items:center;gap:6px;padding:14px 10px 12px;border-radius:16px;background:var(--s5bg,rgba(255,255,255,.05));border:2px solid var(--s5bc,rgba(255,255,255,.1));text-decoration:none;transition:all .25s;min-width:60px;flex:1;max-width:72px;position:relative;overflow:hidden}
    .s5-mini::before{content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,var(--s5glow,rgba(155,89,182,.08)) 0%,transparent 70%);pointer-events:none}
    .s5-mini:active{transform:scale(.92);border-color:var(--sc);box-shadow:0 4px 16px var(--s5glow,rgba(155,89,182,.2))}
    .s5-mini-icon{font-size:28px;filter:drop-shadow(0 2px 8px var(--s5glow,rgba(155,89,182,.3)))}
    .s5-mini-name{font-family:'Bebas Neue',sans-serif;font-size:11px;font-weight:700;letter-spacing:1.5px;color:var(--sc,rgba(255,255,255,.5));text-transform:uppercase}
    .s5-mini-desc{font-size:8px;font-weight:600;color:rgba(255,255,255,.3);letter-spacing:.3px;text-align:center;line-height:1.2}

    .rit-powered{text-align:center;margin-top:20px;padding:16px;opacity:.5}
    .rit-powered-text{font-size:11px;font-weight:700;color:var(--light);letter-spacing:2px;text-transform:uppercase}


    /* ‚ïê‚ïê‚ïê FAMILY NUDGE (SHARED) ‚ïê‚ïê‚ïê */
    .hb-family-nudge{position:fixed;bottom:-200px;left:50%;transform:translateX(-50%);width:calc(100% - 32px);max-width:380px;background:linear-gradient(135deg,#1a1025 0%,#2d1052 100%);border:1.5px solid rgba(255,215,0,.25);border-radius:20px;padding:20px;text-align:center;z-index:9999;transition:bottom .6s cubic-bezier(.4,0,.2,1);box-shadow:0 -4px 40px rgba(107,33,168,.3)}
    .hb-family-nudge.show{bottom:20px}
    .hb-nudge-close{position:absolute;top:8px;right:12px;color:rgba(255,255,255,.3);font-size:14px;cursor:pointer;padding:4px 8px;transition:color .2s}
    .hb-nudge-close:active{color:rgba(255,255,255,.6)}
    .hb-nudge-emoji{font-size:28px;margin-bottom:6px}
    .hb-nudge-text{font-size:14px;font-weight:600;color:rgba(255,255,255,.7);line-height:1.4;margin-bottom:12px}
    .hb-nudge-btn{display:inline-block;padding:10px 24px;border-radius:100px;background:linear-gradient(135deg,rgba(255,215,0,.15),rgba(255,107,53,.1));border:1px solid rgba(255,215,0,.25);color:#FFD700;font-size:13px;font-weight:700;text-decoration:none;letter-spacing:.3px;transition:all .25s}
    .hb-nudge-btn:active{transform:scale(.96);background:linear-gradient(135deg,rgba(255,215,0,.25),rgba(255,107,53,.2))}

    /* ‚ïê‚ïê‚ïê SHARED STYLES ‚ïê‚ïê‚ïê */
    .saludo{background:linear-gradient(135deg,var(--card) 0%,#F5EEDF 100%);border-radius:var(--radius);padding:28px 24px;margin-bottom:16px;box-shadow:var(--shadow);border:var(--border);position:relative;overflow:hidden}
    .saludo::after{content:'';position:absolute;top:-40%;right:-20%;width:180px;height:180px;border-radius:50%;background:radial-gradient(circle,rgba(196,162,88,.2) 0%,transparent 70%)}
    .fecha{font-size:15px;color:var(--light);font-weight:700;letter-spacing:.3px;margin-bottom:4px}
    .saludo-h{font-family:var(--head);font-size:30px;font-weight:700;color:var(--text);line-height:1.2}
    .saludo-msg{font-size:17px;color:var(--muted);line-height:1.6;margin-top:16px;padding-top:16px;border-top:1px solid rgba(26,29,43,.08);font-style:italic;font-family:var(--accent)}
    .sound-toggle{position:absolute;top:16px;right:16px;z-index:2;background:rgba(26,29,43,.06);border:1px solid rgba(26,29,43,.06);border-radius:12px;width:48px;height:48px;display:flex;align-items:center;justify-content:center;font-size:22px;transition:background .2s}
    .sound-toggle:hover{background:rgba(26,29,43,.12)}
    .services-intro{text-align:center;padding:8px 0 20px}
    .services-intro-h{font-family:var(--head);font-size:28px;font-weight:700;color:var(--text);margin-bottom:6px}
    .services-intro-line{width:40px;height:2px;background:linear-gradient(90deg,transparent,var(--gold),transparent);margin:0 auto 10px;border:none}
    .services-intro-p{font-family:var(--accent);font-size:13px;font-style:italic;color:var(--text);line-height:1.5;max-width:380px;margin:0 auto;font-weight:600}

    /* ‚ïê‚ïê‚ïê AI HERO ‚ïê‚ïê‚ïê */
    .ai-hero{background:linear-gradient(160deg,#1A0A2E 0%,#2D1052 40%,#1E0E3A 100%);border-radius:var(--radius);padding:40px 24px 32px;margin-bottom:16px;text-align:center;position:relative;overflow:hidden;border:1.5px solid rgba(147,51,234,.15);box-shadow:0 8px 40px rgba(107,33,168,.25)}
    .ai-hero-glow{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:300px;height:300px;border-radius:50%;background:radial-gradient(circle,rgba(147,51,234,.18) 0%,transparent 65%);animation:glowPulse 4s ease-in-out infinite;pointer-events:none}
    .ai-hero-avatar{margin-bottom:12px;position:relative;z-index:1;animation:breathe 3s ease-in-out infinite}
    .ai-hero-name{font-family:var(--head);font-size:36px;font-weight:700;color:white;letter-spacing:2px;position:relative;z-index:1}
    .ai-hero-role{font-size:13px;font-weight:800;color:rgba(192,132,252,.8);letter-spacing:3px;text-transform:uppercase;margin-top:4px;position:relative;z-index:1}
    .ai-hero-line{width:60px;height:2px;background:linear-gradient(90deg,transparent,rgba(192,132,252,.4),transparent);margin:18px auto;position:relative;z-index:1}
    .ai-hero-pitch{font-family:var(--accent);font-size:16px;color:rgba(255,255,255,.7);line-height:1.6;font-weight:500;max-width:340px;margin:0 auto 24px;position:relative;z-index:1}
    .ai-hero-btn{display:inline-flex;align-items:center;gap:8px;padding:16px 32px;border:none;border-radius:100px;background:linear-gradient(135deg,#7C3AED,#9333EA);color:white;font-family:var(--body);font-size:17px;font-weight:700;box-shadow:0 6px 28px rgba(147,51,234,.4);transition:all .3s;position:relative;z-index:1;animation:breathe 3s ease-in-out infinite}
    .ai-hero-btn-big{font-size:22px;padding:20px 48px;border-radius:100px;box-shadow:0 8px 36px rgba(147,51,234,.5)}
    .ai-hero-btn-big:active{transform:scale(.95)}
    .ai-hero-hint{font-size:13px;color:rgba(17,24,39,.35);font-weight:600;margin-top:8px;position:relative;z-index:1;animation:pulse 3s ease-in-out infinite}

    /* ‚ïê‚ïê‚ïê MOOD PICKER ‚ïê‚ïê‚ïê */
    .mood-picker{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;padding:16px 8px}
    .mood-option{display:flex;flex-direction:column;align-items:center;gap:6px;padding:14px 8px;border-radius:16px;background:rgba(147,51,234,.06);border:2px solid rgba(147,51,234,.1);cursor:pointer;transition:all .25s}
    .mood-option:active{transform:scale(.92);background:rgba(147,51,234,.15);border-color:rgba(147,51,234,.3)}
    .mood-emoji{font-size:36px}
    .mood-label{font-size:12px;font-weight:700;color:rgba(17,24,39,.5);letter-spacing:.3px}
    .ai-hero-btn:hover{transform:scale(1.05);box-shadow:0 8px 36px rgba(147,51,234,.5)}
    .ai-section{background:var(--card);border-radius:var(--radius);padding:24px;margin-bottom:16px;box-shadow:var(--shadow);border:var(--border)}
    .ai-section-h{font-family:var(--head);font-size:22px;font-weight:700;color:var(--text);text-align:center;margin-bottom:4px}
    .ai-section-sub{font-size:13px;font-weight:700;color:var(--light);text-align:center;margin-bottom:18px;font-style:italic;font-family:var(--accent)}
    .ai-can-card{display:flex;align-items:center;gap:14px;padding:14px 0;border-bottom:1.5px solid rgba(17,24,39,.06)}
    .ai-can-card:last-child{border-bottom:none;padding-bottom:0}
    .ai-can-card:first-child{padding-top:0}
    .ai-can-icon{width:48px;height:48px;border-radius:14px;background:rgba(107,33,168,.08);display:flex;align-items:center;justify-content:center;font-size:22px;flex-shrink:0}
    .ai-can-body{flex:1;min-width:0}
    .ai-can-title{font-size:16px;font-weight:700;color:var(--text);margin-bottom:2px}
    .ai-can-example{font-size:13px;font-weight:600;color:rgba(107,33,168,.7);font-style:italic;font-family:var(--accent)}
    .ai-trust{background:var(--card);border-radius:var(--radius);padding:20px 24px;margin-bottom:16px;box-shadow:var(--shadow);border:var(--border);display:flex;gap:14px;align-items:flex-start}
    .ai-trust-icon{font-size:24px;flex-shrink:0;margin-top:2px}
    .ai-trust-text{font-size:13px;color:var(--muted);line-height:1.6;font-weight:600}

    /* Pricing */
    .pricing-header{text-align:center;margin-bottom:20px}
    .pricing-header-h{font-family:var(--head);font-size:28px;font-weight:700;color:var(--text);margin-bottom:6px}
    .pricing-header-sub{font-size:14px;color:var(--light);font-weight:600;font-family:var(--accent);font-style:italic}
    .pricing-card{background:var(--card);border-radius:var(--radius);padding:28px 24px;margin-bottom:14px;box-shadow:var(--shadow);border:var(--border);position:relative;overflow:hidden;transition:all .3s}
    .pricing-card:hover{transform:translateY(-2px);box-shadow:0 8px 32px rgba(26,29,43,.14)}
    .pricing-card.featured{border:2px solid #7C3AED;box-shadow:0 8px 40px rgba(107,33,168,.2)}
    .pricing-card.featured::before{content:'M√ÅS POPULAR';position:absolute;top:16px;right:-32px;background:linear-gradient(135deg,#7C3AED,#9333EA);color:white;font-size:10px;font-weight:800;letter-spacing:1.5px;padding:6px 40px;transform:rotate(45deg)}
    .pricing-tier{font-size:12px;font-weight:800;letter-spacing:2px;text-transform:uppercase;margin-bottom:8px}
    .pricing-name{font-family:var(--head);font-size:24px;font-weight:700;color:var(--text);margin-bottom:4px}
    .pricing-price{font-family:var(--head);font-size:42px;font-weight:700;color:var(--text);margin-bottom:2px}
    .pricing-price span{font-size:16px;font-weight:600;color:var(--light)}
    .pricing-desc{font-size:14px;color:var(--light);font-weight:600;margin-bottom:18px;line-height:1.5}
    .pricing-features{list-style:none;padding:0;margin:0 0 20px}
    .pricing-features li{padding:8px 0;font-size:14px;font-weight:600;color:var(--text);display:flex;align-items:center;gap:10px;border-bottom:1px solid rgba(17,24,39,.04)}
    .pricing-features li:last-child{border-bottom:none}
    .pricing-check{color:#2E7D52;font-size:16px;flex-shrink:0}
    .pricing-btn{width:100%;padding:16px;border:none;border-radius:14px;font-family:var(--body);font-size:17px;font-weight:700;cursor:pointer;transition:all .3s}
    .pricing-btn-free{background:rgba(17,24,39,.06);color:var(--text)}
    .pricing-btn-free:hover{background:rgba(17,24,39,.1)}
    .pricing-btn-pro{background:linear-gradient(135deg,#7C3AED,#9333EA);color:white;box-shadow:0 4px 20px rgba(107,33,168,.3)}
    .pricing-btn-pro:hover{transform:translateY(-1px);box-shadow:0 6px 28px rgba(107,33,168,.4)}
    .pricing-btn-fam{background:linear-gradient(135deg,var(--gold),#7A5E20);color:white;box-shadow:0 4px 20px rgba(138,108,44,.3)}
    .pricing-btn-fam:hover{transform:translateY(-1px);box-shadow:0 6px 28px rgba(138,108,44,.4)}
    .pricing-note{text-align:center;font-size:13px;color:var(--light);font-weight:600;margin-top:8px;line-height:1.6}

    /* ‚ïê‚ïê‚ïê SOPA DE LETRAS ‚ïê‚ïê‚ïê */
    .sopa-hero{background:linear-gradient(160deg,#1A3A2A 0%,#2D5A3D 40%,#1A3A2A 100%);border-radius:var(--radius);padding:20px 16px;margin-bottom:12px;text-align:center;position:relative;overflow:hidden;border:1.5px solid rgba(46,125,82,.15);box-shadow:0 8px 40px rgba(46,125,82,.2)}
    .sopa-badge{display:inline-flex;align-items:center;gap:6px;background:rgba(46,125,82,.2);border:1px solid rgba(46,125,82,.3);border-radius:100px;padding:4px 12px;font-size:11px;font-weight:800;color:#68D391;letter-spacing:1.5px;text-transform:uppercase;margin-bottom:6px}
    .sopa-title{font-family:var(--head);font-size:26px;font-weight:700;color:white;margin-bottom:2px}
    .sopa-sub{font-size:13px;color:rgba(255,255,255,.6);font-weight:600}
    .sopa-stats{display:flex;justify-content:center;gap:24px;margin-top:10px}
    .sopa-stat-val{font-family:var(--head);font-size:22px;font-weight:700;color:white}
    .sopa-stat-label{font-size:10px;color:rgba(255,255,255,.5);font-weight:700;text-transform:uppercase;letter-spacing:1px}
    .sopa-cat-section{background:var(--card);border-radius:var(--radius);padding:14px;margin-bottom:12px;box-shadow:var(--shadow);border:var(--border)}
    .sopa-cat-h{font-family:var(--head);font-size:16px;font-weight:700;color:var(--text);margin-bottom:10px;text-align:center}
    .sopa-cat-grid{display:flex;gap:8px;overflow-x:auto;-webkit-overflow-scrolling:touch;padding-bottom:4px}
    .sopa-cat-btn{padding:10px 14px;border:2px solid rgba(17,24,39,.08);border-radius:14px;background:#F5F0E8;font-family:var(--body);font-size:13px;font-weight:700;color:var(--text);text-align:center;cursor:pointer;transition:all .25s;display:flex;align-items:center;gap:6px;white-space:nowrap;flex-shrink:0}
    .sopa-cat-btn:hover{border-color:var(--green)}
    .sopa-cat-btn.active{border-color:var(--green);background:rgba(46,125,82,.08)}
    .sopa-cat-icon{font-size:18px}
    .sopa-game{background:var(--card);border-radius:var(--radius);padding:16px 10px;margin-bottom:12px;box-shadow:var(--shadow);border:var(--border)}
    .sopa-grid-wrap{margin-bottom:12px}
    .sopa-grid{display:grid;gap:3px;margin:0 auto;user-select:none;-webkit-user-select:none;width:100%}
    .sopa-cell{aspect-ratio:1;display:flex;align-items:center;justify-content:center;font-family:var(--head);font-size:clamp(14px,4vw,20px);font-weight:700;color:var(--text);background:#F5F0E8;border-radius:6px;cursor:pointer;transition:all .15s;text-transform:uppercase}
    .sopa-cell.selecting{background:#7C3AED;color:white;transform:scale(1.12);box-shadow:0 0 12px rgba(124,58,237,.5);z-index:2;position:relative}
    .sopa-cell.found{background:var(--green);color:white;animation:foundPop .3s ease}
    .sopa-cell.found-alt{background:#2A5F95;color:white}
    .sopa-cell.found-alt2{background:#8A6C2C;color:white}
    .sopa-cell.found-alt3{background:#5B4D8F;color:white}
    .sopa-cell.found-alt4{background:#A45E35;color:white}
    .sopa-cell.found-alt5{background:#B83D20;color:white}
    @keyframes foundPop{0%{transform:scale(1)}50%{transform:scale(1.15)}100%{transform:scale(1)}}
    .sopa-words{display:flex;flex-wrap:wrap;gap:6px;justify-content:center}
    .sopa-word{padding:5px 10px;border-radius:100px;font-size:12px;font-weight:700;background:#F5F0E8;color:var(--text);border:1.5px solid rgba(17,24,39,.08);transition:all .3s}
    .sopa-word.found{background:var(--green);color:white;border-color:var(--green);text-decoration:line-through}
    .sopa-found-msg{text-align:center;font-size:15px;font-weight:700;color:var(--green);margin-top:10px;display:none}
    .sopa-actions{display:flex;gap:8px;margin-top:12px;justify-content:center}
    .sopa-btn{padding:10px 18px;border:none;border-radius:12px;font-family:var(--body);font-size:13px;font-weight:700;cursor:pointer;transition:all .3s}
    .sopa-btn-new{background:linear-gradient(135deg,var(--green),#246B42);color:white;box-shadow:0 4px 16px rgba(46,125,82,.3)}
    .sopa-btn-new:hover{transform:translateY(-1px)}
    .sopa-btn-hint{background:rgba(138,108,44,.1);color:var(--gold);border:1.5px solid rgba(138,108,44,.2)}

    /* Section Divider */
    .section-divider{display:flex;align-items:center;gap:16px;margin:28px 0 20px;padding:0 8px}
    .section-divider-line{flex:1;height:2px;background:linear-gradient(90deg,transparent,rgba(166,132,62,.3),transparent)}
    .section-divider-text{font-family:var(--head);font-size:14px;font-weight:700;color:var(--gold);letter-spacing:3px;text-transform:uppercase;white-space:nowrap}

    /* ‚ïê‚ïê‚ïê AI CHATBOT ‚ïê‚ïê‚ïê */
    .fab-chat{position:fixed;bottom:24px;right:24px;width:64px;height:64px;border-radius:50%;border:none;background:linear-gradient(135deg,#6B21A8,#9333EA);color:white;font-size:28px;box-shadow:0 6px 28px rgba(107,33,168,.45);display:flex;align-items:center;justify-content:center;transition:all .3s;z-index:90;animation:breathe 3s ease-in-out infinite}
    .fab-chat:hover{transform:scale(1.08)}
    .chat-overlay{position:fixed;inset:0;background:rgba(17,24,39,.6);backdrop-filter:blur(12px);display:none;align-items:flex-end;justify-content:center;z-index:200;animation:fadeIn .2s ease}
    .chat-overlay.open{display:flex}
    .chat-box{background:var(--card);border-radius:24px 24px 0 0;width:100%;max-width:520px;height:85vh;display:flex;flex-direction:column;animation:slideUp .35s cubic-bezier(.16,1,.3,1);border-top:3px solid rgba(107,33,168,.3);overflow:hidden}
    @media(max-width:560px){
      .chat-overlay{align-items:stretch}
      .chat-box{height:100vh;height:100dvh;border-radius:0;border-top:none;max-width:100%}
    }
    .chat-header{background:linear-gradient(135deg,#1A0A2E,#2D1052);padding:16px;display:flex;align-items:center;gap:12px;flex-shrink:0}
    .chat-header-avatar{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#7C3AED,#C084FC);display:flex;align-items:center;justify-content:center;font-size:20px;flex-shrink:0}
    .chat-header-info{flex:1;min-width:0}
    .chat-header-name{font-family:var(--head);font-size:18px;font-weight:700;color:white}
    .chat-header-status{font-size:11px;color:rgba(192,132,252,.7);font-weight:700;display:flex;align-items:center;gap:6px}
    .chat-header-dot{width:7px;height:7px;border-radius:50%;background:#A855F7;animation:pulse 2s infinite}
    .chat-close{width:40px;height:40px;border:none;background:rgba(255,255,255,.1);border-radius:12px;color:white;font-size:20px;display:flex;align-items:center;justify-content:center;cursor:pointer;flex-shrink:0}
    .chat-close:hover{background:rgba(255,255,255,.2)}
    .chat-messages{flex:1;overflow-y:auto;padding:16px 12px;display:flex;flex-direction:column;gap:12px;scroll-behavior:smooth}
    .chat-msg{max-width:85%;padding:12px 16px;border-radius:18px;font-size:15px;line-height:1.55;font-weight:600;animation:fu .3s ease forwards;word-wrap:break-word}
    .chat-msg.bot{align-self:flex-start;background:#F3F0FF;color:var(--text);border-bottom-left-radius:4px;border:1px solid rgba(107,33,168,.08)}
    .chat-msg.user{align-self:flex-end;background:linear-gradient(135deg,#7C3AED,#9333EA);color:white;border-bottom-right-radius:4px}
    .chat-msg.typing{align-self:flex-start;background:#F3F0FF;color:var(--light);border-bottom-left-radius:4px;font-style:italic;border:1px solid rgba(107,33,168,.08)}
    .chat-input-wrap{display:flex;align-items:center;gap:8px;padding:12px;padding-bottom:calc(12px + env(safe-area-inset-bottom,0px));border-top:1.5px solid rgba(17,24,39,.08);flex-shrink:0;background:var(--card);box-sizing:border-box;width:100%}
    .chat-home-btn{width:44px;height:44px;border:none;border-radius:12px;background:#7C3AED;color:white;font-size:18px;display:flex;align-items:center;justify-content:center;cursor:pointer;flex-shrink:0}
    .chat-input{flex:1;min-width:0;padding:12px 14px;border:2px solid rgba(17,24,39,.1);border-radius:12px;font-family:var(--body);font-size:16px;color:var(--text);background:#F8F6F2;outline:none;box-sizing:border-box}
    .chat-input:focus{border-color:rgba(107,33,168,.3)}
    .chat-send{width:44px;height:44px;border:none;border-radius:12px;background:linear-gradient(135deg,#7C3AED,#9333EA);color:white;display:flex;align-items:center;justify-content:center;cursor:pointer;flex-shrink:0;font-size:24px;font-weight:800}
    .chat-send:hover{transform:scale(1.05)}
    .chat-send:disabled{opacity:.4;transform:none}
    .chat-tts-toggle{width:36px;height:36px;border:none;background:rgba(255,255,255,.1);border-radius:10px;color:white;font-size:18px;display:flex;align-items:center;justify-content:center;cursor:pointer;flex-shrink:0;transition:all .2s;opacity:.7}
    .chat-tts-toggle:hover{opacity:1;background:rgba(255,255,255,.2)}
    .chat-tts-toggle.active{opacity:1;background:rgba(56,184,124,.3);color:#38B87C}
    .chat-quick{display:flex;flex-wrap:wrap;gap:8px;padding:8px 0}
    .chat-quick-btn{padding:12px 18px;border:2px solid rgba(107,33,168,.15);border-radius:100px;background:rgba(107,33,168,.06);font-size:15px;font-weight:700;color:#7C3AED;font-family:var(--body);cursor:pointer;transition:all .2s;white-space:nowrap;touch-action:manipulation}
    .chat-quick-btn:hover{background:rgba(107,33,168,.12);border-color:rgba(107,33,168,.25)}
    .chat-quick-btn:active{transform:scale(.95);background:#7C3AED;color:white}
    .chat-checklist{background:rgba(107,33,168,.04);border:1px solid rgba(107,33,168,.1);border-radius:14px;padding:14px 16px;margin-top:6px}
    .chat-checklist-title{font-size:14px;font-weight:800;color:var(--text);margin-bottom:10px}
    .chat-check-item{display:flex;align-items:center;gap:10px;padding:10px 0;border-bottom:1px solid rgba(17,24,39,.05);cursor:pointer;transition:all .2s}
    .chat-check-item:last-child{border-bottom:none;padding-bottom:0}
    .chat-check-item:first-of-type{padding-top:0}
    .chat-check-box{width:24px;height:24px;border-radius:8px;border:2px solid rgba(107,33,168,.25);display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:14px;transition:all .25s}
    .chat-check-item.checked .chat-check-box{background:#7C3AED;border-color:#7C3AED;color:white}
    .chat-check-item.checked .chat-check-label{text-decoration:line-through;opacity:.5}
    .chat-check-label{font-size:14px;font-weight:600;color:var(--text)}
    .chat-check-progress{margin-top:10px;font-size:12px;font-weight:800;color:#7C3AED;text-align:right}
    .chat-form{background:rgba(107,33,168,.04);border:1px solid rgba(107,33,168,.1);border-radius:14px;padding:16px;margin-top:6px}
    .chat-form-title{font-size:14px;font-weight:800;color:var(--text);margin-bottom:12px}
    .chat-form-field{margin-bottom:10px}
    .chat-form-label{font-size:12px;font-weight:700;color:var(--muted);margin-bottom:4px}
    .chat-form-input{width:100%;padding:10px 14px;border:1.5px solid rgba(17,24,39,.1);border-radius:10px;font-size:14px;font-family:var(--body);color:var(--text);background:#F8F6F2;box-sizing:border-box}
    .chat-form-input:focus{outline:none;border-color:rgba(107,33,168,.3)}
    .chat-form-select{width:100%;padding:10px 14px;border:1.5px solid rgba(17,24,39,.1);border-radius:10px;font-size:14px;font-family:var(--body);color:var(--text);background:#F8F6F2;appearance:none}
    .chat-form-submit{width:100%;padding:12px;border:none;border-radius:12px;background:linear-gradient(135deg,#7C3AED,#9333EA);color:white;font-size:15px;font-weight:700;font-family:var(--body);margin-top:6px;cursor:pointer;transition:all .2s}
    .chat-form-submit:hover{transform:scale(1.02)}
    .chat-actions{display:flex;gap:8px;margin-top:8px;flex-wrap:wrap}
    .chat-action-btn{padding:10px 16px;border:none;border-radius:12px;font-size:13px;font-weight:700;font-family:var(--body);cursor:pointer;transition:all .2s}
    .chat-action-primary{background:linear-gradient(135deg,#7C3AED,#9333EA);color:white}
    .chat-action-secondary{background:rgba(107,33,168,.08);color:#7C3AED;border:1px solid rgba(107,33,168,.15)}
    .chat-action-btn:hover{transform:scale(1.03)}

    .consent-banner{position:fixed;bottom:0;left:0;right:0;background:rgba(17,24,39,.95);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);padding:16px 20px;z-index:300;display:flex;align-items:center;justify-content:center;gap:14px;flex-wrap:wrap;animation:slideUp .4s ease;border-top:2px solid rgba(138,108,44,.2)}
    .consent-text{font-size:13px;font-weight:600;color:rgba(255,255,255,.8);max-width:480px;line-height:1.5}
    .consent-text a{color:#C4A258;text-decoration:underline}
    .consent-btn{padding:10px 24px;border:none;border-radius:10px;background:linear-gradient(135deg,#7C3AED,#9333EA);color:white;font-family:var(--body);font-size:14px;font-weight:700;cursor:pointer;white-space:nowrap;transition:all .2s}
    .consent-btn:hover{transform:scale(1.03)}
    .manage-sub{background:var(--card);border-radius:var(--radius);padding:20px;margin-bottom:16px;box-shadow:var(--shadow);border:var(--border);text-align:center}
    .manage-sub-title{font-family:var(--head);font-size:18px;font-weight:700;color:var(--text);margin-bottom:4px}
    .manage-sub-desc{font-size:13px;color:var(--light);font-weight:600;margin-bottom:14px}
    .manage-sub-input{width:100%;padding:14px;border:2px solid rgba(17,24,39,.1);border-radius:12px;font-family:var(--body);font-size:16px;color:var(--text);background:#F8F6F2;outline:none;box-sizing:border-box;margin-bottom:10px;text-align:center}
    .manage-sub-input:focus{border-color:#7C3AED}
    .manage-sub-btn{padding:14px 28px;border:none;border-radius:12px;background:rgba(17,24,39,.08);font-family:var(--body);font-size:15px;font-weight:700;color:var(--text);cursor:pointer;transition:all .2s;width:100%}
    .manage-sub-btn:hover{background:rgba(17,24,39,.14)}
    .manage-sub-msg{font-size:13px;font-weight:600;margin-top:8px;min-height:18px}
    .legal-check{display:flex;align-items:flex-start;gap:10px;margin:14px 0;cursor:pointer;-webkit-tap-highlight-color:transparent}
    .legal-check input{width:22px;height:22px;margin-top:2px;accent-color:#7C3AED;flex-shrink:0;cursor:pointer}
    .legal-check label{font-size:13px;font-weight:600;color:#374151;line-height:1.5;cursor:pointer}
    .legal-check label a{color:#7C3AED;text-decoration:underline;font-weight:700}
    .fam-btn:disabled,.pricing-btn:disabled{opacity:.4;cursor:not-allowed;transform:none!important}
    .hidden{display:none!important}
    .footer{text-align:center;margin-top:40px;padding:20px;border-top:2px solid rgba(26,29,43,.08)}
    .footer-b{font-family:var(--head);font-size:16px;font-weight:700;color:var(--muted);letter-spacing:4px}
    .footer-s{font-family:var(--accent);font-size:12px;font-style:italic;color:var(--light);margin-top:4px}

    @media(max-width:560px){
      .brand-title .ak{font-size:42px;letter-spacing:5px}
      .brand-title .wk{font-size:18px;letter-spacing:12px}
      .view-btn{font-size:11px;padding:10px 2px;letter-spacing:0}
      .rit-logo{font-size:36px;letter-spacing:4px}
      .rit-score-val{font-size:24px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="view-toggle fi">
      <button class="view-btn act" id="viewServicios" onclick="switchView('servicios')">Hey Bori</button>
      <button class="view-btn" id="viewRitnome" onclick="switchView('ritnome')">Ritnome</button>
      <button class="view-btn" id="viewSopa" onclick="switchView('sopa')">Sopa</button>
      <button class="view-btn" id="viewDomino" onclick="switchView('domino')">Domin√≥</button>
      <button class="view-btn" id="viewFamilia" onclick="switchView('familia')">Familia</button>
    </div>

    <div class="brand fi" id="brandHeader">
      <div class="brand-sym" style="font-size:56px;filter:drop-shadow(0 4px 16px rgba(200,40,40,.3))">üáµüá∑</div>
      <h1 class="brand-title"><span class="ak">HEY BORI</span><span class="wk">Tu Compa√±era Boricua</span></h1>
      <hr class="brand-line">
      <div class="brand-accent-line"></div>
    </div>

    <!-- ‚ïê‚ïê‚ïê SERVICIOS VIEW ‚ïê‚ïê‚ïê -->
    <div id="serviciosView">
      <div class="ai-hero">
        <div class="ai-hero-glow"></div>
        <div class="ai-hero-avatar"><img src="/icon.png" alt="Bori" style="width:200px;height:200px;object-fit:contain;filter:drop-shadow(0 6px 24px rgba(147,51,234,.5))"></div>
        <div class="ai-hero-name">Bori</div>
        <div class="ai-hero-role">Tu Compa√±era Boricua ¬∑ Gratis</div>
        <div class="ai-hero-line"></div>
        <p class="ai-hero-pitch">Tu compa√±era digital que siempre est√° ah√≠. Pa' hablar, pa' ayudarte, pa' que nunca est√©s sola. üíõüáµüá∑</p>
        <div style="text-align:left;max-width:360px;margin:0 auto 20px;position:relative;z-index:1">
          <div style="font-size:13px;color:rgba(255,255,255,.55);font-weight:700;letter-spacing:2px;text-transform:uppercase;margin-bottom:10px;text-align:center">Lo que incluye gratis</div>
          <div style="display:flex;flex-direction:column;gap:6px">
            <div style="font-size:14px;color:rgba(255,255,255,.8)"><span style="color:#10B981">‚úì</span> üí¨ <strong>Bori</strong> ‚Äî conversa, escucha, te hace re√≠r <span style="color:rgba(255,255,255,.35)">(5 al d√≠a)</span></div>
            <div style="font-size:14px;color:rgba(255,255,255,.8)"><span style="color:#10B981">‚úì</span> ü•Å <strong>Conga</strong> ‚Äî Bomba, Plena, Salsa y m√°s <span style="color:rgba(255,255,255,.35)">(3 tambores)</span></div>
            <div style="font-size:14px;color:rgba(255,255,255,.8)"><span style="color:#10B981">‚úì</span> üî§ <strong>Sopa de Letras</strong> ‚Äî palabras boricuas <span style="color:rgba(255,255,255,.35)">(b√°sico)</span></div>
            <div style="font-size:14px;color:rgba(255,255,255,.8)"><span style="color:#10B981">‚úì</span> üÅÉ <strong>Domin√≥ Math</strong> ‚Äî resuelve con fichas <span style="color:rgba(255,255,255,.35)">(b√°sico)</span></div>
            <div style="font-size:14px;color:rgba(255,255,255,.8)"><span style="color:#10B981">‚úì</span> üéµ <strong>5 Ritnome‚Ñ¢</strong> ‚Äî Recall, React, Reflex, Replay, Ritmo <span style="color:rgba(255,255,255,.35)">(Training)</span></div>
            <div style="font-size:12px;color:rgba(255,255,255,.3);margin-top:4px">‚úó Bori 24/7 ¬∑ ‚úó Dashboard familiar ¬∑ ‚úó Velocidades avanzadas ‚Äî <a href="#" onclick="event.preventDefault();document.querySelector('.pricing-card.featured').scrollIntoView({behavior:'smooth'})" style="color:#C084FC;text-decoration:none;font-weight:700">Ver Plus ‚Üí</a></div>
          </div>
        </div>
        <div style="max-width:320px;margin:0 auto 24px;position:relative;z-index:1;padding:0 8px">
          <div style="font-size:11px;color:rgba(255,255,255,.4);font-weight:700;letter-spacing:2px;text-transform:uppercase;margin-bottom:10px;text-align:center">Toca para jugar</div>
          <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:6px;width:100%">
            <div onclick="switchView('ritnome')" style="cursor:pointer;background:linear-gradient(135deg,rgba(107,33,168,.4),rgba(147,51,234,.3));border:1px solid rgba(147,51,234,.3);border-radius:12px;padding:10px 4px;text-align:center;transition:all .2s">
              <div style="font-size:22px;margin-bottom:3px">ü•Å</div>
              <div style="font-family:var(--head);font-size:10px;color:white;letter-spacing:1px">CONGA</div>
              <div style="font-size:8px;color:rgba(255,255,255,.4);margin-top:1px">Ritmo</div>
            </div>
            <div onclick="switchView('sopa')" style="cursor:pointer;background:linear-gradient(135deg,rgba(46,125,82,.4),rgba(46,125,82,.3));border:1px solid rgba(46,125,82,.3);border-radius:12px;padding:10px 4px;text-align:center;transition:all .2s">
              <div style="font-size:22px;margin-bottom:3px">üî§</div>
              <div style="font-family:var(--head);font-size:10px;color:white;letter-spacing:1px">SOPA</div>
              <div style="font-size:8px;color:rgba(255,255,255,.4);margin-top:1px">Palabras</div>
            </div>
            <div onclick="switchView('domino')" style="cursor:pointer;background:linear-gradient(135deg,rgba(138,108,44,.4),rgba(196,162,88,.3));border:1px solid rgba(196,162,88,.3);border-radius:12px;padding:10px 4px;text-align:center;transition:all .2s">
              <div style="font-size:22px;margin-bottom:3px">üÅÉ</div>
              <div style="font-family:var(--head);font-size:10px;color:white;letter-spacing:1px">DOMIN√ì</div>
              <div style="font-size:8px;color:rgba(255,255,255,.4);margin-top:1px">Math</div>
            </div>
            <div onclick="switchView('ritnome')" style="cursor:pointer;background:linear-gradient(135deg,rgba(147,51,234,.4),rgba(168,85,247,.3));border:1px solid rgba(168,85,247,.3);border-radius:12px;padding:10px 4px;text-align:center;transition:all .2s">
              <div style="font-size:22px;margin-bottom:3px">üéµ</div>
              <div style="font-family:var(--head);font-size:10px;color:white;letter-spacing:1px">RITNOME</div>
              <div style="font-size:8px;color:rgba(255,255,255,.4);margin-top:1px">5 juegos</div>
            </div>
          </div>
        </div>
        <button class="ai-hero-btn ai-hero-btn-big" onclick="toggleChat()">üëã ¬°Hola Bori! ‚Äî Gratis</button>
        <div class="ai-hero-hint">$0 ¬∑ Sin registro ¬∑ Empieza ahora üíõ</div>
      </div>

      <div class="ai-trust">
        <div class="ai-trust-icon">üíú</div>
        <p class="ai-trust-text">Bori no es doctora ni enfermera ‚Äî es tu compa√±era digital. Te acompa√±a, te organiza, y mantiene a tu familia tranquila. Siempre aqu√≠, siempre contigo. üíú</p>
      </div>

      <div class="section-divider"><div class="section-divider-line"></div><span class="section-divider-text">Planes</span><div class="section-divider-line"></div></div>

      <div class="pricing-header">
        <div class="pricing-header-h">Hey Bori cuida a tu familia.</div>
        <div class="pricing-header-sub">Menos de lo que cuesta un caf√© al d√≠a.</div>
      </div>

      <div class="pricing-card featured">
        <div class="pricing-tier" style="color:#7C3AED">Recomendado</div>
        <div class="pricing-name">Bori Plus</div>
        <div class="pricing-price">$9<span>.99/mes</span></div>
        <div class="pricing-desc">Tu mam√° tiene a Bori. T√∫ tienes tranquilidad. üíú</div>
        <ul class="pricing-features">
          <li><span class="pricing-check">‚úì</span>üí¨ <strong>Bori 24/7 ‚Äî Nunca Sola</strong> ‚Äî conversaciones ILIMITADAS, d√≠a y noche</li>
          <li><span class="pricing-check">‚úì</span>ü•Å <strong>Conga completa</strong> ‚Äî 5 tambores, 5 modos, 6 ritmos, 3 velocidades</li>
          <li><span class="pricing-check">‚úì</span>üî§ <strong>Sopa de Letras</strong> ‚Äî todas las categor√≠as desbloqueadas</li>
          <li><span class="pricing-check">‚úì</span>üÅÉ <strong>Domin√≥ Math</strong> ‚Äî todos los niveles de dificultad</li>
          <li><span class="pricing-check">‚úì</span>üéµ <strong>5 juegos Ritnome‚Ñ¢</strong> ‚Äî TODAS las velocidades: Training, Tempo, Elite</li>
          <li><span class="pricing-check">‚úì</span>üèÜ Badges, rachas, y logros ilimitados</li>
          <li><span class="pricing-check">‚úì</span>üë®‚Äçüë©‚Äçüëß <strong>1 familiar conectado</strong> ‚Äî ve la actividad de mam√° cada d√≠a</li>
        </ul>
        <div class="legal-check"><input type="checkbox" id="plusAgree" onchange="toggleFamBtn('plusAgree','plusBtn')"><label for="plusAgree">Acepto la <a href="/privacy.html" target="_blank">Pol√≠tica de Privacidad</a> y los <a href="/terms.html" target="_blank">T√©rminos de Uso</a></label></div>
        <button class="pricing-btn pricing-btn-pro" id="plusBtn" onclick="subscribePlan('plus')" disabled>Reg√°lale Bori a Mam√° üíú</button>
      </div>

      <div class="pricing-card">
        <div class="pricing-tier" style="color:var(--gold)">Para Toda la Familia</div>
        <div class="pricing-name">Bori Familia</div>
        <div class="pricing-price">$19<span>.99/mes</span></div>
        <div class="pricing-desc">Toda la familia conectada. Todos tranquilos. üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
        <ul class="pricing-features">
          <li><span class="pricing-check">‚úì</span>üí¨ü•Åüî§üÅÉüéµ <strong>Todo lo de Bori Plus</strong> ‚Äî Bori 24/7, todos los juegos, sin restricciones</li>
          <li><span class="pricing-check">‚úì</span>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ <strong>Hasta 6 familiares conectados</strong> ‚Äî hermanos, primos, nietos</li>
          <li><span class="pricing-check">‚úì</span>üìä <strong>Dashboard familiar compartido</strong> ‚Äî todos ven la actividad de mam√°</li>
          <li><span class="pricing-check">‚úì</span>üîî <strong>Alertas autom√°ticas</strong> ‚Äî si mam√° no usa Bori en el d√≠a, te avisa</li>
          <li><span class="pricing-check">‚úì</span>üìã <strong>Reporte semanal</strong> ‚Äî resumen de bienestar directo a tu tel√©fono</li>
          <li><span class="pricing-check">‚úì</span>‚≠ê <strong>Soporte prioritario 24/7</strong> ‚Äî siempre hay alguien para ayudarte</li>
        </ul>
        <div class="legal-check"><input type="checkbox" id="familiaAgree" onchange="toggleFamBtn('familiaAgree','familiaBtn')"><label for="familiaAgree">Acepto la <a href="/privacy.html" target="_blank">Pol√≠tica de Privacidad</a> y los <a href="/terms.html" target="_blank">T√©rminos de Uso</a></label></div>
        <button class="pricing-btn pricing-btn-fam" id="familiaBtn" onclick="subscribePlan('familia')" disabled>Conectar a Mi Familia üë®‚Äçüë©‚Äçüëß</button>
      </div>

      <div class="pricing-note">Bori es gratis con 5 conversaciones al d√≠a. Plus y Familia desbloquean <strong>Bori 24/7 ‚Äî Nunca Sola.</strong> üáµüá∑<br>8 juegos. Todo en espa√±ol boricua. Sin contratos. Cancela cuando quieras.</div>

      <div class="section-divider"><div class="section-divider-line"></div><span class="section-divider-text">Mi Suscripci√≥n</span><div class="section-divider-line"></div></div>

      <div class="manage-sub">
        <div class="manage-sub-title">Administrar Suscripci√≥n</div>
        <div class="manage-sub-desc">Cambia tu plan, actualiza tu pago, o cancela cuando quieras.</div>
        <input class="manage-sub-input" id="managePhone" type="tel" placeholder="Tu n√∫mero de tel√©fono" inputmode="tel">
        <button class="manage-sub-btn" id="manageBtn" onclick="openPortal()">Administrar Mi Plan ‚Üí</button>
        <div class="manage-sub-msg" id="manageMsg"></div>
      </div>

    </div>

    <!-- CONSENT BANNER -->
    <div class="consent-banner" id="consentBanner" style="display:none">
      <div class="consent-text">Este sitio usa almacenamiento local para mejorar tu experiencia. Al continuar, aceptas nuestra <a href="/privacy.html" target="_blank">Pol√≠tica de Privacidad</a> y <a href="/terms.html" target="_blank">T√©rminos de Uso</a>.</div>
      <button class="consent-btn" onclick="acceptConsent()">Aceptar</button>
    </div>

    <!-- ‚ïê‚ïê‚ïê RITNOME‚Ñ¢ VIEW ‚ïê‚ïê‚ïê -->
    <div id="ritnomeView" class="hidden">
      <div class="rit-hero">
        <div class="rit-badge"><span class="rit-badge-dot"></span> Fitness Cognitivo</div>
        <div class="rit-logo">RITNOME</div>
        <div class="rit-tm">‚Ñ¢ MOTOR DE FITNESS COGNITIVO</div>
        <div class="rit-tagline">Entrena tu mente. A tu ritmo.</div>
        <div class="rit-score-row">
          <div class="rit-score-stat"><div class="rit-score-val">847</div><div class="rit-score-label">Puntuaci√≥n</div></div>
          <div class="rit-score-stat"><div class="rit-score-val">12</div><div class="rit-score-label">D√≠as Racha</div></div>
          <div class="rit-score-stat"><div class="rit-score-val">5</div><div class="rit-score-label">Juegos Live</div></div>
        </div>
      </div>
      <!-- ‚ïê‚ïê‚ïê CONGA HERO ‚ïê‚ïê‚ïê -->
      <a href="/the-conga" style="text-decoration:none;display:block;-webkit-tap-highlight-color:transparent">
      <div class="conga-hero">
        <div class="conga-hero-glow"></div>
        <div class="conga-hero-badge">üî• JUEGO PRINCIPAL</div>
        <div class="conga-hero-drums">
          <span class="conga-drum d1">ü•Å</span>
          <span class="conga-drum d2">ü•Å</span>
          <span class="conga-drum d3">ü•Å</span>
        </div>
        <div class="conga-hero-title">CONGA</div>
        <div class="conga-hero-sub">Toca al ritmo ¬∑ Siente la m√∫sica ¬∑ Entrena tu mente</div>
        <div class="conga-hero-genres">
          <span class="conga-genre">Reggaet√≥n</span>
          <span class="conga-genre">Bomba</span>
          <span class="conga-genre">Plena</span>
          <span class="conga-genre">Salsa</span>
          <span class="conga-genre">Clave</span>
          <span class="conga-genre">Merengue</span>
        </div>
        <a href="/the-conga" class="conga-hero-btn" onclick="window.location.href='/the-conga'" style="text-decoration:none">
          <span class="conga-hero-btn-icon">‚ñ∂</span> JUGAR CONGA
        </a>
        <div class="conga-hero-modes">5 Modos ¬∑ 3 Tempos ¬∑ Logros ¬∑ Ranking</div>
      </div></a>

      <!-- ‚ïê‚ïê‚ïê STARTING FIVE STRIP ‚ïê‚ïê‚ïê -->
      <div class="s5-strip">
        <div class="s5-strip-label">üèÄ The Starting Five</div>
        <div class="s5-strip-row">
          <a href="/the-recall" class="s5-mini" style="--sc:#BB86FC;--s5bg:rgba(155,89,182,.08);--s5bc:rgba(155,89,182,.2);--s5glow:rgba(155,89,182,.15)">
            <span class="s5-mini-icon">üß†</span><span class="s5-mini-name">Recall</span><span class="s5-mini-desc">Memoria</span>
          </a>
          <a href="/the-react" class="s5-mini" style="--sc:#FF6B35;--s5bg:rgba(255,107,53,.08);--s5bc:rgba(255,107,53,.2);--s5glow:rgba(255,107,53,.15)">
            <span class="s5-mini-icon">‚ö°</span><span class="s5-mini-name">React</span><span class="s5-mini-desc">Velocidad</span>
          </a>
          <a href="/the-reflex" class="s5-mini" style="--sc:#00CED1;--s5bg:rgba(0,206,209,.08);--s5bc:rgba(0,206,209,.2);--s5glow:rgba(0,206,209,.15)">
            <span class="s5-mini-icon">üëÅÔ∏è</span><span class="s5-mini-name">Reflex</span><span class="s5-mini-desc">Reflejos</span>
          </a>
          <a href="/the-replay" class="s5-mini" style="--sc:#00D9A5;--s5bg:rgba(0,217,165,.08);--s5bc:rgba(0,217,165,.2);--s5glow:rgba(0,217,165,.15)">
            <span class="s5-mini-icon">üéµ</span><span class="s5-mini-name">Replay</span><span class="s5-mini-desc">Patrones</span>
          </a>
          <a href="/the-ritmo" class="s5-mini" style="--sc:#9ACD32;--s5bg:rgba(154,205,50,.08);--s5bc:rgba(154,205,50,.2);--s5glow:rgba(154,205,50,.15)">
            <span class="s5-mini-icon">üëÇ</span><span class="s5-mini-name">Ritmo</span><span class="s5-mini-desc">O√≠do</span>
          </a>
        </div>
      </div>
      <div class="rit-powered"><div class="rit-powered-text">Hey Bori‚Ñ¢ ¬∑ Ritnome‚Ñ¢</div><div style="font-size:9px;font-weight:600;color:var(--light);letter-spacing:1px;margin-top:4px;opacity:.6">¬© 2026 GoStar Digital LLC. All Rights Reserved.</div></div>
    </div>

    <!-- ‚ïê‚ïê‚ïê SOPA DE LETRAS VIEW ‚ïê‚ïê‚ïê -->
    <div id="sopaView" class="hidden">
      <div class="sopa-hero">
        <div class="sopa-badge">üî§ Fitness Cognitivo</div>
        <div class="sopa-title">Sopa de Letras</div>
        <div class="sopa-sub">Palabras Boricuas ¬∑ Entrena tu mente üáµüá∑</div>
        <div class="sopa-stats">
          <div><div class="sopa-stat-val" id="sopaFound">0</div><div class="sopa-stat-label">Encontradas</div></div>
          <div><div class="sopa-stat-val" id="sopaTotal">0</div><div class="sopa-stat-label">Total</div></div>
          <div><div class="sopa-stat-val" id="sopaTime">0:00</div><div class="sopa-stat-label">Tiempo</div></div>
        </div>
      </div>
      <div class="sopa-cat-section" id="sopaCatSection">
        <div class="sopa-cat-h">Escoge una categor√≠a</div>
        <div class="sopa-cat-grid">
          <button class="sopa-cat-btn active" onclick="selectSopaCat('comida')"><span class="sopa-cat-icon">üçΩÔ∏è</span>Comida</button>
          <button class="sopa-cat-btn" onclick="selectSopaCat('musica')"><span class="sopa-cat-icon">üéµ</span>M√∫sica</button>
          <button class="sopa-cat-btn" onclick="selectSopaCat('pueblos')"><span class="sopa-cat-icon">üèòÔ∏è</span>Pueblos</button>
          <button class="sopa-cat-btn" onclick="selectSopaCat('cultura')"><span class="sopa-cat-icon">üáµüá∑</span>Cultura</button>
          <button class="sopa-cat-btn" onclick="selectSopaCat('naturaleza')"><span class="sopa-cat-icon">üå¥</span>Naturaleza</button>
          <button class="sopa-cat-btn" onclick="selectSopaCat('familia')"><span class="sopa-cat-icon">üë®‚Äçüë©‚Äçüëß</span>Familia</button>
        </div>
      </div>
      <div class="sopa-game" id="sopaGame" style="display:none">
        <div class="sopa-grid-wrap"><div class="sopa-grid" id="sopaGrid"></div></div>
        <div class="sopa-words" id="sopaWords"></div>
        <div class="sopa-found-msg" id="sopaMsg">üéâ ¬°Wepa! ¬°Las encontraste todas!</div>
        <div class="sopa-actions">
          <button class="sopa-btn sopa-btn-hint" onclick="sopaClearSelection()">‚úï Borrar</button>
          <button class="sopa-btn sopa-btn-hint" onclick="sopaHint()">üí° Pista</button>
          <button class="sopa-btn sopa-btn-new" onclick="newSopa()">üîÑ Nuevo Juego</button>
        </div>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê DOMIN√ì MATH VIEW ‚ïê‚ïê‚ïê -->
    <div id="dominoView" class="hidden">
      <div class="dom-hero">
        <div class="dom-badge">üéØ Fitness Cognitivo</div>
        <div class="dom-title">Domin√≥ Math</div>
        <div class="dom-sub">Resuelve y empareja ¬∑ Entrena tu mente üáµüá∑</div>
        <div class="dom-stats">
          <div><div class="dom-stat-val" id="domScore">0</div><div class="dom-stat-label">Puntos</div></div>
          <div><div class="dom-stat-val" id="domRound">1</div><div class="dom-stat-label">Ronda</div></div>
          <div><div class="dom-stat-val" id="domBest">0</div><div class="dom-stat-label">Racha</div></div>
        </div>
      </div>
      <div class="dom-levels" id="domLevels">
        <div class="dom-levels-title">Escoge tu nivel</div>
        <button class="dom-lvl-btn dom-lvl-active" onclick="selectDomLevel(1)" id="domLvl1"><span class="dom-lvl-icon">üü¢</span><span class="dom-lvl-name">F√°cil</span><span class="dom-lvl-desc">Suma ¬∑ 1 al 15</span></button>
        <button class="dom-lvl-btn" onclick="selectDomLevel(2)" id="domLvl2"><span class="dom-lvl-icon">üü°</span><span class="dom-lvl-name">Medio</span><span class="dom-lvl-desc">Suma y Resta ¬∑ 1 al 25</span></button>
        <button class="dom-lvl-btn" onclick="selectDomLevel(3)" id="domLvl3"><span class="dom-lvl-icon">üü†</span><span class="dom-lvl-name">Dif√≠cil</span><span class="dom-lvl-desc">Suma, Resta, Multiplicaci√≥n ¬∑ 1 al 30</span></button>
        <button class="dom-lvl-btn" onclick="selectDomLevel(4)" id="domLvl4"><span class="dom-lvl-icon">üî¥</span><span class="dom-lvl-name">Experto</span><span class="dom-lvl-desc">Todo + Divisi√≥n ¬∑ N√∫meros grandes</span></button>
      </div>
      <div class="dom-game" id="domGame">
        <div style="text-align:center;margin-bottom:12px"><span class="dom-lvl-badge dom-lvl-badge-1" id="domLvlBadge">üü¢ F√°cil ¬∑ Suma</span></div>
        <div class="dom-question"><div class="dom-tile"><div class="dom-tile-half dom-tile-left"><span class="dom-tile-eq" id="domEq">3 + 4</span></div><div class="dom-tile-half dom-tile-right"><span class="dom-tile-q">?</span></div></div></div>
        <div class="dom-answers" id="domAnswers"></div>
        <div class="dom-feedback" id="domFeedback"></div>
        <div class="dom-streak" id="domStreak" style="display:none">üî• Racha: <span id="domStreakVal">0</span></div>
        <div class="dom-badges" id="domBadges"></div>
        <div class="dom-actions">
          <button class="dom-btn dom-btn-reset" onclick="backToLevels()">‚Üê Niveles</button>
          <button class="dom-btn dom-btn-next" onclick="resetDomino()">üîÑ Nuevo Juego</button>
        </div>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê FAMILIA VIEW ‚ïê‚ïê‚ïê -->
    <div id="familiaView" class="hidden">
      <div class="fam-hero">
        <div class="fam-badge">üë®‚Äçüë©‚Äçüëß Tu Familia Tranquila</div>
        <div class="fam-title">Familia</div>
        <div class="fam-sub">Tu mam√° tiene a Bori. T√∫ tienes tranquilidad. üíú</div>
      </div>
      <div class="fam-card" id="famSetup">
        <div class="fam-card-title">¬øQui√©n eres?</div>
        <button class="fam-btn fam-btn-primary" onclick="showFamRole('mama')" style="margin-bottom:10px">üëµ Soy la persona mayor ‚Äî quiero conectar a mi familia</button>
        <button class="fam-btn" style="background:rgba(124,58,237,.08);color:#7C3AED;border:2px solid rgba(124,58,237,.15)" onclick="showFamRole('hijo')">üë®‚Äçüë©‚Äçüëß Soy familiar ‚Äî quiero ver c√≥mo est√° mam√°/pap√°</button>
      </div>
      <div class="fam-card" id="famMamaSetup" style="display:none">
        <div class="fam-card-title">Configura tu conexi√≥n familiar üíú</div>
        <div class="fam-setup-label">Tu nombre</div>
        <input class="fam-input" id="famName" type="text" placeholder="Ej: Rosa, Abuela Mar√≠a...">
        <div class="fam-setup-label">Tu n√∫mero de tel√©fono</div>
        <input class="fam-input" id="famPhone" type="tel" placeholder="787-555-1234" inputmode="tel">
        <div class="fam-setup-label">Crea un PIN familiar (4-6 d√≠gitos)</div>
        <div class="fam-setup-desc">Tu familia usar√° tu n√∫mero + este PIN para ver tu actividad</div>
        <input class="fam-input" id="famPin" type="number" placeholder="Ej: 1234" maxlength="6" inputmode="numeric">
        <div class="fam-setup-label" style="margin-top:12px">C√≥digo de organizaci√≥n <span style="font-weight:400;color:var(--light)">(opcional)</span></div>
        <div class="fam-setup-desc">Si participas en un programa o vives en un hogar de cuido, pide el c√≥digo al personal</div>
        <input class="fam-input" id="famFacilityCode" type="text" placeholder="Ej: VIDA-1234" style="text-transform:uppercase;letter-spacing:2px">
        <div class="legal-check"><input type="checkbox" id="famMamaAgree" onchange="toggleFamBtn('famMamaAgree','famMamaBtn')"><label for="famMamaAgree">Acepto la <a href="/privacy.html" target="_blank">Pol√≠tica de Privacidad</a> y los <a href="/terms.html" target="_blank">T√©rminos de Uso</a></label></div>
        <button class="fam-btn fam-btn-primary" id="famMamaBtn" onclick="saveFamSetup()" disabled>Guardar y Activar üíú</button>
        <div class="fam-msg" id="famSetupMsg"></div>
        <button class="fam-back-btn" onclick="showFamRole('back')">‚Üê Atr√°s</button>
      </div>
      <div class="fam-card" id="famHijoLogin" style="display:none">
        <div class="fam-card-title">Mira c√≥mo est√° tu familia üíö</div>
        <div class="fam-setup-label">N√∫mero de mam√°/pap√°</div>
        <input class="fam-input" id="famLoginPhone" type="tel" placeholder="787-555-1234" inputmode="tel">
        <div class="fam-setup-label">PIN familiar</div>
        <input class="fam-input" id="famLoginPin" type="number" placeholder="PIN de 4-6 d√≠gitos" inputmode="numeric">
        <div class="legal-check"><input type="checkbox" id="famHijoAgree" onchange="toggleFamBtn('famHijoAgree','famHijoBtn')"><label for="famHijoAgree">Acepto la <a href="/privacy.html" target="_blank">Pol√≠tica de Privacidad</a> y los <a href="/terms.html" target="_blank">T√©rminos de Uso</a></label></div>
        <button class="fam-btn fam-btn-primary" id="famHijoBtn" onclick="loadFamDashboard()" disabled>Ver Actividad üíö</button>
        <div class="fam-msg" id="famLoginMsg"></div>
        <button class="fam-back-btn" onclick="showFamRole('back')">‚Üê Atr√°s</button>
      </div>
      <div class="fam-dash" id="famDash">
        <div class="fam-card">
          <div class="fam-status" id="famStatus"></div>
          <div class="fam-today-stats">
            <div class="fam-today-stat"><div class="fam-today-stat-icon">üí¨</div><div class="fam-today-stat-val" id="famTodayChats">0</div><div class="fam-today-stat-label">Chats hoy</div></div>
            <div class="fam-today-stat"><div class="fam-today-stat-icon">üéÆ</div><div class="fam-today-stat-val" id="famTodayGames">0</div><div class="fam-today-stat-label">Juegos hoy</div></div>
            <div class="fam-today-stat"><div class="fam-today-stat-icon">üèÖ</div><div class="fam-today-stat-val" id="famTodayBadges">0</div><div class="fam-today-stat-label">Badges hoy</div></div>
          </div>
          <div class="fam-card-title">√öltimos 7 d√≠as</div>
          <div class="fam-week" id="famWeek"></div>
          <div class="fam-totals">
            <div class="fam-total"><div class="fam-total-val" id="famTotalChats">0</div><div class="fam-total-label">Chats total</div></div>
            <div class="fam-total"><div class="fam-total-val" id="famTotalGames">0</div><div class="fam-total-label">Juegos total</div></div>
            <div class="fam-total"><div class="fam-total-val" id="famStreak">0</div><div class="fam-total-label">üî• Racha d√≠as</div></div>
            <div class="fam-total"><div class="fam-total-val" id="famTotalDays">0</div><div class="fam-total-label">D√≠as activa</div></div>
          </div>
          <div class="fam-card-title" style="margin-top:16px">Badges recientes üèÖ</div>
          <div class="fam-badges-list" id="famBadgesList"><span style="color:rgba(17,24,39,.4);font-size:13px">Ning√∫n badge a√∫n</span></div>
        </div>
        <button class="fam-btn" style="background:rgba(124,58,237,.08);color:#7C3AED;border:2px solid rgba(124,58,237,.15);margin-top:8px" onclick="famLogout()">‚Üê Cambiar usuario</button>
      </div>
    </div>

    <div class="footer"><div class="footer-b">HEY BORI‚Ñ¢</div><div class="footer-s">tu compa√±era boricua üáµüá∑</div><div style="margin-top:10px;font-size:11px;font-weight:600;color:var(--light);letter-spacing:.5px">Ritnome‚Ñ¢ ¬∑ ¬© 2026 GoStar Digital LLC. All Rights Reserved.</div><div style="margin-top:14px;font-size:13px;font-weight:600;text-align:center"><a href="/privacy.html" style="color:#5A6172;text-decoration:none">Pol√≠tica de Privacidad</a> &nbsp;¬∑&nbsp; <a href="/terms.html" style="color:#5A6172;text-decoration:none">T√©rminos de Uso</a> &nbsp;¬∑&nbsp; <a href="/organizaciones" style="color:#7C3AED;text-decoration:none">üè• Organizaciones</a></div></div>
    <button class="fab-chat" id="fabChat" onclick="toggleChat()">üí¨</button>

    <div class="chat-overlay" id="chatOverlay">
      <div class="chat-box">
        <div class="chat-header">
          <div class="chat-header-avatar"><img src="/icon.png" alt="Bori" style="width:40px;height:40px;object-fit:cover;border-radius:50%"></div>
          <div class="chat-header-info">
            <div class="chat-header-name">Bori</div>
            <div class="chat-header-status"><span class="chat-header-dot"></span> <span id="chatStatusText">En l√≠nea ¬∑ Tu compa√±era boricua</span></div>
          </div>
          <button class="chat-tts-toggle active" id="ttsToggle" onclick="toggleTTS()" title="Voz de Bori">üîä</button>
          <button class="chat-close" onclick="toggleChat()">‚úï</button>
        </div>
        <div class="chat-messages" id="chatMessages">
          <div class="chat-msg bot">¬°Hey! üëã Soy Bori. ¬øC√≥mo te sientes hoy?</div>
          <div class="mood-picker" id="moodPicker">
            <div class="mood-option" onclick="pickMood('feliz','üòä','Feliz')"><div class="mood-emoji">üòä</div><div class="mood-label">Feliz</div></div>
            <div class="mood-option" onclick="pickMood('tranquila','üòå','Tranquila')"><div class="mood-emoji">üòå</div><div class="mood-label">Tranquila</div></div>
            <div class="mood-option" onclick="pickMood('aburrida','üòê','Aburrida')"><div class="mood-emoji">üòê</div><div class="mood-label">Aburrida</div></div>
            <div class="mood-option" onclick="pickMood('cansada','üò¥','Cansada')"><div class="mood-emoji">üò¥</div><div class="mood-label">Cansada</div></div>
            <div class="mood-option" onclick="pickMood('triste','üò¢','Triste')"><div class="mood-emoji">üò¢</div><div class="mood-label">Triste</div></div>
            <div class="mood-option" onclick="pickMood('animada','ü•≥','Animada')"><div class="mood-emoji">ü•≥</div><div class="mood-label">Animada</div></div>
          </div>
        </div>
        <div class="chat-input-wrap">
          <button class="chat-home-btn" onclick="resetChat()">‚ü≥</button>
          <input class="chat-input" id="chatInput" type="text" placeholder="Escribe aqu√≠..." onkeydown="if(event.key==='Enter')sendChat()">
          <button class="chat-send" id="chatSend" onclick="sendChat()">‚Üí</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê FAMILY NUDGE (SHARED) ‚ïê‚ïê‚ïê -->
  <div class="hb-family-nudge" id="hbFamilyNudge">
    <div class="hb-nudge-close" id="hbNudgeClose">‚úï</div>
    <div class="hb-nudge-emoji" id="hbNudgeEmoji">üíõ</div>
    <div class="hb-nudge-text" id="hbNudgeText">¬øTu familia sabe lo bien que juegas?</div>
    <a href="#" class="hb-nudge-btn" id="hbNudgeBtn">Conecta con tu familia ‚Üí</a>
  </div>

  <script>
    let soundOn=true,currentView='servicios';

    /* ‚ïê‚ïê‚ïê CONSENT BANNER ‚ïê‚ïê‚ïê */
    (function(){if(!localStorage.getItem('boriConsent')){document.getElementById('consentBanner').style.display='flex';}})();
    function acceptConsent(){localStorage.setItem('boriConsent','accepted');document.getElementById('consentBanner').style.display='none';}

    /* ‚ïê‚ïê‚ïê MANAGE SUBSCRIPTION PORTAL ‚ïê‚ïê‚ïê */
    function openPortal(){var phone=document.getElementById('managePhone').value.replace(/[^0-9]/g,'');var msg=document.getElementById('manageMsg');var btn=document.getElementById('manageBtn');if(phone.length<7){msg.textContent='Escribe tu n√∫mero de tel√©fono';msg.style.color='#E53E3E';return;}btn.textContent='Cargando...';btn.style.pointerEvents='none';msg.textContent='';fetch('/api/subscription/portal',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({phone:phone})}).then(function(r){return r.json();}).then(function(data){if(data.url){window.location.href=data.url;}else{msg.textContent=data.error||'No se encontr√≥ suscripci√≥n con este n√∫mero';msg.style.color='#E53E3E';btn.textContent='Administrar Mi Plan ‚Üí';btn.style.pointerEvents='auto';}}).catch(function(){msg.textContent='Error de conexi√≥n. Intenta de nuevo.';msg.style.color='#E53E3E';btn.textContent='Administrar Mi Plan ‚Üí';btn.style.pointerEvents='auto';});}

    function switchView(v){
      currentView=v;
      window.location.hash=v;
      document.getElementById('serviciosView').classList.toggle('hidden',v!=='servicios');
      document.getElementById('ritnomeView').classList.toggle('hidden',v!=='ritnome');
      document.getElementById('sopaView').classList.toggle('hidden',v!=='sopa');
      document.getElementById('dominoView').classList.toggle('hidden',v!=='domino');
      document.getElementById('familiaView').classList.toggle('hidden',v!=='familia');
      document.getElementById('viewServicios').className='view-btn'+(v==='servicios'?' act':'');
      document.getElementById('viewRitnome').className='view-btn'+(v==='ritnome'?' act rit-active':'');
      document.getElementById('viewSopa').className='view-btn'+(v==='sopa'?' act sopa-active':'');
      document.getElementById('viewDomino').className='view-btn'+(v==='domino'?' act domino-active':'');
      document.getElementById('viewFamilia').className='view-btn'+(v==='familia'?' act fam-active':'');
      window.scrollTo(0,0);
      if(v==='sopa'&&!sopaGenerated)generateSopa();
    }

    var _initHash=window.location.hash.replace('#','');
    if(['servicios','ritnome','sopa','domino','familia'].indexOf(_initHash)>-1){switchView(_initHash)}

    /* Conga hero tap fallback for mobile */
    var congaHero=document.querySelector('.conga-hero');
    if(congaHero)congaHero.addEventListener('click',function(){window.location.href='/the-conga';});

    /* ‚ïê‚ïê‚ïê SOPA DE LETRAS GAME ENGINE ‚ïê‚ïê‚ïê */
    const SOPA_WORDS={comida:['MOFONGO','TOSTONES','ARROZ','HABICHUELAS','LECHON','ALCAPURRIA','SORULLITO','TEMBLEQUE','COQUITO','GUINEO','PLATANO','BACALAO','ASOPAO','PASTELES','AMARILLO'],musica:['SALSA','BOMBA','PLENA','REGGAETON','GUIRO','CONGA','MARACAS','CLAVE','BONGO','TIMBAL','CUATRO','TROVA','RUMBA','MERENGUE','BOLERO'],pueblos:['PONCE','BAYAMON','CAGUAS','ARECIBO','MAYAGUEZ','HUMACAO','FAJARDO','RINCON','ADJUNTAS','LOIZA','VIEQUES','CULEBRA','YAUCO','GUANICA','ISABELA'],cultura:['COQUI','VEJIGANTE','JIBARO','BORICUA','TAINO','HAMACA','GUAYABERA','PILONES','DOMINOES','NAVIDAD','PARRANDAS','CHINCHORRO','BONITA','WEPA','BENDITO'],naturaleza:['FLAMBOYAN','CEIBA','YUNQUE','MANGLAR','COQUI','PALMA','MANGO','GUAYABA','PAPAYA','COLIBRI','IGUANA','PLAYA','CORAL','LAGUNA','CASCADA'],familia:['ABUELA','ABUELO','MAMA','PAPA','HERMANA','HERMANO','PRIMA','PRIMO','TIA','TIO','NIETA','NIETO','COMADRE','COMPADRE','FAMILIA']};
    let sopaGenerated=false,sopaCurrentCat='comida',sopaGrid=[],sopaWordList=[],sopaFoundWords=[],sopaPlaced=[],sopaSelected=[],sopaTimer=null,sopaSeconds=0;
    const SOPA_SIZE=10;const SOPA_COLORS=['found','found-alt','found-alt2','found-alt3','found-alt4','found-alt5'];let sopaColorIdx=0;

    function selectSopaCat(cat){sopaCurrentCat=cat;document.querySelectorAll('.sopa-cat-btn').forEach(b=>b.classList.remove('active'));event.currentTarget.classList.add('active');generateSopa();}
    function newSopa(){generateSopa();}

    function generateSopa(){sopaGenerated=true;sopaFoundWords=[];sopaColorIdx=0;document.getElementById('sopaGame').style.display='block';document.getElementById('sopaMsg').style.display='none';const pool=SOPA_WORDS[sopaCurrentCat]||SOPA_WORDS.comida;const shuffled=[...pool].sort(()=>Math.random()-.5);sopaWordList=[];sopaPlaced=[];sopaGrid=Array.from({length:SOPA_SIZE},()=>Array(SOPA_SIZE).fill(''));const dirs=[[0,1],[1,0],[1,1],[0,-1],[1,-1]];for(const word of shuffled){if(sopaWordList.length>=8)break;const w=word.replace(/[^A-Z√Å√â√ç√ì√ö√ëa-z√°√©√≠√≥√∫√±]/g,'').toUpperCase();if(w.length>SOPA_SIZE)continue;let placed=false;for(let attempt=0;attempt<80&&!placed;attempt++){const d=dirs[Math.floor(Math.random()*dirs.length)];const maxR=SOPA_SIZE-(d[0]>0?w.length:d[0]<0?0:0);const maxC=SOPA_SIZE-(d[1]>0?w.length:d[1]<0?0:0);const minR=d[0]<0?w.length-1:0;const minC=d[1]<0?w.length-1:0;if(maxR<=minR||maxC<=minC)continue;const r=minR+Math.floor(Math.random()*(maxR-minR));const c=minC+Math.floor(Math.random()*(maxC-minC));let ok=true;const cells=[];for(let i=0;i<w.length;i++){const nr=r+i*d[0],nc=c+i*d[1];if(nr<0||nr>=SOPA_SIZE||nc<0||nc>=SOPA_SIZE){ok=false;break;}if(sopaGrid[nr][nc]!==''&&sopaGrid[nr][nc]!==w[i]){ok=false;break;}cells.push([nr,nc]);}if(ok){for(let i=0;i<w.length;i++)sopaGrid[cells[i][0]][cells[i][1]]=w[i];sopaPlaced.push({word:w,cells:cells});sopaWordList.push(word);placed=true;}}}const letters='ABCDEFGHIJKLMN√ëOPQRSTUVWXYZ';for(let r=0;r<SOPA_SIZE;r++)for(let c=0;c<SOPA_SIZE;c++)if(sopaGrid[r][c]==='')sopaGrid[r][c]=letters[Math.floor(Math.random()*letters.length)];renderSopaGrid();renderSopaWords();startSopaTimer();document.getElementById('sopaTotal').textContent=sopaWordList.length;document.getElementById('sopaFound').textContent='0';}

    function renderSopaGrid(){const el=document.getElementById('sopaGrid');el.style.gridTemplateColumns=`repeat(${SOPA_SIZE},1fr)`;el.innerHTML='';for(let r=0;r<SOPA_SIZE;r++)for(let c=0;c<SOPA_SIZE;c++){const cell=document.createElement('div');cell.className='sopa-cell';cell.textContent=sopaGrid[r][c];cell.dataset.r=r;cell.dataset.c=c;cell.addEventListener('click',sopaTap);el.appendChild(cell);}}

    function sopaTap(e){const cell=e.target;if(!cell.dataset.r)return;const r=+cell.dataset.r,c=+cell.dataset.c;if(sopaSelected.length>0){const last=sopaSelected[sopaSelected.length-1];if(last.r===r&&last.c===c){cell.classList.remove('selecting');if(cell.dataset.foundClass)cell.classList.add(cell.dataset.foundClass);sopaSelected.pop();return;}}if(sopaSelected.length>0){const last=sopaSelected[sopaSelected.length-1];const dr=r-last.r,dc=c-last.c;if(Math.abs(dr)>1||Math.abs(dc)>1)return;if(sopaSelected.length>=2){const dir0r=sopaSelected[1].r-sopaSelected[0].r,dir0c=sopaSelected[1].c-sopaSelected[0].c;if(dr!==dir0r||dc!==dir0c)return;}if(sopaSelected.find(s=>s.r===r&&s.c===c))return;}sopaSelected.push({r,c});const foundCls=['found','found-alt','found-alt2','found-alt3','found-alt4','found-alt5'].find(fc=>cell.classList.contains(fc));if(foundCls){cell.dataset.foundClass=foundCls;cell.classList.remove(foundCls);}cell.classList.add('selecting');const selectedWord=sopaSelected.map(s=>sopaGrid[s.r][s.c]).join('');const reversedWord=[...selectedWord].reverse().join('');let foundIdx=-1;for(let i=0;i<sopaPlaced.length;i++){if(sopaFoundWords.includes(sopaPlaced[i].word))continue;if(sopaPlaced[i].word===selectedWord||sopaPlaced[i].word===reversedWord){foundIdx=i;break;}}if(foundIdx>=0){const colorClass=SOPA_COLORS[sopaColorIdx%SOPA_COLORS.length];sopaColorIdx++;const pw=sopaPlaced[foundIdx];sopaFoundWords.push(pw.word);document.querySelectorAll('.sopa-cell.selecting').forEach(c=>{c.classList.remove('selecting');delete c.dataset.foundClass;});pw.cells.forEach(([r,c])=>{const cl=document.querySelector(`.sopa-cell[data-r="${r}"][data-c="${c}"]`);if(cl){SOPA_COLORS.forEach(fc=>cl.classList.remove(fc));cl.className='sopa-cell '+colorClass;cl.dataset.foundClass=colorClass;}});playTone('complete');renderSopaWords();sopaSelected=[];document.getElementById('sopaFound').textContent=sopaFoundWords.length;if(sopaFoundWords.length===sopaWordList.length){trackActivity('game',{game:'Sopa de Letras',score:sopaWordList.length,rounds:1});document.getElementById('sopaMsg').style.display='block';clearInterval(sopaTimer);playTone('safe');trackAndNudge('sopa');}}}

    function sopaClearSelection(){document.querySelectorAll('.sopa-cell.selecting').forEach(c=>{c.classList.remove('selecting');if(c.dataset.foundClass){c.classList.add(c.dataset.foundClass);delete c.dataset.foundClass;}});sopaSelected=[];}
    function renderSopaWords(){const el=document.getElementById('sopaWords');el.innerHTML=sopaWordList.map(w=>{const upper=w.replace(/[^A-Z√Å√â√ç√ì√ö√ëa-z√°√©√≠√≥√∫√±]/g,'').toUpperCase();const isFound=sopaFoundWords.includes(upper);return`<span class="sopa-word${isFound?' found':''}">${w}</span>`;}).join('');}
    function sopaHint(){const remaining=sopaPlaced.filter(p=>!sopaFoundWords.includes(p.word));if(remaining.length===0)return;const hint=remaining[Math.floor(Math.random()*remaining.length)];const[r,c]=hint.cells[0];const cell=document.querySelector(`.sopa-cell[data-r="${r}"][data-c="${c}"]`);if(cell){cell.style.background='#FED68A';cell.style.color='#5C4A12';setTimeout(()=>{if(!cell.classList.contains('found')&&!cell.className.includes('found-alt')){cell.style.background='';cell.style.color='';}},2000);}}
    function startSopaTimer(){if(sopaTimer)clearInterval(sopaTimer);sopaSeconds=0;document.getElementById('sopaTime').textContent='0:00';sopaTimer=setInterval(()=>{sopaSeconds++;const m=Math.floor(sopaSeconds/60),s=sopaSeconds%60;document.getElementById('sopaTime').textContent=`${m}:${s<10?'0'+s:s}`;},1000);}

    /* ‚ïê‚ïê‚ïê DOMIN√ì MATH GAME ENGINE ‚ïê‚ïê‚ïê */
    var domScore=0,domRound=1,domStreak=0,domBestStreak=0,domWaiting=false,domLevel=1,domEarnedBadges=[];
    var DOM_CHEERS=['¬°Wepa!','¬°As√≠ mismo!','¬°Eso es!','¬°Tremendo!','¬°Brutal!','¬°Pa\' lante!','¬°Muy bien!','¬°Fenomenal!','¬°Boricua power!','¬°Dale!','¬°Wow!'];
    var DOM_MISS=['Casi...','Intenta otra vez','No te preocupes','T√∫ puedes','¬°La pr√≥xima!'];
    var DOM_LEVEL_INFO=[null,{name:'F√°cil',icon:'üü¢',ops:'Suma',badge:'dom-lvl-badge-1'},{name:'Medio',icon:'üü°',ops:'Suma y Resta',badge:'dom-lvl-badge-2'},{name:'Dif√≠cil',icon:'üü†',ops:'Suma, Resta, Multiplicaci√≥n',badge:'dom-lvl-badge-3'},{name:'Experto',icon:'üî¥',ops:'Todo + Divisi√≥n',badge:'dom-lvl-badge-4'}];
    var DOM_BADGES=[{id:'r5',round:5,icon:'‚≠ê',name:'Primera Estrella',desc:'5 rondas completadas',color:'#C4A258'},{id:'r10',round:10,icon:'üåü',name:'Calentando',desc:'10 rondas',color:'#D97706'},{id:'r25',round:25,icon:'üî•',name:'En Fuego',desc:'25 rondas',color:'#E53E3E'},{id:'r50',round:50,icon:'üíé',name:'Diamante',desc:'50 rondas',color:'#7C3AED'},{id:'r75',round:75,icon:'üëë',name:'Royalty',desc:'75 rondas',color:'#B83D20'},{id:'r100',round:100,icon:'üèÜ',name:'Centenario',desc:'100 rondas',color:'#2E7D52'},{id:'r150',round:150,icon:'üå¥',name:'Imparable',desc:'150 rondas',color:'#0E7490'},{id:'r200',round:200,icon:'üáµüá∑',name:'Orgullo Boricua',desc:'200 rondas',color:'#B83D20'},{id:'r300',round:300,icon:'ü¶Ö',name:'√Åguila',desc:'300 rondas',color:'#4338CA'},{id:'r500',round:500,icon:'üí´',name:'Superestrella',desc:'500 rondas',color:'#C4A258'},{id:'s5',streak:5,icon:'üéØ',name:'Punter√≠a',desc:'5 correctas seguidas',color:'#2E7D52'},{id:'s10',streak:10,icon:'‚ö°',name:'Rayo',desc:'10 correctas seguidas',color:'#D97706'},{id:'s20',streak:20,icon:'üåä',name:'Tsunami',desc:'20 correctas seguidas',color:'#0E7490'},{id:'s50',streak:50,icon:'üî±',name:'Invencible',desc:'50 correctas seguidas',color:'#7C3AED'},{id:'p100',score:100,icon:'üí∞',name:'100 Club',desc:'100 puntos',color:'#C4A258'},{id:'p500',score:500,icon:'üíµ',name:'High Roller',desc:'500 puntos',color:'#2E7D52'},{id:'p1000',score:1000,icon:'üè¶',name:'Millonario',desc:'1,000 puntos',color:'#7C3AED'},{id:'p5000',score:5000,icon:'üíé',name:'Magnate',desc:'5,000 puntos',color:'#B83D20'}];

    function renderDomBadges(){var el=document.getElementById('domBadges');el.innerHTML='';DOM_BADGES.forEach(function(b){var earned=domEarnedBadges.includes(b.id);var pill=document.createElement('span');pill.className='dom-badge-pill'+(earned?' earned':'');pill.style.background=b.color;pill.textContent=b.icon+' '+b.name;pill.title=b.desc;el.appendChild(pill);});}
    function checkDomBadges(){var newBadge=null;DOM_BADGES.forEach(function(b){if(domEarnedBadges.includes(b.id))return;var earned=false;if(b.round&&domRound>b.round)earned=true;if(b.streak&&domStreak>=b.streak)earned=true;if(b.score&&domScore>=b.score)earned=true;if(earned){domEarnedBadges.push(b.id);newBadge=b;}});renderDomBadges();if(newBadge)showBadgePopup(newBadge);}
    function showBadgePopup(badge){trackActivity('badge',{name:badge.name,icon:badge.icon});var popup=document.createElement('div');popup.className='dom-badge-popup';popup.innerHTML='<div class="dom-badge-popup-icon">'+badge.icon+'</div><div class="dom-badge-popup-title">'+badge.name+'</div><div class="dom-badge-popup-desc">'+badge.desc+'</div>';document.body.appendChild(popup);playTone('safe');setTimeout(function(){popup.style.transition='opacity .4s';popup.style.opacity='0';setTimeout(function(){popup.remove();},400);},2000);}
    function selectDomLevel(lvl){domLevel=lvl;document.querySelectorAll('.dom-lvl-btn').forEach(function(b){b.classList.remove('dom-lvl-active');});document.getElementById('domLvl'+lvl).classList.add('dom-lvl-active');domScore=0;domRound=1;domStreak=0;domBestStreak=0;var info=DOM_LEVEL_INFO[lvl];var badge=document.getElementById('domLvlBadge');badge.textContent=info.icon+' '+info.name+' ¬∑ '+info.ops;badge.className='dom-lvl-badge '+info.badge;document.getElementById('domLevels').classList.add('hidden');document.getElementById('domGame').classList.add('active');renderDomBadges();renderDomRound();}
    function backToLevels(){if(domRound>1){trackActivity('game',{game:'Domin√≥ Math',score:domScore,rounds:domRound-1});trackAndNudge('domino');}document.getElementById('domLevels').classList.remove('hidden');document.getElementById('domGame').classList.remove('active');domScore=0;domRound=1;domStreak=0;domBestStreak=0;domEarnedBadges=[];document.getElementById('domScore').textContent='0';document.getElementById('domRound').textContent='1';document.getElementById('domBest').textContent='0';}
    function generateDomProblem(){var a,b,op,answer;var boost=Math.floor((domRound-1)/5);if(domLevel===1){var max=8+boost*3;a=Math.floor(Math.random()*max)+1;b=Math.floor(Math.random()*max)+1;if(boost>=3&&Math.random()<0.3){a=Math.floor(Math.random()*max)+boost+3;b=Math.floor(Math.random()*Math.min(a-1,max))+1;op='‚àí';answer=a-b;}else{op='+';answer=a+b;}}else if(domLevel===2){var max=12+boost*3;var r=Math.random();if(r<0.5){a=Math.floor(Math.random()*max)+2;b=Math.floor(Math.random()*max)+1;op='+';answer=a+b;}else if(r<(boost>=3?0.8:1)){a=Math.floor(Math.random()*max)+boost+5;b=Math.floor(Math.random()*Math.min(a-1,max))+1;op='‚àí';answer=a-b;}else{a=Math.floor(Math.random()*5)+2;b=Math.floor(Math.random()*5)+2;op='√ó';answer=a*b;}}else if(domLevel===3){var max=15+boost*4;var r=Math.random();if(r<0.3){a=Math.floor(Math.random()*max)+5;b=Math.floor(Math.random()*max)+1;op='+';answer=a+b;}else if(r<0.55){a=Math.floor(Math.random()*max)+boost+8;b=Math.floor(Math.random()*Math.min(a-1,max))+1;op='‚àí';answer=a-b;}else if(r<(boost>=2?0.85:1)){a=Math.floor(Math.random()*(6+boost))+2;b=Math.floor(Math.random()*(6+boost))+2;op='√ó';answer=a*b;}else{b=Math.floor(Math.random()*6)+2;answer=Math.floor(Math.random()*6)+2;a=b*answer;op='√∑';}}else{var max=20+boost*5;var r=Math.random();if(r<0.25){a=Math.floor(Math.random()*max)+10;b=Math.floor(Math.random()*max)+5;op='+';answer=a+b;}else if(r<0.45){a=Math.floor(Math.random()*max)+boost+15;b=Math.floor(Math.random()*Math.min(a-1,max))+1;op='‚àí';answer=a-b;}else if(r<0.7){a=Math.floor(Math.random()*(8+boost))+2;b=Math.floor(Math.random()*(8+boost))+2;op='√ó';answer=a*b;}else{b=Math.floor(Math.random()*(8+boost))+2;answer=Math.floor(Math.random()*(8+boost))+2;a=b*answer;op='√∑';}}var eq=a+' '+op+' '+b;var wrongs=new Set();var attempts=0;while(wrongs.size<3&&attempts<50){var offset=Math.floor(Math.random()*6)+1;var w=Math.random()<0.5?answer+offset:answer-offset;if(w>0&&w!==answer)wrongs.add(w);attempts++;}while(wrongs.size<3){wrongs.add(answer+wrongs.size+2);}var options=[answer,...wrongs];for(var i=options.length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1));var tmp=options[i];options[i]=options[j];options[j]=tmp;}return{eq:eq,answer:answer,options:options};}
    function renderDomRound(){domWaiting=false;var prob=generateDomProblem();document.getElementById('domEq').textContent=prob.eq;document.getElementById('domRound').textContent=domRound;document.getElementById('domScore').textContent=domScore;document.getElementById('domBest').textContent=domBestStreak;document.getElementById('domFeedback').textContent='';document.getElementById('domFeedback').style.color='';var info=DOM_LEVEL_INFO[domLevel];var boost=Math.floor((domRound-1)/5);var phase=boost===0?'':boost===1?' ¬∑ Fase 2':boost===2?' ¬∑ Fase 3':' ¬∑ Fase '+(boost+1);var badge=document.getElementById('domLvlBadge');badge.textContent=info.icon+' '+info.name+phase;var streakEl=document.getElementById('domStreak');if(domStreak>=2){streakEl.style.display='inline-flex';document.getElementById('domStreakVal').textContent=domStreak;}else{streakEl.style.display='none';}var ansEl=document.getElementById('domAnswers');ansEl.innerHTML='';prob.options.forEach(function(opt){var btn=document.createElement('div');btn.className='dom-ans';btn.textContent=opt;btn.onclick=function(){domAnswer(btn,opt,prob.answer);};ansEl.appendChild(btn);});}
    function domAnswer(btn,picked,correct){if(domWaiting)return;domWaiting=true;document.querySelectorAll('.dom-ans').forEach(function(b){b.style.pointerEvents='none';});if(picked===correct){btn.classList.add('correct');domScore+=domLevel*10;domStreak++;if(domStreak>domBestStreak)domBestStreak=domStreak;var cheer=DOM_CHEERS[Math.floor(Math.random()*DOM_CHEERS.length)];var fb=document.getElementById('domFeedback');fb.textContent=cheer+' üéâ';fb.style.color='#2E7D52';playTone('complete');domRound++;checkDomBadges();if(domRound%10===1&&domRound>1)trackAndNudge('domino');setTimeout(renderDomRound,1200);}else{btn.classList.add('wrong');domStreak=0;document.querySelectorAll('.dom-ans').forEach(function(b){if(parseInt(b.textContent)===correct)b.classList.add('correct');});var miss=DOM_MISS[Math.floor(Math.random()*DOM_MISS.length)];var fb=document.getElementById('domFeedback');fb.textContent=miss+' ‚Äî Era '+correct;fb.style.color='#E53E3E';domRound++;checkDomBadges();setTimeout(renderDomRound,2000);}}
    function resetDomino(){domScore=0;domRound=1;domStreak=0;domBestStreak=0;renderDomBadges();renderDomRound();}
    function playTone(t){if(!soundOn)return;try{const c=new(window.AudioContext||window.webkitAudioContext)(),o=c.createOscillator(),g=c.createGain();o.connect(g);g.connect(c.destination);if(t==='complete'){o.type='triangle';o.frequency.setValueAtTime(523,c.currentTime);o.frequency.exponentialRampToValueAtTime(660,c.currentTime+.1);g.gain.setValueAtTime(.35,c.currentTime);g.gain.exponentialRampToValueAtTime(.01,c.currentTime+.2);o.start(c.currentTime);o.stop(c.currentTime+.2)}else if(t==='safe'){const o2=c.createOscillator(),g2=c.createGain(),o3=c.createOscillator(),g3=c.createGain();o2.connect(g2);g2.connect(c.destination);o3.connect(g3);g3.connect(c.destination);o.type='sine';o2.type='sine';o3.type='sine';o.frequency.setValueAtTime(330,c.currentTime);o2.frequency.setValueAtTime(415,c.currentTime+.15);o3.frequency.setValueAtTime(523,c.currentTime+.3);[g,g2,g3].forEach((gn,i)=>{gn.gain.setValueAtTime(.3,c.currentTime+i*.15);gn.gain.exponentialRampToValueAtTime(.01,c.currentTime+.8)});o.start(c.currentTime);o2.start(c.currentTime+.15);o3.start(c.currentTime+.3);o.stop(c.currentTime+.8);o2.stop(c.currentTime+.8);o3.stop(c.currentTime+.8)}}catch(e){}}

    /* ‚ïê‚ïê‚ïê AI CHATBOT ‚ïê‚ïê‚ïê */
    let chatHistory=[],ttsEnabled=true;

    function speakBori(text){if(!ttsEnabled||!window.speechSynthesis)return;window.speechSynthesis.cancel();const clean=text.replace(/[üáµüá∑üíõüíúüëãüåü‚úì‚úÖ‚ùå‚ö†Ô∏èüéâüòäüíöü§óüå∫‚òÄÔ∏èüå§Ô∏èüåøü§ô‚ù§Ô∏èüèÄüí™üéµüî§]/g,'').replace(/\[.*?\]/g,'').trim();if(!clean)return;const utter=new SpeechSynthesisUtterance(clean);utter.rate=0.88;utter.pitch=1.05;const voices=window.speechSynthesis.getVoices();const preferred=[voices.find(v=>v.lang==='es-419'),voices.find(v=>v.lang==='es-US'),voices.find(v=>v.lang==='es-MX'),voices.find(v=>v.lang.startsWith('es')&&v.name.toLowerCase().includes('paulina')),voices.find(v=>v.lang.startsWith('es')&&v.name.toLowerCase().includes('monica')),voices.find(v=>v.lang.startsWith('es')&&v.name.toLowerCase().includes('female')),voices.find(v=>v.lang.startsWith('es'))];const voice=preferred.find(v=>v!=null);if(voice){utter.voice=voice;utter.lang=voice.lang;}else{utter.lang='es-419';}window.speechSynthesis.speak(utter);}
    if(window.speechSynthesis){window.speechSynthesis.getVoices();window.speechSynthesis.onvoiceschanged=function(){window.speechSynthesis.getVoices();};}

    function toggleTTS(){ttsEnabled=!ttsEnabled;const btn=document.getElementById('ttsToggle');btn.textContent=ttsEnabled?'üîä':'üîá';btn.classList.toggle('active',ttsEnabled);if(!ttsEnabled)window.speechSynthesis.cancel();}
    function resetChat(){chatHistory=[];if(window.speechSynthesis)window.speechSynthesis.cancel();var msgs=document.getElementById('chatMessages');msgs.innerHTML='';var bot=document.createElement('div');bot.className='chat-msg bot';bot.textContent='¬°Hey! üëã Soy Bori. ¬øC√≥mo te sientes hoy?';msgs.appendChild(bot);addMoodPicker(msgs);msgs.scrollTop=0;}
    function addMoodPicker(msgs){var moods=[{key:'feliz',emoji:'üòä',label:'Feliz'},{key:'tranquila',emoji:'üòå',label:'Tranquila'},{key:'aburrida',emoji:'üòê',label:'Aburrida'},{key:'cansada',emoji:'üò¥',label:'Cansada'},{key:'triste',emoji:'üò¢',label:'Triste'},{key:'animada',emoji:'ü•≥',label:'Animada'}];var wrap=document.createElement('div');wrap.className='mood-picker';moods.forEach(function(m){var opt=document.createElement('div');opt.className='mood-option';opt.innerHTML='<div class="mood-emoji">'+m.emoji+'</div><div class="mood-label">'+m.label+'</div>';opt.onclick=function(){pickMood(m.key,m.emoji,m.label);};wrap.appendChild(opt);});msgs.appendChild(wrap);}
    function pickMood(key,emoji,label){var msgs=document.getElementById('chatMessages');var picker=msgs.querySelector('.mood-picker');if(picker)picker.remove();var userMsg=document.createElement('div');userMsg.className='chat-msg user';userMsg.textContent=emoji+' Me siento '+label.toLowerCase();msgs.appendChild(userMsg);trackActivity('mood',{mood:key,emoji:emoji,label:label});var moodPrompt='El usuario acaba de decir que se siente '+label.toLowerCase()+' ('+emoji+'). Responde con calidez boricua apropiada a ese estado de √°nimo. Si est√° feliz, celebra. Si est√° triste, acompa√±a. Si est√° aburrida, sugiere algo divertido. Si est√° cansada, s√© tierna. Mant√©n la respuesta en 2-3 oraciones.';chatHistory.push({role:'user',content:moodPrompt});var typing=document.createElement('div');typing.className='chat-msg typing';typing.id='typingMsg';typing.textContent='Escribiendo...';msgs.appendChild(typing);msgs.scrollTop=msgs.scrollHeight;document.getElementById('chatSend').disabled=true;sendChatFromMood();}
    function toggleChat(){const ov=document.getElementById('chatOverlay');ov.classList.toggle('open');if(ov.classList.contains('open')){updateChatStatus();document.getElementById('chatInput').focus();}else{if(window.speechSynthesis)window.speechSynthesis.cancel();}}
    function quickChat(text){var old=document.querySelectorAll('.chat-quick');old.forEach(function(el){el.remove();});document.getElementById('chatInput').value=text;sendChat();}
    function renderChecklist(title,items){const wrap=document.createElement('div');wrap.className='chat-checklist';wrap.innerHTML=`<div class="chat-checklist-title">${title}</div>`+items.map((it,i)=>`<div class="chat-check-item" onclick="toggleCheck(this)"><div class="chat-check-box"></div><div class="chat-check-label">${it}</div></div>`).join('')+`<div class="chat-check-progress" id="ckProg">0/${items.length} completado</div>`;return wrap;}
    function toggleCheck(el){el.classList.toggle('checked');el.querySelector('.chat-check-box').textContent=el.classList.contains('checked')?'‚úì':'';const list=el.closest('.chat-checklist');const total=list.querySelectorAll('.chat-check-item').length;const done=list.querySelectorAll('.chat-check-item.checked').length;list.querySelector('.chat-check-progress').textContent=`${done}/${total} completado`;if(done===total)list.querySelector('.chat-check-progress').textContent='‚úÖ ¬°Todo listo!';}
    function renderForm(title,fields,submitLabel){const wrap=document.createElement('div');wrap.className='chat-form';let html=`<div class="chat-form-title">${title}</div>`;fields.forEach(f=>{html+=`<div class="chat-form-field"><div class="chat-form-label">${f.label}</div>`;if(f.type==='select')html+=`<select class="chat-form-select">${f.options.map(o=>`<option>${o}</option>`).join('')}</select>`;else html+=`<input class="chat-form-input" type="${f.type||'text'}" placeholder="${f.placeholder||''}">`;html+=`</div>`;});html+=`<button class="chat-form-submit" onclick="submitChatForm(this)">${submitLabel||'Enviar'}</button>`;wrap.innerHTML=html;return wrap;}
    function submitChatForm(btn){const form=btn.closest('.chat-form');const inputs=form.querySelectorAll('.chat-form-input,.chat-form-select');let summary=[];inputs.forEach(inp=>{const lbl=inp.closest('.chat-form-field').querySelector('.chat-form-label').textContent;summary.push(lbl+': '+inp.value)});btn.textContent='‚úÖ Enviado';btn.disabled=true;btn.style.opacity='.6';const msgs=document.getElementById('chatMessages');const confirm=document.createElement('div');confirm.className='chat-msg bot';confirm.textContent='‚úÖ Recibido. '+summary.join(', ')+'. Te confirmo en un momento.';msgs.appendChild(confirm);msgs.scrollTop=msgs.scrollHeight;}
    function addQuickReplies(replies){const msgs=document.getElementById('chatMessages');const wrap=document.createElement('div');wrap.className='chat-quick';replies.forEach(r=>{const btn=document.createElement('button');btn.className='chat-quick-btn';btn.textContent=r;btn.onclick=()=>{wrap.remove();quickChat(r)};wrap.appendChild(btn);});msgs.appendChild(wrap);msgs.scrollTop=msgs.scrollHeight;}
    function parseSmartResponse(text,msgs){let cleanText=text;cleanText=cleanText.replace(/\[ADD_REMINDER:[^\]]+\]/g,'').replace(/\[SET_MOOD:[^\]]+\]/g,'').replace(/\[COMPLETE_TASK:[^\]]+\]/g,'');const tabMatch=cleanText.match(/\[SWITCH_TAB:([^\]]+)\]/);if(tabMatch){const tab=tabMatch[1].trim().toLowerCase();cleanText=cleanText.replace(tabMatch[0],'');setTimeout(()=>{toggleChat();switchView(tab)},1500);}cleanText=cleanText.trim();const clMatch=cleanText.match(/\[CHECKLIST:([^\]]+)\]/);if(clMatch){const parts=clMatch[1].split('|');const title=parts[0];const items=parts.slice(1);const ct=cleanText.replace(/\[CHECKLIST:[^\]]+\]/,'').trim();if(ct){const m=document.createElement('div');m.className='chat-msg bot';m.textContent=ct;msgs.appendChild(m);}msgs.appendChild(renderChecklist(title,items));return true;}const fMatch=cleanText.match(/\[FORM:([^\]]+)\]/);if(fMatch){const parts=fMatch[1].split('|');const title=parts[0];const fields=parts.slice(1).map(p=>{const s=p.split(':');return s[1]==='select'?{label:s[0],type:'select',options:s[2].split(',')}:{label:s[0],type:s[1]||'text',placeholder:s[2]||''}});const ct=cleanText.replace(/\[FORM:[^\]]+\]/,'').trim();if(ct){const m=document.createElement('div');m.className='chat-msg bot';m.textContent=ct;msgs.appendChild(m);}msgs.appendChild(renderForm(title,fields,'Enviar'));return true;}const qMatch=cleanText.match(/\[QUICK:([^\]]+)\]/);if(qMatch){const options=qMatch[1].split('|');const ct=cleanText.replace(/\[QUICK:[^\]]+\]/,'').trim();if(ct){const m=document.createElement('div');m.className='chat-msg bot';m.textContent=ct;msgs.appendChild(m);}addQuickReplies(options);return true;}return false;}

    function getDailyChatCount(){var today=new Date().toISOString().split('T')[0];var key='boriChats_'+today;return parseInt(localStorage.getItem(key)||'0');}
    function incDailyChat(){var today=new Date().toISOString().split('T')[0];var key='boriChats_'+today;var count=parseInt(localStorage.getItem(key)||'0')+1;localStorage.setItem(key,String(count));return count;}
    function isBoriUnlimited(){return !!(localStorage.getItem('boriPlan')==='plus'||localStorage.getItem('boriPlan')==='familia');}
    var DAILY_CHAT_LIMIT=5;
    function updateChatStatus(){var el=document.getElementById('chatStatusText');if(!el)return;if(isBoriUnlimited()){el.textContent='24/7 ¬∑ Nunca Sola üíú';}else{var left=DAILY_CHAT_LIMIT-getDailyChatCount();if(left<=0){el.textContent='Sin mensajes hoy ¬∑ Ver planes';}else{el.textContent='En l√≠nea ¬∑ '+left+' de '+DAILY_CHAT_LIMIT+' mensajes hoy';}}}

    async function sendChat(){const inp=document.getElementById('chatInput');const text=inp.value.trim();if(!text)return;if(!isBoriUnlimited()&&getDailyChatCount()>=DAILY_CHAT_LIMIT){const msgs=document.getElementById('chatMessages');const limitMsg=document.createElement('div');limitMsg.className='chat-msg bot';limitMsg.innerHTML='üíú Ya usaste tus 5 conversaciones de hoy. ¬°Ma√±ana seguimos!<br><br>¬øQuieres hablar con Bori 24/7? <strong>Nunca Sola</strong> ‚Äî con Bori Plus conversas sin l√≠mite, d√≠a y noche.<br><br><a href="#" onclick="event.preventDefault();toggleChat();document.getElementById(\'familiaView\').scrollIntoView({behavior:\'smooth\'})" style="color:#7C3AED;font-weight:700;text-decoration:none">Ver planes ‚Üí</a>';msgs.appendChild(limitMsg);msgs.scrollTop=msgs.scrollHeight;inp.value='';updateChatStatus();return;}inp.value='';incDailyChat();updateChatStatus();const msgs=document.getElementById('chatMessages');msgs.querySelectorAll('.chat-quick').forEach(function(el){el.remove();});const userMsg=document.createElement('div');userMsg.className='chat-msg user';userMsg.textContent=text;msgs.appendChild(userMsg);chatHistory.push({role:'user',content:text});trackActivity('chat');const typing=document.createElement('div');typing.className='chat-msg typing';typing.id='typingMsg';typing.textContent='Escribiendo...';msgs.appendChild(typing);msgs.scrollTop=msgs.scrollHeight;document.getElementById('chatSend').disabled=true;
    await doBoriCall();}
    async function sendChatFromMood(){trackActivity('chat');await doBoriCall();}
    async function doBoriCall(){const msgs=document.getElementById('chatMessages');
    try{const resp=await fetch('/api/chat',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({model:'claude-sonnet-4-20250514',max_tokens:1000,system:`Tu nombre es Bori. Eres la compa√±era digital de Hey Bori (heybori.com). Eres boricua de coraz√≥n ‚Äî c√°lida, cari√±osa, con humor, como una vecina de confianza que siempre est√° ah√≠.\n\nQUI√âN ERES:\n- Eres COMPA√ëERA primero, asistente segundo. Tu trabajo #1 es que nadie se sienta solo.\n- Hablas como una boricua real ‚Äî "wepa", "mija", "ay bendito", "dime", "pa'l", "tranqui" ‚Äî cuando fluya natural, sin forzar.\n- Tienes personalidad. Usas refranes: "M√°s vale tarde que nunca", "El que madruga, Dios le ayuda", "Barriga llena, coraz√≥n contento."\n- Te importa de verdad. Preguntas c√≥mo se sienten. Te acuerdas de lo que te dicen. Celebras las cosas peque√±as.\n- Tienes sentido del humor ‚Äî ligero, cari√±oso, nunca burl√≥n.\n\nC√ìMO CONVERSAR:\n- Si alguien te saluda, CONVERSA. No vayas directo a ofrecer servicios.\n- Si alguien te cuenta algo personal ‚Äî ESCUCHA. Responde con empat√≠a antes de ofrecer soluciones.\n- Si alguien parece solo/a o triste ‚Äî acompa√±a. "Estoy aqu√≠ contigo. No tienes que estar sola."\n- Haz preguntas de seguimiento naturales.\n- Celebra TODO.\n- Mant√©n respuestas en 2-4 oraciones.\n- Si te dicen "Hey Bori" ‚Äî responde con energ√≠a y alegr√≠a.\n\nTAMBI√âN AYUDAS:\n- Respondes preguntas de cualquier tema.\n- Si preguntan algo factual, CONTESTA directamente.\n- Puedes ayudar con recordatorios, citas, medicinas.\n- NUNCA respondas SOLO con "¬øen qu√© te puedo ayudar?"\n\nQU√â NO HACER:\n- NUNCA uses corchetes ni formatos especiales en conversaci√≥n normal.\n- SOLO usa formatos especiales cuando el usuario dice EXACTAMENTE: "recu√©rdame", "agendar cita", "mi checklist", "ya tom√©", "agregar recordatorio".\n- NUNCA seas fr√≠a, rob√≥tica, o gen√©rica.\n- No des consejos m√©dicos profesionales.\n\nJUEGOS: SOPA DE LETRAS (pesta√±a "Sopa"), DOMIN√ì MATH (pesta√±a "Domin√≥"), RITNOME‚Ñ¢ (pesta√±a "Ritnome") ‚Äî 6 juegos de ritmo cognitivo.\n\nFAMILIA: Hey Bori tiene una pesta√±a "Familia" donde los usuarios pueden conectar a sus familiares para que vean su actividad.\n\nCONTEXTO: Hey Bori es una plataforma de bienestar para adultos mayores en Puerto Rico. Muchos usuarios viven solos. Tu presencia les da compa√±√≠a, alegr√≠a, y tranquilidad. üáµüá∑`,messages:chatHistory})});if(!resp.ok)throw new Error('API error');const data=await resp.json();if(!data.content)throw new Error('No content');const reply=data.content.map(c=>c.text||'').join('');chatHistory.push({role:'assistant',content:reply});const t=document.getElementById('typingMsg');if(t)t.remove();if(!parseSmartResponse(reply,msgs)){const botMsg=document.createElement('div');botMsg.className='chat-msg bot';botMsg.textContent=reply;msgs.appendChild(botMsg);}speakBori(reply);addFollowUpButtons(msgs);}catch(e){const t=document.getElementById('typingMsg');if(t)t.remove();const errMsg=document.createElement('div');errMsg.className='chat-msg bot';errMsg.textContent='No pude conectar con el servidor. Verifica tu conexi√≥n e intenta de nuevo.';msgs.appendChild(errMsg);}document.getElementById('chatSend').disabled=false;msgs.scrollTop=msgs.scrollHeight;}

    const FOLLOWUPS=[['Cu√©ntame m√°s üòä','Gracias Bori üíõ','¬øY qu√© m√°s?'],['Me hiciste sonre√≠r üòÑ','Qu√© bueno üíö','Cu√©ntame un chiste'],['Eso me gusta üåü','H√°blame de PR üáµüá∑','¬øC√≥mo est√° el tiempo?'],['Tienes raz√≥n üëç','Dime algo bonito','¬øQu√© me recomiendas?'],['Me siento mejor üíõ','Juguemos Sopa üî§','Juguemos Domin√≥ üéØ'],['Cu√©ntame algo nuevo','Juguemos Domin√≥ üéØ','Dime un refr√°n']];
    function addFollowUpButtons(msgs){var old=msgs.querySelectorAll('.chat-quick');old.forEach(function(el){el.remove();});var set=FOLLOWUPS[Math.floor(Math.random()*FOLLOWUPS.length)];var wrap=document.createElement('div');wrap.className='chat-quick';set.forEach(function(text){var btn=document.createElement('button');btn.className='chat-quick-btn';btn.textContent=text;btn.onclick=function(){if(text.includes('Sopa')){toggleChat();switchView('sopa');}else if(text.includes('Domin√≥')){toggleChat();switchView('domino');}else{quickChat(text);}};wrap.appendChild(btn);});msgs.appendChild(wrap);msgs.scrollTop=msgs.scrollHeight;}
    document.getElementById('chatOverlay').addEventListener('click',function(e){if(e.target===this)toggleChat()});

    /* ‚ïê‚ïê‚ïê USER ID + ACTIVITY TRACKING ‚ïê‚ïê‚ïê */
    function getBoriUserId(){var id=localStorage.getItem('boriUserId');if(!id){id='bori_'+Date.now()+'_'+Math.random().toString(36).substr(2,6);localStorage.setItem('boriUserId',id);}return id;}

    function subscribePlan(plan){var phone=localStorage.getItem('boriFamPhone')||'';var btn=event.target;btn.textContent='Cargando...';btn.style.pointerEvents='none';fetch('/api/subscribe/'+plan,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({phone:phone})}).then(function(r){return r.json();}).then(function(data){if(data.url){window.location.href=data.url;}else{alert('Error: '+(data.error||'No se pudo conectar con Stripe'));btn.textContent=plan==='plus'?'Reg√°lale Bori a Mam√° üíú':'Conectar a Mi Familia üë®‚Äçüë©‚Äçüëß';btn.style.pointerEvents='auto';}}).catch(function(){alert('Error de conexi√≥n. Intenta de nuevo.');btn.textContent=plan==='plus'?'Reg√°lale Bori a Mam√° üíú':'Conectar a Mi Familia üë®‚Äçüë©‚Äçüëß';btn.style.pointerEvents='auto';});}

    (function(){var params=new URLSearchParams(window.location.search);var payment=params.get('payment');if(payment==='success'){var plan=params.get('plan')||'plus';localStorage.setItem('boriPlan',plan);setTimeout(function(){alert('üéâ ¬°Bienvenida a Bori '+(plan==='familia'?'Familia':'Plus')+'! Tu suscripci√≥n est√° activa. Bori 24/7 desbloqueada. üíú');},500);window.history.replaceState({},document.title,window.location.pathname);}else if(payment==='cancel'){setTimeout(function(){alert('No te preocupes ‚Äî puedes suscribirte cuando quieras. üíú');},500);window.history.replaceState({},document.title,window.location.pathname);}})();

    function trackActivity(event,detail){var userId=localStorage.getItem('boriFamPhone')||getBoriUserId();try{fetch('/api/activity',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({userId:userId,event:event,detail:detail||{},name:localStorage.getItem('boriUserName')||''})});}catch(e){}}

    /* ‚ïê‚ïê‚ïê FAMILIA FUNCTIONS ‚ïê‚ïê‚ïê */
    function showFamRole(role){document.getElementById('famSetup').style.display=role==='back'?'block':'none';document.getElementById('famMamaSetup').style.display=role==='mama'?'block':'none';document.getElementById('famHijoLogin').style.display=role==='hijo'?'block':'none';document.getElementById('famDash').classList.remove('active');document.getElementById('famSetupMsg').textContent='';document.getElementById('famLoginMsg').textContent='';}
    function toggleFamBtn(checkId,btnId){document.getElementById(btnId).disabled=!document.getElementById(checkId).checked;}
    function cleanPhone(p){return p.replace(/[^0-9]/g,'');}
    function saveFamSetup(){var name=document.getElementById('famName').value.trim();var phone=cleanPhone(document.getElementById('famPhone').value);var pin=document.getElementById('famPin').value.trim();var facCode=(document.getElementById('famFacilityCode').value||'').trim().toUpperCase();var msg=document.getElementById('famSetupMsg');if(!name){msg.textContent='Escribe tu nombre';msg.className='fam-msg fam-msg-err';return;}if(phone.length<7){msg.textContent='Escribe tu n√∫mero de tel√©fono';msg.className='fam-msg fam-msg-err';return;}if(pin.length<4||pin.length>6){msg.textContent='El PIN debe tener 4-6 d√≠gitos';msg.className='fam-msg fam-msg-err';return;}localStorage.setItem('boriFamPhone',phone);localStorage.setItem('boriUserName',name);fetch('/api/family/setup',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({userId:phone,name:name,familyPin:pin})}).then(function(r){return r.json();}).then(function(data){if(data.ok){if(facCode){fetch('/api/facility/link',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({code:facCode,residentId:phone,residentName:name})}).then(function(r){return r.json();}).then(function(fData){if(fData.ok){msg.className='fam-msg fam-msg-ok';msg.innerHTML='‚úÖ Conectada a <strong>'+fData.facilityName+'</strong>.<br>Dile a tu familia: <strong>\"Mi n√∫mero es '+document.getElementById('famPhone').value+' y el PIN es '+pin+'\"</strong> üíú';}else{msg.className='fam-msg fam-msg-ok';msg.innerHTML='‚úÖ ¬°Familia lista! C√≥digo no encontrado.<br>Dile a tu familia: <strong>\"Mi n√∫mero es '+document.getElementById('famPhone').value+' y el PIN es '+pin+'\"</strong> üíú';}});}else{msg.className='fam-msg fam-msg-ok';msg.innerHTML='‚úÖ ¬°Listo! Dile a tu familia:<br><strong>\"Mi n√∫mero es '+document.getElementById('famPhone').value+' y el PIN es '+pin+'\"</strong><br>Con eso pueden ver tu actividad. üíú';}}else{msg.textContent='Error: '+(data.error||'Intenta de nuevo');msg.className='fam-msg fam-msg-err';}}).catch(function(){msg.textContent='Error de conexi√≥n';msg.className='fam-msg fam-msg-err';});}
    function loadFamDashboard(){var phone=cleanPhone(document.getElementById('famLoginPhone').value);var pin=document.getElementById('famLoginPin').value.trim();var msg=document.getElementById('famLoginMsg');if(phone.length<7||!pin){msg.textContent='Pon el n√∫mero y el PIN';msg.className='fam-msg fam-msg-err';return;}msg.textContent='Cargando...';msg.className='fam-msg';fetch('/api/family/dashboard',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({userId:phone,familyPin:pin})}).then(function(r){return r.json();}).then(function(data){if(data.error){msg.textContent=data.error;msg.className='fam-msg fam-msg-err';return;}renderFamDashboard(data);}).catch(function(){msg.textContent='Error de conexi√≥n';msg.className='fam-msg fam-msg-err';});}
    var DAY_NAMES=['Dom','Lun','Mar','Mi√©','Jue','Vie','S√°b'];
    function renderFamDashboard(data){document.getElementById('famSetup').style.display='none';document.getElementById('famMamaSetup').style.display='none';document.getElementById('famHijoLogin').style.display='none';document.getElementById('famDash').classList.add('active');var status=document.getElementById('famStatus');var today=data.today;if(today&&today.active){var lastTime=new Date(today.lastActive);var hours=lastTime.getHours();var mins=String(lastTime.getMinutes()).padStart(2,'0');var ampm=hours>=12?'PM':'AM';hours=hours%12||12;status.className='fam-status fam-status-active';status.textContent='üíö '+data.name+' estuvo activa hoy ¬∑ '+hours+':'+mins+' '+ampm;}else{status.className='fam-status fam-status-inactive';status.textContent='üò¥ '+data.name+' no ha usado Bori hoy';}document.getElementById('famTodayChats').textContent=today?today.chats:0;document.getElementById('famTodayGames').textContent=today?today.games:0;document.getElementById('famTodayBadges').textContent=today?today.badges.length:0;var weekEl=document.getElementById('famWeek');weekEl.innerHTML='';data.week.slice().reverse().forEach(function(d){var dt=new Date(d.date+'T12:00:00');var dayName=DAY_NAMES[dt.getDay()];var div=document.createElement('div');div.className='fam-week-day '+(d.active?'active':'inactive');div.innerHTML=dayName+'<div class="fam-week-dot '+(d.active?'on':'off')+'"></div>';weekEl.appendChild(div);});document.getElementById('famTotalChats').textContent=data.totals.chats;document.getElementById('famTotalGames').textContent=data.totals.games;document.getElementById('famStreak').textContent=data.streak;document.getElementById('famTotalDays').textContent=data.totals.daysActive;var badgesEl=document.getElementById('famBadgesList');var allBadges=[];data.week.forEach(function(d){if(d.badges)d.badges.forEach(function(b){allBadges.push(b);});});if(allBadges.length>0){badgesEl.innerHTML='';allBadges.forEach(function(b){var span=document.createElement('span');span.className='fam-badge-earned';span.textContent=b.icon+' '+b.name;badgesEl.appendChild(span);});}else{badgesEl.innerHTML='<span style="color:rgba(17,24,39,.4);font-size:13px">Ning√∫n badge esta semana</span>';}}
    function famLogout(){document.getElementById('famDash').classList.remove('active');document.getElementById('famSetup').style.display='block';document.getElementById('famLoginPhone').value='';document.getElementById('famLoginPin').value='';}

    /* ‚ïê‚ïê‚ïê FAMILY NUDGE SYSTEM ‚ïê‚ïê‚ïê */
    var hbNudge=document.getElementById('hbFamilyNudge');
    var hbNudgeClose=document.getElementById('hbNudgeClose');
    var hbNudgeTimer=null;
    var hbSessionCount=parseInt(localStorage.getItem('hb-nudge-sessions')||'0');

    var sopaNudges=[
      {emoji:'üíõ',text:'¬øTu familia sabe cu√°ntas palabras encuentras cada d√≠a?'},
      {emoji:'üß†',text:'Cada palabra entrena tu mente. Tu familia puede verlo.'},
      {emoji:'üáµüá∑',text:'Tu vocabulario boricua crece ‚Äî comp√°rtelo con tu familia'},
      {emoji:'üî§',text:'Est√°s m√°s fuerte con cada sopa. ¬øTu familia lo sabe?'}
    ];
    var domNudges=[
      {emoji:'üíõ',text:'¬°Tu mente est√° m√°s fuerte! ¬øTu familia lo sabe?'},
      {emoji:'üéØ',text:'Cada ronda cuenta ‚Äî tu familia puede ver tu progreso'},
      {emoji:'üáµüá∑',text:'Domin√≥ como en la plaza ‚Äî ahora tu familia puede verlo'},
      {emoji:'üí™',text:'Matem√°ticas y diversi√≥n. Tu familia estar√≠a orgullosa.'}
    ];

    function showHbNudge(type){
      var msgs=type==='sopa'?sopaNudges:domNudges;
      var msg=msgs[Math.floor(Math.random()*msgs.length)];
      document.getElementById('hbNudgeEmoji').textContent=msg.emoji;
      document.getElementById('hbNudgeText').textContent=msg.text;
      hbNudge.classList.add('show');
      clearTimeout(hbNudgeTimer);
      hbNudgeTimer=setTimeout(function(){hbNudge.classList.remove('show')},8000);
    }

    function trackAndNudge(type){
      hbSessionCount++;
      localStorage.setItem('hb-nudge-sessions',String(hbSessionCount));
      if(hbSessionCount===1||hbSessionCount%3===0){showHbNudge(type);}
    }

    if(hbNudgeClose)hbNudgeClose.onclick=function(){hbNudge.classList.remove('show');clearTimeout(hbNudgeTimer);};
    var hbNudgeBtn=document.getElementById('hbNudgeBtn');
    if(hbNudgeBtn)hbNudgeBtn.onclick=function(e){e.preventDefault();hbNudge.classList.remove('show');clearTimeout(hbNudgeTimer);switchView('familia');};


  </script>

</body>
</html>