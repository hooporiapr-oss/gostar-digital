<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Laughter Workoutsâ„¢ - Exercise Your Memory. Exercise Your Smile.</title>
<meta name="description" content="Laughter Workouts - The ONLY cognitive training built on joy! 4 laughter-powered workouts for your brain. 7-day free trial. $5/month.">
<meta name="keywords" content="laughter workouts, brain games, memory exercises, senior fitness, mental agility, cognitive training, laughter therapy, memory training">
<meta name="author" content="Akashic Works LLC">
<meta name="robots" content="index, follow">
<meta property="og:type" content="website">
<meta property="og:url" content="https://laughterworkouts.com/">
<meta property="og:title" content="Laughter Workoutsâ„¢ - Exercise Your Memory. Exercise Your Smile.">
<meta property="og:description" content="The ONLY cognitive training built on joy! 4 laughter-powered workouts. 7-day free trial.">
<meta property="og:image" content="https://laughterworkouts.com/go_chat.png">
<link rel="icon" type="image/png" href="favicon.png">
<style>
:root {
    --gold: #FFD700;
    --purple: #6B21A8;
    --purple-dark: #581C87;
    --purple-light: #9333EA;
    --green: #22C55E;
    --red: #EF4444;
    --bg: #0F0A1E;
    --card: #1A1033;
    --text: #FFFFFF;
    --text-dim: #A0A0A0;
}
* { margin: 0; padding: 0; box-sizing: border-box; }
html, body { 
    height: 100%; 
    overflow: hidden;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: var(--bg);
    color: var(--text);
}
body.en .lang-es { display: none !important; }
body.es .lang-en { display: none !important; }

/* Landing */
.landing {
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 20px;
    text-align: center;
    background: radial-gradient(ellipse at center, var(--purple-dark) 0%, var(--bg) 70%);
    position: relative;
}
.landing.hidden { display: none; }

/* Header */
.header {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
}
.logo {
    font-size: 18px;
    font-weight: 800;
    letter-spacing: -0.5px;
}
.logo .laugh { color: var(--gold); }
.logo .ter { color: var(--text); }
.lang-toggle { display: flex; gap: 5px; }
.lang-btn {
    background: transparent;
    border: 1px solid rgba(255,255,255,0.3);
    color: var(--text-dim);
    padding: 5px 10px;
    border-radius: 4px;
    font-size: 12px;
    cursor: pointer;
    transition: all 0.2s;
}
.lang-btn.active, .lang-btn:hover {
    background: var(--gold);
    color: var(--bg);
    border-color: var(--gold);
}

/* Hero */
.hero { margin-bottom: 30px; }
.hero-icon {
    width: 120px;
    height: 120px;
    margin: 0 auto 20px;
    cursor: pointer;
    transition: transform 0.3s;
    animation: bounce 2s infinite;
}
.hero-icon:hover { transform: scale(1.1); }
@keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
}
.hero-icon img { width: 100%; height: 100%; object-fit: contain; }
.hero-title {
    font-size: 28px;
    font-weight: 800;
    margin-bottom: 10px;
    line-height: 1.2;
}
.hero-title .gold { color: var(--gold); }
.hero-sub {
    font-size: 16px;
    color: var(--text-dim);
    margin-bottom: 15px;
    line-height: 1.4;
}
.hero-cta {
    font-size: 14px;
    color: var(--text-dim);
}
.hero-cta a {
    color: var(--gold);
    text-decoration: none;
    cursor: pointer;
}
.hero-cta a:hover { text-decoration: underline; }

/* GO Button */
.go-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    background: linear-gradient(135deg, var(--gold) 0%, #FFA500 100%);
    color: var(--bg);
    border: none;
    padding: 18px 40px;
    border-radius: 50px;
    font-size: 20px;
    font-weight: 800;
    cursor: pointer;
    transition: all 0.3s;
    box-shadow: 0 8px 30px rgba(255, 215, 0, 0.4);
}
.go-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 40px rgba(255, 215, 0, 0.5);
}
.go-btn-icon {
    width: 32px;
    height: 32px;
    border-radius: 50%;
}

/* Footer */
.footer-text {
    position: absolute;
    bottom: 20px;
    font-size: 12px;
    color: var(--text-dim);
}
.footer-text a { color: var(--gold); text-decoration: none; }

/* Chat FAB */
.chat-fab {
    position: fixed;
    bottom: 20px;
    right: 20px;
    display: flex;
    align-items: center;
    gap: 10px;
    background: linear-gradient(135deg, var(--purple) 0%, var(--purple-dark) 100%);
    border: 2px solid var(--gold);
    padding: 10px 16px;
    border-radius: 50px;
    cursor: pointer;
    z-index: 100;
    transition: all 0.3s;
    box-shadow: 0 4px 20px rgba(107, 33, 168, 0.5);
}
.chat-fab:hover {
    transform: scale(1.05);
    box-shadow: 0 6px 25px rgba(107, 33, 168, 0.6);
}
.chat-fab.hidden { display: none; }
.chat-fab img { width: 36px; height: 36px; border-radius: 50%; }
.chat-fab-label {
    color: var(--text);
    font-size: 14px;
    font-weight: 600;
}

/* Chat Screen */
.chat-screen {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: var(--bg);
    display: none;
    flex-direction: column;
    z-index: 200;
}
.chat-screen.active { display: flex; }

.chat-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    background: linear-gradient(135deg, var(--purple) 0%, var(--purple-dark) 100%);
    border-bottom: 2px solid var(--gold);
}
.chat-header-left { display: flex; align-items: center; gap: 12px; }
.chat-avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    border: 2px solid var(--gold);
    overflow: hidden;
}
.chat-avatar-img { width: 100%; height: 100%; object-fit: cover; }
.chat-title {
    font-size: 16px;
    font-weight: 800;
}
.chat-title .go { color: var(--gold); }
.chat-title .tr { color: var(--text); }
.chat-subtitle {
    font-size: 12px;
    color: var(--gold);
    font-weight: 600;
}
.chat-status {
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: 11px;
    color: var(--green);
}
.chat-dot {
    width: 8px;
    height: 8px;
    background: var(--green);
    border-radius: 50%;
    animation: pulse 1.5s infinite;
}
@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}
.chat-header-right { display: flex; align-items: center; gap: 8px; }
.chat-lang-btn {
    background: transparent;
    border: 1px solid rgba(255,255,255,0.3);
    color: var(--text-dim);
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 11px;
    cursor: pointer;
}
.chat-lang-btn.active { background: var(--gold); color: var(--bg); border-color: var(--gold); }
.chat-close {
    background: transparent;
    border: none;
    color: var(--text);
    font-size: 28px;
    cursor: pointer;
    padding: 0 5px;
    line-height: 1;
}

/* Chat Body */
.chat-body {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 12px;
}

/* Messages */
.msg {
    max-width: 85%;
    padding: 12px 16px;
    border-radius: 18px;
    font-size: 15px;
    line-height: 1.4;
    animation: fadeIn 0.3s;
}
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}
.msg.bot {
    background: var(--card);
    border: 1px solid rgba(255,215,0,0.2);
    align-self: flex-start;
    border-bottom-left-radius: 4px;
}
.msg.user {
    background: var(--purple);
    align-self: flex-end;
    border-bottom-right-radius: 4px;
}

/* Quick Replies */
.quick-replies {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    animation: fadeIn 0.3s;
}
.qr-btn {
    background: transparent;
    border: 2px solid var(--gold);
    color: var(--gold);
    padding: 10px 16px;
    border-radius: 25px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}
.qr-btn:hover, .qr-btn.primary {
    background: var(--gold);
    color: var(--bg);
}
.qr-btn.primary {
    animation: glow 1.5s infinite;
}
@keyframes glow {
    0%, 100% { box-shadow: 0 0 5px var(--gold); }
    50% { box-shadow: 0 0 20px var(--gold); }
}

/* Typing Indicator */
.typing {
    display: flex;
    gap: 4px;
    padding: 12px 16px;
    background: var(--card);
    border-radius: 18px;
    align-self: flex-start;
    border-bottom-left-radius: 4px;
}
.typing span {
    width: 8px;
    height: 8px;
    background: var(--gold);
    border-radius: 50%;
    animation: typingDot 1.4s infinite;
}
.typing span:nth-child(2) { animation-delay: 0.2s; }
.typing span:nth-child(3) { animation-delay: 0.4s; }
@keyframes typingDot {
    0%, 100% { opacity: 0.3; transform: scale(0.8); }
    50% { opacity: 1; transform: scale(1); }
}

/* Chat Input */
.chat-input-area {
    padding: 12px 16px;
    background: var(--card);
    border-top: 1px solid rgba(255,255,255,0.1);
}
.chat-input-row {
    display: flex;
    gap: 10px;
}
.chat-input {
    flex: 1;
    background: var(--bg);
    border: 1px solid rgba(255,255,255,0.2);
    border-radius: 25px;
    padding: 12px 18px;
    color: var(--text);
    font-size: 15px;
}
.chat-input:focus {
    outline: none;
    border-color: var(--gold);
}
.chat-send {
    width: 48px;
    height: 48px;
    background: var(--gold);
    border: none;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.2s;
}
.chat-send:hover { transform: scale(1.1); }
.chat-send svg {
    width: 20px;
    height: 20px;
    fill: var(--bg);
}

/* PIN Input */
.pin-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
    padding: 10px 0;
}
.pin-inputs {
    display: flex;
    gap: 10px;
}
.pin-digit {
    width: 50px;
    height: 60px;
    background: var(--bg);
    border: 2px solid var(--gold);
    border-radius: 10px;
    text-align: center;
    font-size: 28px;
    font-weight: 800;
    color: var(--gold);
}
.pin-digit:focus {
    outline: none;
    border-color: var(--text);
    background: var(--card);
}
.pin-submit {
    background: var(--gold);
    color: var(--bg);
    border: none;
    padding: 12px 30px;
    border-radius: 25px;
    font-size: 16px;
    font-weight: 700;
    cursor: pointer;
}

/* Workout Cards */
.workout-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
    width: 100%;
    margin: 10px 0;
}
.workout-card {
    background: var(--card);
    border: 2px solid var(--purple-light);
    border-radius: 12px;
    padding: 15px 10px;
    text-align: center;
    cursor: pointer;
    transition: all 0.2s;
}
.workout-card:hover {
    transform: translateY(-3px);
    border-color: var(--gold);
    box-shadow: 0 5px 20px rgba(255,215,0,0.2);
}
.workout-emoji { font-size: 32px; margin-bottom: 8px; }
.workout-name { font-size: 14px; font-weight: 700; color: var(--gold); }
.workout-desc { font-size: 11px; color: var(--text-dim); margin-top: 4px; }

/* Price Card */
.price-card {
    background: linear-gradient(135deg, var(--card) 0%, var(--purple-dark) 100%);
    border: 2px solid var(--gold);
    border-radius: 16px;
    padding: 20px;
    text-align: center;
    margin: 10px 0;
}
.price-badge {
    background: var(--gold);
    color: var(--bg);
    padding: 5px 15px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: 700;
    display: inline-block;
    margin-bottom: 10px;
}
.price-amount {
    font-size: 42px;
    font-weight: 800;
    color: var(--gold);
}
.price-period { font-size: 16px; color: var(--text-dim); }
.price-features {
    text-align: left;
    margin: 15px 0;
    font-size: 14px;
}
.price-features div {
    padding: 5px 0;
    color: var(--text);
}
.price-features span { margin-right: 8px; }

/* Billing Toggle */
.billing-toggle {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin: 15px 0;
}
.billing-btn {
    background: transparent;
    border: 2px solid rgba(255,255,255,0.3);
    color: var(--text-dim);
    padding: 8px 20px;
    border-radius: 20px;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s;
}
.billing-btn.active {
    background: var(--gold);
    color: var(--bg);
    border-color: var(--gold);
}

/* Success Screen */
.success-container {
    text-align: center;
    padding: 20px;
}
.success-icon {
    font-size: 60px;
    margin-bottom: 15px;
    animation: successPop 0.5s;
}
@keyframes successPop {
    0% { transform: scale(0); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}
.success-title {
    font-size: 24px;
    font-weight: 800;
    color: var(--gold);
    margin-bottom: 10px;
}
.pin-display {
    background: var(--card);
    border: 3px solid var(--gold);
    border-radius: 15px;
    padding: 20px;
    margin: 15px 0;
}
.pin-label { font-size: 14px; color: var(--text-dim); margin-bottom: 5px; }
.pin-number {
    font-size: 36px;
    font-weight: 800;
    color: var(--gold);
    letter-spacing: 8px;
}

/* Confetti */
.confetti-container {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    pointer-events: none;
    z-index: 999;
}
.confetti {
    position: absolute;
    width: 10px;
    height: 10px;
    animation: confettiFall 3s forwards;
}
@keyframes confettiFall {
    0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
    100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
}
</style>
</head>
<body class="en">

<div class="landing" id="landing">
    <div class="header">
        <div class="logo"><span class="laugh">LAUGHTER</span> <span class="ter">WORKOUTS</span>â„¢</div>
        <div class="lang-toggle">
            <button class="lang-btn active" data-lang="en">EN</button>
            <button class="lang-btn" data-lang="es">ES</button>
        </div>
    </div>
    
    <div class="hero">
        <div class="hero-icon" id="heroIcon">
            <img src="go_chat.png" alt="Coach GoTrotter AI">
        </div>
        <h1 class="hero-title">
            <span class="lang-en">Exercise Your <span class="gold">Memory</span>.<br>Exercise Your <span class="gold">Smile</span>.</span>
            <span class="lang-es">Ejercita Tu <span class="gold">Memoria</span>.<br>Ejercita Tu <span class="gold">Sonrisa</span>.</span>
        </h1>
        <p class="hero-sub">
            <span class="lang-en"><strong>4 Laughter Workouts. 10 Tiers.</strong> The ONLY brain training built on joy!</span>
            <span class="lang-es"><strong>4 Ejercicios de Risa. 10 Niveles.</strong> Â¡El ÃšNICO entrenamiento mental basado en alegrÃ­a!</span>
        </p>
        <p class="hero-cta">
            <span class="lang-en">Questions? <a id="chatCta">Talk to Coach GoTrotter AI â†’</a></span>
            <span class="lang-es">Â¿Preguntas? <a id="chatCtaEs">Habla con Coach GoTrotter AI â†’</a></span>
        </p>
    </div>
    
    <button class="go-btn" id="goBtn">
        <img src="go_chat.png" alt="" class="go-btn-icon">
        <span class="lang-en">START LAUGHING!</span>
        <span class="lang-es">Â¡A REÃR!</span>
    </button>
    
    <div class="footer-text">
        Â© 2026 <span class="lang-en">Laughter Workoutsâ„¢ by</span><span class="lang-es">Laughter Workoutsâ„¢ por</span> <a href="#">Akashic Works LLC</a>
    </div>
</div>

<button class="chat-fab" id="chatFab">
    <span class="chat-fab-label">
        <span class="lang-en">Chat with Coach ğŸ˜‚</span>
        <span class="lang-es">Habla con el Coach ğŸ˜‚</span>
    </span>
    <img src="go_chat.png" alt="Coach">
</button>

<div class="chat-screen" id="chatScreen">
    <div class="chat-header">
        <div class="chat-header-left">
            <div class="chat-avatar"><img src="go_chat.png" alt="Coach" class="chat-avatar-img"></div>
            <div>
                <div class="chat-title"><span class="go">GO</span><span class="tr">TROTTER</span>â„¢ AI</div>
                <div class="chat-subtitle">Laughter Coach ğŸ˜‚</div>
                <div class="chat-status"><span class="chat-dot"></span><span class="lang-en">Ready to make you laugh</span><span class="lang-es">Listo para hacerte reÃ­r</span></div>
            </div>
        </div>
        <div class="chat-header-right">
            <button class="chat-lang-btn active" data-lang="en">EN</button>
            <button class="chat-lang-btn" data-lang="es">ES</button>
            <button class="chat-close" id="chatClose">Ã—</button>
        </div>
    </div>
    <div class="chat-body" id="chatBody"></div>
    <div class="chat-input-area" id="chatInputArea">
        <div class="chat-input-row">
            <input type="text" class="chat-input" id="chatInput" maxlength="100" placeholder="Type a message...">
            <button class="chat-send" id="chatSend"><svg viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg></button>
        </div>
    </div>
</div>

<div class="confetti-container" id="confettiContainer"></div>

<script>
(function(){
    // ========== LANGUAGE HANDLING ==========
    var lang = localStorage.getItem('lw-lang') || 'en';
    function setLang(l) {
        lang = l;
        localStorage.setItem('lw-lang', l);
        document.body.className = l;
        document.querySelectorAll('.lang-btn, .chat-lang-btn').forEach(function(b) {
            b.classList.toggle('active', b.dataset.lang === l);
        });
    }
    setLang(lang);
    document.querySelectorAll('.lang-btn, .chat-lang-btn').forEach(function(b) {
        b.addEventListener('click', function(e) {
            e.preventDefault();
            setLang(this.dataset.lang);
        });
    });

    // ========== DOM ELEMENTS ==========
    var landing = document.getElementById('landing');
    var chatScreen = document.getElementById('chatScreen');
    var chatBody = document.getElementById('chatBody');
    var chatInputArea = document.getElementById('chatInputArea');
    var chatInput = document.getElementById('chatInput');
    var chatSend = document.getElementById('chatSend');
    var goBtn = document.getElementById('goBtn');
    var chatClose = document.getElementById('chatClose');
    var confettiContainer = document.getElementById('confettiContainer');
    
    var selectedBilling = 'monthly';

    // ========== FUNNY JOKES DATABASE ğŸ˜‚ ==========
    var jokes = {
        greetings: [
            {en: "Why did the brain go to the gym? To work on its THINK-ing muscles! ğŸ’ªğŸ§ ", es: "Â¿Por quÃ© el cerebro fue al gimnasio? Â¡Para trabajar sus mÃºsculos de PENSAR! ğŸ’ªğŸ§ "},
            {en: "I told my memory a joke... it forgot to laugh! ğŸ˜‚", es: "Â¡Le contÃ© un chiste a mi memoria... se le olvidÃ³ reÃ­r! ğŸ˜‚"},
            {en: "What do you call a brain that tells jokes? A PUNDER-ful organ! ğŸ­", es: "Â¿CÃ³mo llamas a un cerebro que cuenta chistes? Â¡Un Ã³rgano CHIST-oso! ğŸ­"},
            {en: "My neurons are having a party... want to join? ğŸ‰ğŸ§ ", es: "Mis neuronas estÃ¡n de fiesta... Â¿quieres unirte? ğŸ‰ğŸ§ "},
            {en: "Exercise your brain, they said. It'll be fun, they said. They were RIGHT! ğŸ˜„", es: "Ejercita tu cerebro, dijeron. SerÃ¡ divertido, dijeron. Â¡TENÃAN RAZÃ“N! ğŸ˜„"},
            {en: "I'm not just a coach... I'm a LAUGH-lete trainer! ğŸ†ğŸ˜‚", es: "No soy solo un coach... Â¡soy un entrenador de RISA-letas! ğŸ†ğŸ˜‚"}
        ],
        encouragement: [
            {en: "Your brain cells are doing a happy dance right now! ğŸ’ƒğŸ§ ", es: "Â¡Tus cÃ©lulas cerebrales estÃ¡n bailando de alegrÃ­a ahora mismo! ğŸ’ƒğŸ§ "},
            {en: "Warning: Side effects may include EXTREME happiness! âš ï¸ğŸ˜Š", es: "Advertencia: Â¡Los efectos secundarios pueden incluir EXTREMA felicidad! âš ï¸ğŸ˜Š"},
            {en: "Your neurons called. They want MORE workouts! ğŸ“ğŸ§ ", es: "Tus neuronas llamaron. Â¡Quieren MÃS ejercicios! ğŸ“ğŸ§ "},
            {en: "Plot twist: Getting smarter is actually FUN! ğŸ¬ğŸ˜„", es: "Giro inesperado: Â¡Volverse mÃ¡s inteligente es DIVERTIDO! ğŸ¬ğŸ˜„"}
        ],
        pricing: [
            {en: "For less than a fancy coffee, your brain gets a spa day! â˜•ğŸ§ ", es: "Â¡Por menos que un cafÃ© elegante, tu cerebro tiene un dÃ­a de spa! â˜•ğŸ§ "},
            {en: "5 bucks? That's like paying 1.25 cents per brain cell party! ğŸ‰", es: "Â¿5 dÃ³lares? Â¡Es como pagar 1.25 centavos por fiesta de cÃ©lulas cerebrales! ğŸ‰"},
            {en: "Skip ONE avocado toast = MONTHS of brain gains! ğŸ¥‘â¡ï¸ğŸ§ ", es: "Â¡Salta UNA tostada de aguacate = MESES de ganancias cerebrales! ğŸ¥‘â¡ï¸ğŸ§ "}
        ],
        success: [
            {en: "BOOM! ğŸ’¥ You just made the smartest decision today!", es: "Â¡BOOM! ğŸ’¥ Â¡Acabas de tomar la decisiÃ³n mÃ¡s inteligente de hoy!"},
            {en: "Your future self is already thanking you! ğŸ™ğŸ˜Š", es: "Â¡Tu yo del futuro ya te estÃ¡ agradeciendo! ğŸ™ğŸ˜Š"},
            {en: "Achievement unlocked: BRAIN CHAMPION! ğŸ†ğŸ§ ", es: "Â¡Logro desbloqueado: CAMPEÃ“N CEREBRAL! ğŸ†ğŸ§ "}
        ],
        returning: [
            {en: "Welcome back, Brain Champion! ğŸ† Ready for more laughs?", es: "Â¡Bienvenido de vuelta, CampeÃ³n Cerebral! ğŸ† Â¿Listo para mÃ¡s risas?"},
            {en: "Look who's back! Your neurons missed you! ğŸ§ â¤ï¸", es: "Â¡Mira quiÃ©n volviÃ³! Â¡Tus neuronas te extraÃ±aban! ğŸ§ â¤ï¸"},
            {en: "The legend returns! Let's make your brain smile! ğŸ˜„", es: "Â¡La leyenda regresa! Â¡Hagamos sonreÃ­r a tu cerebro! ğŸ˜„"}
        ]
    };
    
    function getRandomJoke(category) {
        var arr = jokes[category] || jokes.greetings;
        var joke = arr[Math.floor(Math.random() * arr.length)];
        return lang === 'es' ? joke.es : joke.en;
    }

    // ========== BILINGUAL HELPER ==========
    function bi(en, es) {
        return lang === 'es' ? es : en;
    }

    // ========== CHAT FUNCTIONS ==========
    function clearChat() {
        chatBody.innerHTML = '';
    }

    function showTyping() {
        var typing = document.createElement('div');
        typing.className = 'typing';
        typing.id = 'typingIndicator';
        typing.innerHTML = '<span></span><span></span><span></span>';
        chatBody.appendChild(typing);
        chatBody.scrollTop = chatBody.scrollHeight;
    }

    function hideTyping() {
        var t = document.getElementById('typingIndicator');
        if (t) t.remove();
    }

    function addMsg(text, isUser) {
        hideTyping();
        var msg = document.createElement('div');
        msg.className = 'msg ' + (isUser ? 'user' : 'bot');
        msg.innerHTML = text;
        chatBody.appendChild(msg);
        chatBody.scrollTop = chatBody.scrollHeight;
    }

    function addQuickReplies(buttons) {
        hideTyping();
        var qr = document.createElement('div');
        qr.className = 'quick-replies';
        buttons.forEach(function(btn) {
            var b = document.createElement('button');
            b.className = 'qr-btn' + (btn.primary ? ' primary' : '');
            b.textContent = lang === 'es' ? btn.labelEs : btn.labelEn;
            b.onclick = function() {
                qr.remove();
                handleAction(btn.action);
            };
            qr.appendChild(b);
        });
        chatBody.appendChild(qr);
        chatBody.scrollTop = chatBody.scrollHeight;
    }

    function botSay(text, buttons, delay) {
        delay = delay || 300;
        showTyping();
        setTimeout(function() {
            addMsg(text, false);
            if (buttons && buttons.length) {
                setTimeout(function() {
                    addQuickReplies(buttons);
                }, 200);
            }
        }, delay);
    }

    // ========== CONFETTI ==========
    function fireConfetti() {
        var colors = ['#FFD700', '#6B21A8', '#22C55E', '#EF4444', '#3B82F6', '#EC4899'];
        for (var i = 0; i < 50; i++) {
            setTimeout(function() {
                var confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                confettiContainer.appendChild(confetti);
                setTimeout(function() { confetti.remove(); }, 3000);
            }, i * 50);
        }
    }

    // ========== ACTION HANDLERS ==========
    function handleAction(action) {
        switch(action) {
            case 'learn_more':
                showLearnMore();
                break;
            case 'returning':
                showPinEntry();
                break;
            case 'see_workouts':
                showWorkouts();
                break;
            case 'see_pricing':
                showPricing();
                break;
            case 'start_trial':
                startTrial();
                break;
            case 'go_yearly':
                selectedBilling = 'yearly';
                showPricing();
                break;
            case 'go_monthly':
                selectedBilling = 'monthly';
                showPricing();
                break;
            case 'play_now':
                goToHub();
                break;
            default:
                botSay(bi(
                    "Oops! My circuits got tickled! ğŸ˜‚ Let's try that again...",
                    "Â¡Ups! Â¡Mis circuitos se rieron! ğŸ˜‚ Intentemos de nuevo..."
                ), [
                    {labelEn: 'ğŸ˜‚ TELL ME MORE', labelEs: 'ğŸ˜‚ CUÃ‰NTAME MÃS', action: 'learn_more', primary: true}
                ]);
        }
    }

    function showLearnMore() {
        var joke = getRandomJoke('encouragement');
        botSay(bi(
            '<strong>Laughter Workouts</strong> is brain training that actually makes you SMILE! ğŸ˜„<br><br><span style="color:var(--gold);font-style:italic;">' + joke + '</span>',
            '<strong>Laughter Workouts</strong> es entrenamiento cerebral que realmente te hace SONREÃR! ğŸ˜„<br><br><span style="color:var(--gold);font-style:italic;">' + joke + '</span>'
        ), false);
        
        setTimeout(function() {
            botSay(bi(
                'ğŸ¯ <strong>4 FUN Workouts</strong><br>ğŸ† <strong>10 Achievement Tiers</strong><br>ğŸ˜‚ <strong>Laughter Built In</strong><br>ğŸŒ <strong>English & Spanish</strong>',
                'ğŸ¯ <strong>4 Ejercicios DIVERTIDOS</strong><br>ğŸ† <strong>10 Niveles de Logros</strong><br>ğŸ˜‚ <strong>Risa Incorporada</strong><br>ğŸŒ <strong>InglÃ©s y EspaÃ±ol</strong>'
            ), [
                {labelEn: 'ğŸ® SEE WORKOUTS', labelEs: 'ğŸ® VER EJERCICIOS', action: 'see_workouts', primary: true},
                {labelEn: 'ğŸ’° SEE PRICING', labelEs: 'ğŸ’° VER PRECIOS', action: 'see_pricing'}
            ], 600);
        }, 800);
    }

    function showWorkouts() {
        botSay(bi(
            "Here are your <strong>4 Laughter Workouts</strong>! Each one exercises different parts of your brain... while making you giggle! ğŸ§ ğŸ˜‚",
            "Â¡AquÃ­ estÃ¡n tus <strong>4 Ejercicios de Risa</strong>! Cada uno ejercita diferentes partes de tu cerebro... Â¡mientras te hace reÃ­r! ğŸ§ ğŸ˜‚"
        ), false);
        
        setTimeout(function() {
            hideTyping();
            var grid = document.createElement('div');
            grid.className = 'workout-grid';
            
            var workouts = [
                {emoji: 'ğŸ—ºï¸', nameEn: 'MAP', nameEs: 'MAPA', descEn: 'Memory & Patterns', descEs: 'Memoria y Patrones'},
                {emoji: 'âš¡', nameEn: 'MOVE', nameEs: 'MOVER', descEn: 'Speed & Recall', descEs: 'Velocidad y Recuerdo'},
                {emoji: 'ğŸƒ', nameEn: 'MATCH', nameEs: 'EMPAREJAR', descEn: 'Focus & Sequence', descEs: 'Enfoque y Secuencia'},
                {emoji: 'ğŸ˜‚', nameEn: 'LAUGH', nameEs: 'REÃR', descEn: 'Joy & Recognition', descEs: 'AlegrÃ­a y Reconocimiento'}
            ];
            
            workouts.forEach(function(w) {
                var card = document.createElement('div');
                card.className = 'workout-card';
                card.innerHTML = '<div class="workout-emoji">' + w.emoji + '</div>' +
                    '<div class="workout-name">' + (lang === 'es' ? w.nameEs : w.nameEn) + '</div>' +
                    '<div class="workout-desc">' + (lang === 'es' ? w.descEs : w.descEn) + '</div>';
                grid.appendChild(card);
            });
            
            chatBody.appendChild(grid);
            chatBody.scrollTop = chatBody.scrollHeight;
            
            setTimeout(function() {
                var joke = getRandomJoke('encouragement');
                botSay(bi(
                    '<span style="color:var(--gold);font-style:italic;">' + joke + '</span><br><br>Ready to unlock ALL of these?',
                    '<span style="color:var(--gold);font-style:italic;">' + joke + '</span><br><br>Â¿Listo para desbloquear TODOS estos?'
                ), [
                    {labelEn: 'ğŸ’° SEE PRICING', labelEs: 'ğŸ’° VER PRECIOS', action: 'see_pricing', primary: true},
                    {labelEn: 'ğŸ”‘ I HAVE PIN', labelEs: 'ğŸ”‘ TENGO PIN', action: 'returning'}
                ], 400);
            }, 300);
            
        }, 600);
    }

    function showPricing() {
        var joke = getRandomJoke('pricing');
        botSay(bi(
            'Time for the BEST deal in brain training! ğŸ§ ğŸ’°<br><br><span style="color:var(--gold);font-style:italic;">' + joke + '</span>',
            'Â¡Es hora de la MEJOR oferta en entrenamiento cerebral! ğŸ§ ğŸ’°<br><br><span style="color:var(--gold);font-style:italic;">' + joke + '</span>'
        ), false);
        
        setTimeout(function() {
            hideTyping();
            
            // Billing toggle
            var toggle = document.createElement('div');
            toggle.className = 'billing-toggle';
            toggle.innerHTML = '<button class="billing-btn' + (selectedBilling === 'monthly' ? ' active' : '') + '" data-plan="monthly">' + bi('Monthly', 'Mensual') + '</button>' +
                '<button class="billing-btn' + (selectedBilling === 'yearly' ? ' active' : '') + '" data-plan="yearly">' + bi('Yearly (Save 17%!)', 'Â¡Anual (Ahorra 17%!)') + '</button>';
            
            toggle.querySelectorAll('.billing-btn').forEach(function(btn) {
                btn.onclick = function() {
                    toggle.querySelectorAll('.billing-btn').forEach(function(b) { b.classList.remove('active'); });
                    this.classList.add('active');
                    selectedBilling = this.dataset.plan;
                    updatePriceCard();
                };
            });
            
            chatBody.appendChild(toggle);
            
            // Price card
            var priceCard = document.createElement('div');
            priceCard.className = 'price-card';
            priceCard.id = 'priceCard';
            chatBody.appendChild(priceCard);
            
            updatePriceCard();
            chatBody.scrollTop = chatBody.scrollHeight;
            
            setTimeout(function() {
                botSay(bi(
                    "ğŸ <strong>7-DAY FREE TRIAL!</strong> No charge until day 8. Cancel anytime! Your brain (and wallet) will thank you! ğŸ˜‚",
                    "ğŸ <strong>Â¡PRUEBA GRATIS DE 7 DÃAS!</strong> Sin cobro hasta el dÃ­a 8. Â¡Cancela cuando quieras! Â¡Tu cerebro (y billetera) te lo agradecerÃ¡n! ğŸ˜‚"
                ), [
                    {labelEn: 'ğŸš€ START FREE TRIAL', labelEs: 'ğŸš€ COMENZAR PRUEBA GRATIS', action: 'start_trial', primary: true}
                ], 400);
            }, 300);
            
        }, 600);
    }

    function updatePriceCard() {
        var card = document.getElementById('priceCard');
        if (!card) return;
        
        var isYearly = selectedBilling === 'yearly';
        var price = isYearly ? '$50' : '$5';
        var period = isYearly ? bi('/year', '/aÃ±o') : bi('/month', '/mes');
        var savings = isYearly ? '<div style="color:var(--green);font-weight:700;margin-top:5px;">ğŸ’° ' + bi('Save $10/year!', 'Â¡Ahorra $10/aÃ±o!') + '</div>' : '';
        
        card.innerHTML = '<div class="price-badge">' + bi('7-DAY FREE TRIAL', 'PRUEBA GRATIS 7 DÃAS') + '</div>' +
            '<div class="price-amount">' + price + '<span class="price-period">' + period + '</span></div>' + savings +
            '<div class="price-features">' +
            '<div><span>âœ…</span>' + bi('All 4 Laughter Workouts', 'Los 4 Ejercicios de Risa') + '</div>' +
            '<div><span>âœ…</span>' + bi('10 Achievement Tiers', '10 Niveles de Logros') + '</div>' +
            '<div><span>âœ…</span>' + bi('Progress Tracking', 'Seguimiento de Progreso') + '</div>' +
            '<div><span>âœ…</span>' + bi('English & Spanish', 'InglÃ©s y EspaÃ±ol') + '</div>' +
            '<div><span>âœ…</span>' + bi('Cancel Anytime', 'Cancela Cuando Quieras') + '</div>' +
            '</div>';
    }

    function startTrial() {
        botSay(bi(
            "ğŸ‰ AWESOME! Taking you to secure checkout... Your brain is about to get JACKED! ğŸ’ªğŸ§ ğŸ˜‚",
            "ğŸ‰ Â¡GENIAL! LlevÃ¡ndote al pago seguro... Â¡Tu cerebro estÃ¡ a punto de ponerse FUERTE! ğŸ’ªğŸ§ ğŸ˜‚"
        ), false);
        
        setTimeout(function() {
            // In production, redirect to Stripe
            // window.location.href = 'https://buy.stripe.com/your_link_here';
            
            // For demo, show success
            showSuccess('1234');
        }, 1500);
    }

    function showPinEntry() {
        var joke = getRandomJoke('returning');
        botSay(bi(
            joke + '<br><br>Enter your 4-digit PIN to jump back in! ğŸ”‘',
            joke + '<br><br>Â¡Ingresa tu PIN de 4 dÃ­gitos para volver! ğŸ”‘'
        ), false);
        
        setTimeout(function() {
            hideTyping();
            var pinContainer = document.createElement('div');
            pinContainer.className = 'pin-container';
            pinContainer.innerHTML = '<div class="pin-inputs">' +
                '<input type="text" class="pin-digit" maxlength="1" inputmode="numeric" pattern="[0-9]*">' +
                '<input type="text" class="pin-digit" maxlength="1" inputmode="numeric" pattern="[0-9]*">' +
                '<input type="text" class="pin-digit" maxlength="1" inputmode="numeric" pattern="[0-9]*">' +
                '<input type="text" class="pin-digit" maxlength="1" inputmode="numeric" pattern="[0-9]*">' +
                '</div>' +
                '<button class="pin-submit">' + bi('LET\'S GO! ğŸš€', 'Â¡VAMOS! ğŸš€') + '</button>';
            
            chatBody.appendChild(pinContainer);
            
            var digits = pinContainer.querySelectorAll('.pin-digit');
            digits[0].focus();
            
            digits.forEach(function(d, i) {
                d.addEventListener('input', function() {
                    if (this.value && i < 3) digits[i + 1].focus();
                });
                d.addEventListener('keydown', function(e) {
                    if (e.key === 'Backspace' && !this.value && i > 0) {
                        digits[i - 1].focus();
                    }
                });
            });
            
            pinContainer.querySelector('.pin-submit').onclick = function() {
                var pin = '';
                digits.forEach(function(d) { pin += d.value; });
                if (pin.length === 4) {
                    validatePin(pin);
                }
            };
            
            chatBody.scrollTop = chatBody.scrollHeight;
        }, 600);
    }

    function validatePin(pin) {
        botSay(bi(
            "ğŸ” Checking your PIN... Asking the brain cells to verify... ğŸ§ ",
            "ğŸ” Verificando tu PIN... Preguntando a las cÃ©lulas cerebrales... ğŸ§ "
        ), false);
        
        setTimeout(function() {
            // In production, validate against backend
            // For demo, accept any 4-digit PIN
            fireConfetti();
            botSay(bi(
                "âœ… <strong>WELCOME BACK, BRAIN CHAMPION!</strong> ğŸ†<br><br>Your neurons are throwing a party! Let's get to your workouts! ğŸ‰ğŸ˜‚",
                "âœ… <strong>Â¡BIENVENIDO DE VUELTA, CAMPEÃ“N CEREBRAL!</strong> ğŸ†<br><br>Â¡Tus neuronas estÃ¡n de fiesta! Â¡Vamos a tus ejercicios! ğŸ‰ğŸ˜‚"
            ), [
                {labelEn: 'ğŸ® PLAY NOW', labelEs: 'ğŸ® JUGAR AHORA', action: 'play_now', primary: true}
            ], 600);
        }, 1500);
    }

    function showSuccess(pin) {
        fireConfetti();
        var joke = getRandomJoke('success');
        
        hideTyping();
        var success = document.createElement('div');
        success.className = 'success-container';
        success.innerHTML = '<div class="success-icon">ğŸ‰</div>' +
            '<div class="success-title">' + bi('WELCOME TO THE FUN!', 'Â¡BIENVENIDO A LA DIVERSIÃ“N!') + '</div>' +
            '<p style="color:var(--gold);font-style:italic;margin-bottom:15px;">' + joke + '</p>' +
            '<div class="pin-display">' +
            '<div class="pin-label">' + bi('Your Personal PIN (Save This!)', 'Tu PIN Personal (Â¡GuÃ¡rdalo!)') + '</div>' +
            '<div class="pin-number">' + pin + '</div>' +
            '</div>' +
            '<p style="font-size:14px;color:var(--text-dim);">' + bi('Use this PIN to access your workouts anytime!', 'Â¡Usa este PIN para acceder a tus ejercicios en cualquier momento!') + '</p>';
        
        chatBody.appendChild(success);
        chatBody.scrollTop = chatBody.scrollHeight;
        
        setTimeout(function() {
            botSay(bi(
                "Your 7-day free trial is ACTIVE! ğŸŠ<br><br>Ready to start laughing AND getting smarter? ğŸ˜‚ğŸ§ ",
                "Â¡Tu prueba gratis de 7 dÃ­as estÃ¡ ACTIVA! ğŸŠ<br><br>Â¿Listo para empezar a reÃ­r Y a ser mÃ¡s inteligente? ğŸ˜‚ğŸ§ "
            ), [
                {labelEn: 'ğŸ® START PLAYING!', labelEs: 'ğŸ® Â¡EMPEZAR A JUGAR!', action: 'play_now', primary: true}
            ], 800);
        }, 1000);
    }

    function goToHub() {
        window.location.href = 'laugh-hub.html';
    }

    // ========== URL PARAMS (Stripe callbacks) ==========
    function checkUrlParams() {
        var params = new URLSearchParams(window.location.search);
        if (params.get('success') === 'true') {
            openChat();
            setTimeout(function() {
                var pin = params.get('pin') || '1234';
                showSuccess(pin);
            }, 500);
            return true;
        }
        if (params.get('canceled') === 'true') {
            openChat();
            setTimeout(function() {
                botSay(bi(
                    "No worries! ğŸ˜Š Changed your mind? Your brain cells are patient... but eager! ğŸ§ <br><br>Ready when you are!",
                    "Â¡No te preocupes! ğŸ˜Š Â¿Cambiaste de opiniÃ³n? Tus cÃ©lulas cerebrales son pacientes... Â¡pero ansiosas! ğŸ§ <br><br>Â¡Listo cuando quieras!"
                ), [
                    {labelEn: 'ğŸ˜‚ TELL ME MORE', labelEs: 'ğŸ˜‚ CUÃ‰NTAME MÃS', action: 'learn_more', primary: true},
                    {labelEn: 'ğŸ’° SEE PRICING', labelEs: 'ğŸ’° VER PRECIOS', action: 'see_pricing'}
                ]);
            }, 500);
            return true;
        }
        return false;
    }

    // ========== OPEN CHAT ==========
    function openChat() {
        landing.classList.add('hidden');
        document.getElementById('chatFab').classList.add('hidden');
        chatScreen.classList.add('active');
        
        if (chatBody.children.length === 0) {
            var joke = getRandomJoke('greetings');
            setTimeout(function() {
                botSay(bi(
                    'ğŸ˜‚ I\'m <strong>Coach GoTrotter AI</strong> â€” your laughter coach!<br><br><span style="color:var(--gold);font-style:italic;">' + joke + '</span>',
                    'Â¡Hola! ğŸ˜‚ Soy <strong>Coach GoTrotter AI</strong> â€” Â¡tu coach de risa!<br><br><span style="color:var(--gold);font-style:italic;">' + joke + '</span>'
                ), false);
                botSay(bi(
                    'Ready to exercise your memory AND your smile? ğŸ’ªğŸ˜‚',
                    'Â¿Listo para ejercitar tu memoria Y tu sonrisa? ğŸ’ªğŸ˜‚'
                ), [
                    {labelEn: 'ğŸ˜‚ TELL ME MORE', labelEs: 'ğŸ˜‚ CUÃ‰NTAME MÃS', action: 'learn_more', primary: true},
                    {labelEn: 'ğŸ”‘ I Have PIN', labelEs: 'ğŸ”‘ Tengo PIN', action: 'returning'}
                ], 600);
            }, 400);
        }
    }

    // ========== EVENT LISTENERS ==========
    goBtn.addEventListener('click', openChat);
    document.getElementById('chatFab').addEventListener('click', openChat);
    document.getElementById('chatCta').addEventListener('click', openChat);
    document.getElementById('chatCtaEs').addEventListener('click', openChat);
    document.getElementById('heroIcon').addEventListener('click', openChat);
    
    chatClose.addEventListener('click', function() {
        chatScreen.classList.remove('active');
        landing.classList.remove('hidden');
        document.getElementById('chatFab').classList.remove('hidden');
    });
    
    chatSend.addEventListener('click', function() {
        var text = chatInput.value.trim();
        if (text) {
            addMsg(text, true);
            chatInput.value = '';
            // AI response for free-text
            setTimeout(function() {
                var responses = [
                    bi("Ha! Good one! ğŸ˜‚ But let me help you with something...", "Â¡Ja! Â¡Buena esa! ğŸ˜‚ Pero dÃ©jame ayudarte con algo..."),
                    bi("I love the enthusiasm! ğŸ‰ Here's what we can do...", "Â¡Me encanta el entusiasmo! ğŸ‰ Esto es lo que podemos hacer..."),
                    bi("Your brain cells are tingling with excitement! ğŸ§ âœ¨", "Â¡Tus cÃ©lulas cerebrales estÃ¡n hormigueando de emociÃ³n! ğŸ§ âœ¨")
                ];
                botSay(responses[Math.floor(Math.random() * responses.length)], [
                    {labelEn: 'ğŸ˜‚ TELL ME MORE', labelEs: 'ğŸ˜‚ CUÃ‰NTAME MÃS', action: 'learn_more', primary: true},
                    {labelEn: 'ğŸ”‘ I Have PIN', labelEs: 'ğŸ”‘ Tengo PIN', action: 'returning'}
                ]);
            }, 800);
        }
    });
    
    chatInput.addEventListener('keydown', function(e) {
        if (e.key === 'Enter') {
            chatSend.click();
        }
    });
    
    // Check URL params on load
    if (!checkUrlParams()) {
        // Normal load - nothing special
    }
})();
</script>
</body>
</html>
