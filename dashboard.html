<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Choose Your Workout | LaughCourt</title>
<link rel="icon" type="image/png" href="favicon.png">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Outfit:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
:root {
    --gold: #FFD700;
    --orange: #FF6B35;
    --teal: #00D9A5;
    --dark: #0a0a0f;
    --darker: #050508;
    --card: #111118;
    --text: #FFFFFF;
    --muted: #8892a0;
    --border: rgba(255,255,255,0.08);
}

* { margin: 0; padding: 0; box-sizing: border-box; }

html, body {
    width: 100%;
    max-width: 100vw;
    overflow-x: hidden;
}

body {
    font-family: 'Outfit', sans-serif;
    background: var(--dark);
    color: var(--text);
    min-height: 100vh;
    min-height: 100dvh;
}

body.es .lang-en { display: none !important; }
body.en .lang-es { display: none !important; }

/* ============ HEADER ============ */
.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 15px;
    background: var(--darker);
    border-bottom: 1px solid var(--border);
    width: 100%;
}

.logo {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 1.3rem;
    letter-spacing: 2px;
    display: flex;
    align-items: center;
    gap: 6px;
    flex-shrink: 0;
}
.logo .ball { font-size: 1.1rem; }
.logo .laugh { color: var(--gold); }
.logo .court { color: var(--text); }

.header-right {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-shrink: 0;
}

.lang-toggle {
    display: flex;
    gap: 2px;
    background: var(--card);
    padding: 2px;
    border-radius: 6px;
    border: 1px solid var(--border);
}
.lang-btn {
    padding: 4px 8px;
    border: none;
    background: transparent;
    color: var(--muted);
    border-radius: 4px;
    font-weight: 600;
    font-size: 0.65rem;
    cursor: pointer;
    font-family: 'Outfit', sans-serif;
    transition: all 0.2s;
}
.lang-btn.active {
    background: var(--gold);
    color: var(--dark);
}

.logout-btn {
    padding: 6px 12px;
    background: transparent;
    border: 1px solid var(--border);
    color: var(--muted);
    border-radius: 6px;
    font-size: 0.65rem;
    font-family: 'Outfit', sans-serif;
    cursor: pointer;
    transition: all 0.2s;
}
.logout-btn:hover {
    border-color: var(--gold);
    color: var(--gold);
}

/* ============ MAIN ============ */
.main {
    width: 100%;
    max-width: 500px;
    margin: 0 auto;
    padding: 20px 15px 30px;
}

.page-title {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 1.6rem;
    letter-spacing: 2px;
    text-align: center;
    margin-bottom: 5px;
    color: var(--gold);
}

.page-subtitle {
    text-align: center;
    font-size: 0.75rem;
    color: var(--muted);
    margin-bottom: 20px;
}

/* ============ WORKOUT GRID - 2 CARDS ============ */
.workout-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-bottom: 20px;
    width: 100%;
}

.workout-card {
    background: var(--card);
    border: 2px solid var(--border);
    border-radius: 14px;
    padding: 20px 10px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s;
    text-decoration: none;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: 0; /* Prevents grid blowout */
}

.workout-card:active {
    transform: scale(0.98);
}

.workout-card.match {
    border-color: rgba(255, 107, 53, 0.3);
}
.workout-card.match:active {
    border-color: var(--orange);
    box-shadow: 0 5px 20px rgba(255, 107, 53, 0.2);
}

.workout-card.sequence {
    border-color: rgba(0, 217, 165, 0.3);
}
.workout-card.sequence:active {
    border-color: var(--teal);
    box-shadow: 0 5px 20px rgba(0, 217, 165, 0.2);
}

.workout-icon {
    font-size: 2.5rem;
    margin-bottom: 8px;
    display: block;
    line-height: 1;
}

.workout-name {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 1.2rem;
    letter-spacing: 1px;
    color: var(--text);
    margin-bottom: 6px;
}

.workout-card.match .workout-name { color: var(--orange); }
.workout-card.sequence .workout-name { color: var(--teal); }

.workout-desc {
    font-size: 0.7rem;
    color: var(--muted);
    margin-bottom: 12px;
    line-height: 1.3;
}

.workout-level {
    display: inline-block;
    padding: 5px 12px;
    background: rgba(255,255,255,0.05);
    border-radius: 15px;
    font-size: 0.65rem;
    font-weight: 600;
    color: var(--text);
    letter-spacing: 1px;
}

/* ============ PROGRESS SECTION ============ */
.progress-section {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 15px;
    text-align: center;
    margin-bottom: 15px;
    width: 100%;
}

.progress-title {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 0.85rem;
    letter-spacing: 2px;
    color: var(--muted);
    margin-bottom: 8px;
}

.gostars-display {
    font-size: 1.4rem;
    letter-spacing: 2px;
    margin-bottom: 4px;
    word-break: break-all;
}

.gostars-label {
    font-size: 0.75rem;
    color: var(--gold);
    font-weight: 600;
}

/* ============ SPEED SELECTOR ============ */
.speed-section {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 15px;
    text-align: center;
    margin-bottom: 15px;
    width: 100%;
}

.speed-title {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 0.85rem;
    letter-spacing: 2px;
    color: var(--muted);
    margin-bottom: 12px;
}

.speed-buttons {
    display: flex;
    justify-content: center;
    gap: 8px;
    width: 100%;
}

.speed-btn {
    flex: 1;
    max-width: 100px;
    padding: 10px 8px;
    border: 2px solid var(--border);
    background: transparent;
    color: var(--muted);
    border-radius: 8px;
    font-family: 'Bebas Neue', sans-serif;
    font-size: 0.85rem;
    letter-spacing: 1px;
    cursor: pointer;
    transition: all 0.2s;
}

.speed-btn:active {
    transform: scale(0.95);
}

.speed-btn.active {
    background: var(--gold);
    border-color: var(--gold);
    color: var(--dark);
}

.speed-btn.locked {
    opacity: 0.4;
    cursor: not-allowed;
}

/* ============ TRIAL BANNER ============ */
.trial-banner {
    background: linear-gradient(135deg, rgba(255,215,0,0.1), rgba(255,107,53,0.1));
    border: 1px solid rgba(255,215,0,0.2);
    border-radius: 12px;
    padding: 12px 15px;
    text-align: center;
    margin-bottom: 15px;
    width: 100%;
}

.trial-text {
    font-size: 0.75rem;
    color: var(--text);
    margin-bottom: 5px;
}

.trial-days {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 1rem;
    color: var(--gold);
    letter-spacing: 2px;
}

.upgrade-link {
    display: inline-block;
    margin-top: 8px;
    padding: 6px 16px;
    background: var(--gold);
    color: var(--dark);
    text-decoration: none;
    border-radius: 15px;
    font-size: 0.7rem;
    font-weight: 700;
    transition: all 0.2s;
}

.upgrade-link:active {
    transform: scale(0.95);
}

/* ============ FOOTER NAV ============ */
.footer-nav {
    display: flex;
    justify-content: center;
    gap: 15px;
    padding-top: 10px;
    flex-wrap: wrap;
}

.footer-link {
    color: var(--muted);
    text-decoration: none;
    font-size: 0.75rem;
    transition: color 0.2s;
}

.footer-link:active {
    color: var(--gold);
}

/* ============ RESPONSIVE - LARGER SCREENS ============ */
@media (min-width: 400px) {
    .header { padding: 15px 20px; }
    .logo { font-size: 1.5rem; }
    .lang-btn { padding: 5px 10px; font-size: 0.7rem; }
    .logout-btn { padding: 8px 15px; font-size: 0.75rem; }
    .main { padding: 25px 20px 40px; }
    .page-title { font-size: 1.8rem; }
    .page-subtitle { font-size: 0.8rem; }
    .workout-grid { gap: 15px; }
    .workout-card { padding: 25px 15px; }
    .workout-icon { font-size: 3rem; }
    .workout-name { font-size: 1.4rem; }
    .workout-desc { font-size: 0.75rem; }
    .workout-level { font-size: 0.7rem; }
    .gostars-display { font-size: 1.6rem; letter-spacing: 3px; }
    .speed-btn { padding: 12px 15px; font-size: 0.9rem; }
}

@media (min-width: 500px) {
    .page-title { font-size: 2rem; }
    .workout-card { padding: 30px 20px; border-radius: 16px; }
    .workout-icon { font-size: 3.5rem; }
    .workout-name { font-size: 1.5rem; }
    .speed-btn { max-width: 120px; font-size: 1rem; }
}
</style>
</head>
<body class="en">

<!-- ============ HEADER ============ -->
<header class="header">
    <div class="logo">
        <span class="ball">üèÄ</span> <span class="laugh">LAUGH</span><span class="court">COURT</span>
    </div>
    <div class="header-right">
        <div class="lang-toggle">
            <button class="lang-btn active" id="btnEn">EN</button>
            <button class="lang-btn" id="btnEs">ES</button>
        </div>
        <button class="logout-btn" onclick="logout()">
            <span class="lang-en">LOG OUT</span>
            <span class="lang-es">SALIR</span>
        </button>
    </div>
</header>

<!-- ============ MAIN ============ -->
<main class="main">
    <h1 class="page-title">
        <span class="lang-en">CHOOSE WORKOUT</span>
        <span class="lang-es">ELIGE EJERCICIO</span>
    </h1>
    <p class="page-subtitle">
        <span class="lang-en">Memory Training for Mind & Joy</span>
        <span class="lang-es">Entrenamiento de Memoria</span>
    </p>

    <!-- Trial Banner (shown for trial users) -->
    <div class="trial-banner" id="trialBanner" style="display: none;">
        <p class="trial-text">
            <span class="lang-en">üéâ Free trial active!</span>
            <span class="lang-es">üéâ ¬°Prueba gratis activa!</span>
        </p>
        <p class="trial-days" id="trialDays">5 DAYS LEFT</p>
        <a href="https://buy.stripe.com/9B6bJ2c9i1qy0Qrbqh00005" class="upgrade-link">
            <span class="lang-en">UPGRADE $5/mo</span>
            <span class="lang-es">MEJORAR $5/mes</span>
        </a>
    </div>

    <!-- Workout Grid - 2 GAMES -->
    <div class="workout-grid">
        <!-- THE MATCH -->
        <a href="/the-match.html" class="workout-card match">
            <span class="workout-icon">üß†</span>
            <div class="workout-name">THE MATCH</div>
            <p class="workout-desc">
                <span class="lang-en">Memorize positions<br>Tap in order</span>
                <span class="lang-es">Memoriza posiciones<br>Toca en orden</span>
            </p>
            <span class="workout-level" id="matchLevel">L1-SLOW</span>
        </a>

        <!-- THE SEQUENCE -->
        <a href="/the-sequence.html" class="workout-card sequence">
            <span class="workout-icon">üî¢</span>
            <div class="workout-name">THE SEQUENCE</div>
            <p class="workout-desc">
                <span class="lang-en">Watch sequence<br>Repeat it back</span>
                <span class="lang-es">Mira secuencia<br>Rep√≠tela</span>
            </p>
            <span class="workout-level" id="sequenceLevel">L1-SLOW</span>
        </a>
    </div>

    <!-- Progress Section -->
    <div class="progress-section">
        <p class="progress-title">
            <span class="lang-en">YOUR GOSTARS</span>
            <span class="lang-es">TUS GOSTARS</span>
        </p>
        <div class="gostars-display" id="gostarsDisplay">‚≠ê‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ</div>
        <p class="gostars-label"><span id="gostarCount">1</span> <span class="lang-en">GoStars</span><span class="lang-es">GoStars</span></p>
    </div>

    <!-- Speed Selector -->
    <div class="speed-section">
        <p class="speed-title">
            <span class="lang-en">SPEED</span>
            <span class="lang-es">VELOCIDAD</span>
        </p>
        <div class="speed-buttons">
            <button class="speed-btn active" data-speed="slow" id="speedSlow">SLOW</button>
            <button class="speed-btn" data-speed="med" id="speedMed">MED</button>
            <button class="speed-btn" data-speed="fast" id="speedFast">FAST</button>
        </div>
    </div>

    <!-- Footer Links -->
    <nav class="footer-nav">
        <a href="/faq" class="footer-link">FAQ</a>
        <a href="/privacy.html" class="footer-link">
            <span class="lang-en">Privacy</span>
            <span class="lang-es">Privacidad</span>
        </a>
        <a href="/terms.html" class="footer-link">
            <span class="lang-en">Terms</span>
            <span class="lang-es">T√©rminos</span>
        </a>
    </nav>
</main>

<script>
(function() {
    // ==================== LANGUAGE ====================
    var currentLang = localStorage.getItem('lc-lang') || 'en';
    
    function setLang(lang) {
        currentLang = lang;
        localStorage.setItem('lc-lang', lang);
        document.body.className = lang;
        document.getElementById('btnEn').className = lang === 'en' ? 'lang-btn active' : 'lang-btn';
        document.getElementById('btnEs').className = lang === 'es' ? 'lang-btn active' : 'lang-btn';
        updateTrialDays();
    }

    document.getElementById('btnEn').onclick = function() { setLang('en'); };
    document.getElementById('btnEs').onclick = function() { setLang('es'); };
    setLang(currentLang);

    // ==================== SPEED ACCESS ====================
    var speedAccess = { allSpeeds: false };
    try { var sa = localStorage.getItem('lc-speed-access'); if (sa) speedAccess = JSON.parse(sa); } catch(e) {}

    // ==================== SPEED SELECTOR ====================
    var currentSpeed = localStorage.getItem('lc-speed') || 'slow';
    var speedBtns = document.querySelectorAll('.speed-btn');
    
    function initSpeedButtons() {
        if (!speedAccess.allSpeeds) {
            document.getElementById('speedMed').classList.add('locked');
            document.getElementById('speedFast').classList.add('locked');
        }
    }
    
    function setSpeed(speed) {
        if (!speedAccess.allSpeeds && speed !== 'slow') {
            window.location.href = 'https://buy.stripe.com/9B6bJ2c9i1qy0Qrbqh00005';
            return;
        }
        
        currentSpeed = speed;
        localStorage.setItem('lc-speed', speed);
        localStorage.setItem('lc-match-speed', speed);
        localStorage.setItem('lc-seq-speed', speed);
        
        speedBtns.forEach(function(btn) {
            btn.classList.remove('active');
            if (btn.dataset.speed === speed) {
                btn.classList.add('active');
            }
        });
        
        updateLevelDisplays();
    }

    speedBtns.forEach(function(btn) {
        btn.onclick = function() { setSpeed(btn.dataset.speed); };
    });

    initSpeedButtons();
    setSpeed(currentSpeed);

    // ==================== TRIAL STATUS ====================
    var isTrial = localStorage.getItem('lc-trial') === 'true';
    var trialBanner = document.getElementById('trialBanner');
    
    function updateTrialDays() {
        if (isTrial) {
            trialBanner.style.display = 'block';
            var trialDays = localStorage.getItem('lc-trial-days') || '7';
            var text = trialDays + (currentLang === 'en' ? ' DAYS LEFT' : ' D√çAS');
            document.getElementById('trialDays').textContent = text;
        }
    }
    
    updateTrialDays();

    // ==================== LEVEL DISPLAYS ====================
    function updateLevelDisplays() {
        var speedLabel = currentSpeed.toUpperCase();
        if (currentLang === 'es') {
            speedLabel = currentSpeed === 'slow' ? 'LENTO' : currentSpeed === 'med' ? 'MED' : 'R√ÅPIDO';
        }
        
        var matchLvl = localStorage.getItem('lc-match-level') || '1';
        var sequenceLvl = localStorage.getItem('lc-seq-level') || '1';
        
        document.getElementById('matchLevel').textContent = 'L' + matchLvl + '-' + speedLabel;
        document.getElementById('sequenceLevel').textContent = 'L' + sequenceLvl + '-' + speedLabel;
    }
    
    updateLevelDisplays();

    // ==================== GOSTARS ====================
    function updateGoStars() {
        var matchTier = parseInt(localStorage.getItem('lc-match-tier') || '1');
        var seqTier = parseInt(localStorage.getItem('lc-seq-tier') || '1');
        var totalGoStars = Math.max(matchTier, seqTier);
        
        var display = '';
        for (var i = 0; i < 10; i++) {
            display += i < totalGoStars ? '‚≠ê' : '‚òÜ';
        }
        document.getElementById('gostarsDisplay').textContent = display;
        document.getElementById('gostarCount').textContent = totalGoStars;
    }
    
    updateGoStars();

    // ==================== LOGOUT ====================
    window.logout = function() {
        if (confirm(currentLang === 'en' ? 'Log out?' : '¬øSalir?')) {
            var sp = sessionStorage.getItem('lc-pin'), st = sessionStorage.getItem('lc-token');
            if (sp && st) {
                fetch('/api/session/destroy', { 
                    method: 'POST', 
                    headers: { 'Content-Type': 'application/json' }, 
                    body: JSON.stringify({ pin: sp, token: st }) 
                }).catch(function() {});
            }
            localStorage.removeItem('lc-user');
            localStorage.removeItem('lc-speed-access');
            sessionStorage.clear();
            window.location.href = '/login';
        }
    };

})();
</script>
</body>
</html>
