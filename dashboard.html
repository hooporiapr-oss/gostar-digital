<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Dashboard | LaughCourt</title>
<link rel="icon" type="image/png" href="favicon.png">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Outfit:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
:root {
    --gold: #FFD700;
    --orange: #FF6B35;
    --teal: #00D9A5;
    --cyan: #00CED1;
    --purple: #9B59B6;
    --dark: #0a0a0f;
    --darker: #050508;
    --card: #111118;
    --text: #FFFFFF;
    --muted: #8892a0;
    --border: rgba(255,255,255,0.08);
}

* { margin: 0; padding: 0; box-sizing: border-box; }

html, body {
    width: 100%;
    max-width: 100vw;
    overflow-x: hidden;
}

body {
    font-family: 'Outfit', sans-serif;
    background: var(--dark);
    color: var(--text);
    min-height: 100vh;
    min-height: 100dvh;
}

body.es .lang-en { display: none !important; }
body.en .lang-es { display: none !important; }

/* ============ HEADER ============ */
.header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 15px;
    background: var(--darker);
    border-bottom: 1px solid var(--border);
    width: 100%;
}

.logo {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 1.3rem;
    letter-spacing: 2px;
    display: flex;
    align-items: center;
    gap: 6px;
    flex-shrink: 0;
}
.logo .ball { font-size: 1.1rem; }
.logo .laugh { color: var(--gold); }
.logo .court { color: var(--text); }

.header-right {
    display: flex;
    align-items: center;
    gap: 8px;
    flex-shrink: 0;
}

.lang-toggle {
    display: flex;
    gap: 2px;
    background: var(--card);
    padding: 2px;
    border-radius: 6px;
    border: 1px solid var(--border);
}
.lang-btn {
    padding: 4px 8px;
    border: none;
    background: transparent;
    color: var(--muted);
    border-radius: 4px;
    font-weight: 600;
    font-size: 0.65rem;
    cursor: pointer;
    font-family: 'Outfit', sans-serif;
    transition: all 0.2s;
}
.lang-btn.active {
    background: var(--gold);
    color: var(--dark);
}

.logout-btn {
    padding: 6px 12px;
    background: transparent;
    border: 1px solid var(--border);
    color: var(--muted);
    border-radius: 6px;
    font-size: 0.65rem;
    font-family: 'Outfit', sans-serif;
    cursor: pointer;
    transition: all 0.2s;
}
.logout-btn:active {
    border-color: var(--gold);
    color: var(--gold);
}

/* ============ MAIN ============ */
.main {
    width: 100%;
    max-width: 500px;
    margin: 0 auto;
    padding: 20px 15px 30px;
}

.page-title {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 1.6rem;
    letter-spacing: 2px;
    text-align: center;
    margin-bottom: 5px;
    color: var(--gold);
}

.page-subtitle {
    text-align: center;
    font-size: 0.75rem;
    color: var(--muted);
    margin-bottom: 20px;
}

/* ============ TRIAL BANNER ============ */
.trial-banner {
    background: linear-gradient(135deg, rgba(255,215,0,0.1), rgba(255,107,53,0.1));
    border: 1px solid rgba(255,215,0,0.2);
    border-radius: 12px;
    padding: 12px 15px;
    text-align: center;
    margin-bottom: 15px;
    width: 100%;
}

.trial-text {
    font-size: 0.75rem;
    color: var(--text);
    margin-bottom: 5px;
}

.trial-days {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 1rem;
    color: var(--gold);
    letter-spacing: 2px;
}

.upgrade-link {
    display: inline-block;
    margin-top: 8px;
    padding: 6px 16px;
    background: var(--gold);
    color: var(--dark);
    text-decoration: none;
    border-radius: 15px;
    font-size: 0.7rem;
    font-weight: 700;
    transition: all 0.2s;
}

.upgrade-link:active {
    transform: scale(0.95);
}

/* ============ WORKOUT GRID - 4 CARDS (2x2) ============ */
.workout-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    margin-bottom: 15px;
    width: 100%;
}

.workout-card {
    background: var(--card);
    border: 2px solid var(--border);
    border-radius: 14px;
    padding: 15px 8px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s;
    text-decoration: none;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: 0;
}

.workout-card:active {
    transform: scale(0.98);
}

.workout-card.match {
    border-color: rgba(255, 107, 53, 0.3);
}
.workout-card.match:active {
    border-color: var(--orange);
    box-shadow: 0 5px 20px rgba(255, 107, 53, 0.2);
}

.workout-card.sequence {
    border-color: rgba(0, 217, 165, 0.3);
}
.workout-card.sequence:active {
    border-color: var(--teal);
    box-shadow: 0 5px 20px rgba(0, 217, 165, 0.2);
}

.workout-card.flash {
    border-color: rgba(0, 206, 209, 0.3);
}
.workout-card.flash:active {
    border-color: var(--cyan);
    box-shadow: 0 5px 20px rgba(0, 206, 209, 0.2);
}

.workout-card.reaction {
    border-color: rgba(155, 89, 182, 0.3);
}
.workout-card.reaction:active {
    border-color: var(--purple);
    box-shadow: 0 5px 20px rgba(155, 89, 182, 0.2);
}

.workout-icon {
    font-size: 2rem;
    margin-bottom: 6px;
    display: block;
    line-height: 1;
}

.workout-name {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 0.95rem;
    letter-spacing: 1px;
    color: var(--text);
    margin-bottom: 3px;
}

.workout-card.match .workout-name { color: var(--orange); }
.workout-card.sequence .workout-name { color: var(--teal); }
.workout-card.flash .workout-name { color: var(--cyan); }
.workout-card.reaction .workout-name { color: var(--purple); }

.workout-desc {
    font-size: 0.55rem;
    color: var(--muted);
    line-height: 1.3;
}

.play-label {
    margin-top: 8px;
    padding: 5px 12px;
    background: rgba(255,255,255,0.05);
    border-radius: 15px;
    font-family: 'Bebas Neue', sans-serif;
    font-size: 0.65rem;
    letter-spacing: 2px;
    color: var(--text);
}

.workout-card.match .play-label { background: rgba(255,107,53,0.15); color: var(--orange); }
.workout-card.sequence .play-label { background: rgba(0,217,165,0.15); color: var(--teal); }
.workout-card.flash .play-label { background: rgba(0,206,209,0.15); color: var(--cyan); }
.workout-card.reaction .play-label { background: rgba(155,89,182,0.15); color: var(--purple); }

/* ============ PROGRESS SECTION WITH TOGGLE ============ */
.progress-section {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 14px;
    overflow: hidden;
    margin-bottom: 15px;
    width: 100%;
}

/* Game Toggle Tabs - 4 Games */
.game-toggle {
    display: flex;
    border-bottom: 1px solid var(--border);
}

.game-tab {
    flex: 1;
    padding: 10px 4px;
    background: transparent;
    border: none;
    border-right: 1px solid var(--border);
    font-family: 'Bebas Neue', sans-serif;
    font-size: 0.65rem;
    letter-spacing: 0.5px;
    color: var(--muted);
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 3px;
}

.game-tab:last-child {
    border-right: none;
}

.game-tab.active {
    background: rgba(255,255,255,0.03);
}

.game-tab.active.match {
    color: var(--orange);
    box-shadow: inset 0 -2px 0 var(--orange);
}

.game-tab.active.sequence {
    color: var(--teal);
    box-shadow: inset 0 -2px 0 var(--teal);
}

.game-tab.active.flash {
    color: var(--cyan);
    box-shadow: inset 0 -2px 0 var(--cyan);
}

.game-tab.active.reaction {
    color: var(--purple);
    box-shadow: inset 0 -2px 0 var(--purple);
}

.game-tab:active {
    background: rgba(255,255,255,0.05);
}

/* Speed Toggle */
.speed-toggle {
    display: flex;
    border-bottom: 1px solid var(--border);
    background: rgba(0,0,0,0.2);
}

.speed-tab {
    flex: 1;
    padding: 10px 8px;
    background: transparent;
    border: none;
    font-family: 'Outfit', sans-serif;
    font-size: 0.7rem;
    font-weight: 600;
    letter-spacing: 1px;
    color: var(--muted);
    cursor: pointer;
    transition: all 0.2s;
    border-right: 1px solid var(--border);
}

.speed-tab:last-child {
    border-right: none;
}

.speed-tab.active {
    background: rgba(255,215,0,0.1);
    color: var(--gold);
}

.speed-tab:active {
    background: rgba(255,255,255,0.05);
}

/* Current Level Section */
.current-level-section {
    padding: 12px 15px;
    text-align: center;
    border-bottom: 1px solid var(--border);
    background: rgba(255,255,255,0.02);
}

.current-level-title {
    font-size: 0.6rem;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-bottom: 6px;
}

.current-level-display {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

.current-level-value {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 2rem;
    letter-spacing: 2px;
}

.current-level-value.match { color: var(--orange); }
.current-level-value.sequence { color: var(--teal); }
.current-level-value.flash { color: var(--cyan); }
.current-level-value.reaction { color: var(--purple); }

.current-level-cells {
    font-size: 0.75rem;
    color: var(--muted);
}

/* GoStars Display */
.gostars-section {
    padding: 15px;
    text-align: center;
    border-bottom: 1px solid var(--border);
}

.gostars-title {
    font-size: 0.65rem;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-bottom: 8px;
}

.gostars-display {
    font-size: 1.3rem;
    letter-spacing: 2px;
    margin-bottom: 4px;
}

.gostars-label {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 0.85rem;
    letter-spacing: 1px;
}

.gostars-label.match { color: var(--orange); }
.gostars-label.sequence { color: var(--teal); }
.gostars-label.flash { color: var(--cyan); }
.gostars-label.reaction { color: var(--purple); }

/* Speed Levels Grid */
.speed-levels {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    text-align: center;
}

.speed-level {
    padding: 12px 8px;
    border-right: 1px solid var(--border);
}

.speed-level:last-child {
    border-right: none;
}

.speed-level-name {
    font-size: 0.6rem;
    color: var(--muted);
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
}

.speed-level-name .lock {
    font-size: 0.55rem;
}

.speed-level-value {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 1.4rem;
    letter-spacing: 2px;
    margin-bottom: 2px;
}

.speed-level-value.match { color: var(--orange); }
.speed-level-value.sequence { color: var(--teal); }
.speed-level-value.flash { color: var(--cyan); }
.speed-level-value.reaction { color: var(--purple); }
.speed-level-value.locked { opacity: 0.4; }

.speed-level-cells {
    font-size: 0.6rem;
    color: var(--muted);
}

/* ============ UNLOCK SECTION ============ */
.unlock-section {
    background: linear-gradient(135deg, rgba(255,215,0,0.05), rgba(255,107,53,0.05));
    border: 1px solid rgba(255,215,0,0.15);
    border-radius: 12px;
    padding: 15px;
    text-align: center;
    margin-bottom: 15px;
    display: none;
    width: 100%;
}

.unlock-section.show {
    display: block;
}

.unlock-text {
    font-size: 0.75rem;
    color: var(--text);
    margin-bottom: 10px;
}

.unlock-speeds {
    display: flex;
    justify-content: center;
    gap: 8px;
    margin-bottom: 12px;
}

.unlock-speed-chip {
    padding: 5px 12px;
    border-radius: 12px;
    font-family: 'Bebas Neue', sans-serif;
    font-size: 0.7rem;
    letter-spacing: 1px;
}

.unlock-speed-chip.unlocked {
    background: rgba(0,217,165,0.15);
    color: var(--teal);
}

.unlock-speed-chip.locked {
    background: rgba(255,215,0,0.15);
    color: var(--gold);
}

.unlock-btn {
    display: inline-block;
    padding: 10px 25px;
    background: linear-gradient(135deg, var(--gold), #FFA500);
    color: var(--dark);
    text-decoration: none;
    border-radius: 20px;
    font-family: 'Bebas Neue', sans-serif;
    font-size: 0.85rem;
    letter-spacing: 2px;
    transition: all 0.2s;
}

.unlock-btn:active {
    transform: scale(0.95);
}

/* ============ FOOTER NAV ============ */
.footer-nav {
    display: flex;
    justify-content: center;
    gap: 20px;
    padding-top: 10px;
}

.footer-link {
    font-size: 0.7rem;
    color: var(--muted);
    text-decoration: none;
}

.footer-link:active {
    color: var(--gold);
}

/* ============ RESPONSIVE ============ */
@media (min-width: 400px) {
    .header { padding: 15px 20px; }
    .logo { font-size: 1.5rem; }
    .lang-btn { padding: 5px 10px; font-size: 0.7rem; }
    .logout-btn { padding: 8px 15px; font-size: 0.75rem; }
    .main { padding: 25px 20px 40px; }
    .page-title { font-size: 1.8rem; }
    .page-subtitle { font-size: 0.8rem; }
    .workout-grid { gap: 12px; }
    .workout-card { padding: 18px 10px; }
    .workout-icon { font-size: 2.3rem; }
    .workout-name { font-size: 1.05rem; }
    .workout-desc { font-size: 0.6rem; }
    .game-tab { font-size: 0.7rem; padding: 12px 6px; }
    .gostars-display { font-size: 1.5rem; letter-spacing: 3px; }
    .speed-level-value { font-size: 1.6rem; }
}

@media (min-width: 500px) {
    .page-title { font-size: 2rem; }
    .workout-card { padding: 22px 12px; border-radius: 16px; }
    .workout-icon { font-size: 2.8rem; }
    .workout-name { font-size: 1.2rem; }
    .game-tab { font-size: 0.8rem; }
    .gostars-display { font-size: 1.7rem; }
    .speed-level-value { font-size: 1.8rem; }
}
</style>
</head>
<body class="en">

<!-- ============ HEADER ============ -->
<header class="header">
    <div class="logo">
        <span class="ball">üèÄ</span> <span class="laugh">LAUGH</span><span class="court">COURT</span>
    </div>
    <div class="header-right">
        <div class="lang-toggle">
            <button class="lang-btn active" id="btnEn">EN</button>
            <button class="lang-btn" id="btnEs">ES</button>
        </div>
        <button class="logout-btn" onclick="logout()">
            <span class="lang-en">LOG OUT</span>
            <span class="lang-es">SALIR</span>
        </button>
    </div>
</header>

<!-- ============ MAIN ============ -->
<main class="main">
    <h1 class="page-title">
        <span class="lang-en">CHOOSE WORKOUT</span>
        <span class="lang-es">ELIGE EJERCICIO</span>
    </h1>
    <p class="page-subtitle">
        <span class="lang-en">Memory Workouts for Mind & Joy</span>
        <span class="lang-es">Entrenamiento de Memoria</span>
    </p>

    <!-- Trial Banner -->
    <div class="trial-banner" id="trialBanner" style="display: none;">
        <p class="trial-text">
            <span class="lang-en">üéâ Free trial active!</span>
            <span class="lang-es">üéâ ¬°Prueba gratis activa!</span>
        </p>
        <p class="trial-days" id="trialDays">5 DAYS LEFT</p>
        <a href="https://buy.stripe.com/9B6bJ2c9i1qy0Qrbqh00005" class="upgrade-link">
            <span class="lang-en">UPGRADE $5/mo</span>
            <span class="lang-es">MEJORAR $5/mes</span>
        </a>
    </div>

    <!-- Workout Grid - 4 Games -->
    <div class="workout-grid">
        <!-- THE MATCH -->
        <a href="/the-match.html" class="workout-card match">
            <span class="workout-icon">üß†</span>
            <div class="workout-name">THE MATCH</div>
            <p class="workout-desc">
                <span class="lang-en">Position + Numbers</span>
                <span class="lang-es">Posici√≥n + N√∫meros</span>
            </p>
            <span class="play-label">
                <span class="lang-en">PLAY ‚Üí</span>
                <span class="lang-es">JUGAR ‚Üí</span>
            </span>
        </a>

        <!-- THE SEQUENCE -->
        <a href="/the-sequence.html" class="workout-card sequence">
            <span class="workout-icon">üî¢</span>
            <div class="workout-name">THE SEQUENCE</div>
            <p class="workout-desc">
                <span class="lang-en">Order Memory</span>
                <span class="lang-es">Memoria de Orden</span>
            </p>
            <span class="play-label">
                <span class="lang-en">PLAY ‚Üí</span>
                <span class="lang-es">JUGAR ‚Üí</span>
            </span>
        </a>

        <!-- THE FLASH -->
        <a href="/the-flash.html" class="workout-card flash">
            <span class="workout-icon">‚ö°</span>
            <div class="workout-name">THE FLASH</div>
            <p class="workout-desc">
                <span class="lang-en">Pure Position</span>
                <span class="lang-es">Posici√≥n Pura</span>
            </p>
            <span class="play-label">
                <span class="lang-en">PLAY ‚Üí</span>
                <span class="lang-es">JUGAR ‚Üí</span>
            </span>
        </a>

        <!-- THE REACTION -->
        <a href="/the-reaction.html" class="workout-card reaction">
            <span class="workout-icon">üéØ</span>
            <div class="workout-name">THE REACTION</div>
            <p class="workout-desc">
                <span class="lang-en">Speed & Reflex</span>
                <span class="lang-es">Velocidad y Reflejos</span>
            </p>
            <span class="play-label">
                <span class="lang-en">PLAY ‚Üí</span>
                <span class="lang-es">JUGAR ‚Üí</span>
            </span>
        </a>
    </div>

    <!-- Progress Section with Toggle -->
    <div class="progress-section">
        <!-- Game Toggle - 4 Games -->
        <div class="game-toggle">
            <button class="game-tab match active" id="tabMatch" data-game="match">üß† MATCH</button>
            <button class="game-tab sequence" id="tabSequence" data-game="sequence">üî¢ SEQ</button>
            <button class="game-tab flash" id="tabFlash" data-game="flash">‚ö° FLASH</button>
            <button class="game-tab reaction" id="tabReaction" data-game="reaction">üéØ REACT</button>
        </div>

        <!-- Speed Toggle -->
        <div class="speed-toggle">
            <button class="speed-tab active" id="tabSlow" data-speed="slow">
                <span class="lang-en">SLOW</span><span class="lang-es">LENTO</span>
            </button>
            <button class="speed-tab" id="tabMed" data-speed="med">MED</button>
            <button class="speed-tab" id="tabFast" data-speed="fast">
                <span class="lang-en">FAST</span><span class="lang-es">R√ÅPIDO</span>
            </button>
        </div>

        <!-- GoStars Display -->
        <div class="gostars-section">
            <p class="gostars-title" id="gostarsTitle">YOUR MATCH GOSTARS</p>
            <div class="gostars-display" id="gostarsDisplay">‚≠ê‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ</div>
            <p class="gostars-label match" id="gostarsLabel">1 / 10 GoStars</p>
        </div>

        <!-- Current Speed Level -->
        <div class="current-level-section">
            <p class="current-level-title" id="currentLevelTitle">SLOW LEVEL</p>
            <div class="current-level-display">
                <span class="current-level-value match" id="currentLevelValue">L1</span>
                <span class="current-level-cells" id="currentLevelCells">5 cells</span>
            </div>
        </div>

        <!-- All Speeds Overview -->
        <div class="speed-levels">
            <div class="speed-level" id="speedLevelSlow">
                <p class="speed-level-name">
                    <span class="lang-en">SLOW</span>
                    <span class="lang-es">LENTO</span>
                </p>
                <div class="speed-level-value match" id="levelSlow">L1</div>
                <div class="speed-level-cells" id="cellsSlow">5 cells</div>
            </div>
            <div class="speed-level" id="speedLevelMed">
                <p class="speed-level-name" id="medLabel">
                    <span class="lock" id="medLock">üîí</span> MED
                </p>
                <div class="speed-level-value match locked" id="levelMed">L1</div>
                <div class="speed-level-cells" id="cellsMed">5 cells</div>
            </div>
            <div class="speed-level" id="speedLevelFast">
                <p class="speed-level-name" id="fastLabel">
                    <span class="lock" id="fastLock">üîí</span>
                    <span class="lang-en">FAST</span>
                    <span class="lang-es">R√ÅPIDO</span>
                </p>
                <div class="speed-level-value match locked" id="levelFast">L1</div>
                <div class="speed-level-cells" id="cellsFast">5 cells</div>
            </div>
        </div>
    </div>

    <!-- Unlock Speeds CTA -->
    <div class="unlock-section" id="unlockSection">
        <p class="unlock-text">
            <span class="lang-en">üöÄ Unlock MED & FAST speeds to challenge yourself!</span>
            <span class="lang-es">üöÄ ¬°Desbloquea MED y R√ÅPIDO para m√°s desaf√≠o!</span>
        </p>
        <div class="unlock-speeds">
            <span class="unlock-speed-chip unlocked">‚úì SLOW</span>
            <span class="unlock-speed-chip locked">üîí MED</span>
            <span class="unlock-speed-chip locked">üîí FAST</span>
        </div>
        <a href="https://buy.stripe.com/9B6bJ2c9i1qy0Qrbqh00005" class="unlock-btn">
            <span class="lang-en">UNLOCK ALL $5/mo</span>
            <span class="lang-es">DESBLOQUEAR $5/mes</span>
        </a>
    </div>

    <!-- Footer Links -->
    <nav class="footer-nav">
        <a href="/faq" class="footer-link">FAQ</a>
        <a href="/privacy.html" class="footer-link">
            <span class="lang-en">Privacy</span>
            <span class="lang-es">Privacidad</span>
        </a>
        <a href="/terms.html" class="footer-link">
            <span class="lang-en">Terms</span>
            <span class="lang-es">T√©rminos</span>
        </a>
    </nav>
</main>

<script>
(function() {
    // ==================== LANGUAGE ====================
    var currentLang = localStorage.getItem('lc-lang') || 'en';
    
    function setLang(lang) {
        currentLang = lang;
        localStorage.setItem('lc-lang', lang);
        document.body.className = lang;
        document.getElementById('btnEn').className = lang === 'en' ? 'lang-btn active' : 'lang-btn';
        document.getElementById('btnEs').className = lang === 'es' ? 'lang-btn active' : 'lang-btn';
        updateTrialDays();
        updateProgressDisplay();
    }

    document.getElementById('btnEn').onclick = function() { setLang('en'); };
    document.getElementById('btnEs').onclick = function() { setLang('es'); };

    // ==================== SPEED ACCESS ====================
    var speedAccess = { allSpeeds: false };
    try { var sa = localStorage.getItem('lc-speed-access'); if (sa) speedAccess = JSON.parse(sa); } catch(e) {}

    // Show/hide unlock section
    var unlockSection = document.getElementById('unlockSection');
    if (speedAccess.allSpeeds) {
        unlockSection.classList.remove('show');
        document.getElementById('medLock').style.display = 'none';
        document.getElementById('fastLock').style.display = 'none';
    } else {
        unlockSection.classList.add('show');
    }

    // ==================== TRIAL STATUS ====================
    var isTrial = localStorage.getItem('lc-trial') === 'true';
    var trialBanner = document.getElementById('trialBanner');
    
    function updateTrialDays() {
        if (isTrial) {
            trialBanner.style.display = 'block';
            var trialDays = localStorage.getItem('lc-trial-days') || '7';
            var text = trialDays + (currentLang === 'en' ? ' DAYS LEFT' : ' D√çAS');
            document.getElementById('trialDays').textContent = text;
        }
    }

    // ==================== GAME TOGGLE - 4 GAMES ====================
    var currentGame = 'match';
    var currentSpeedView = 'slow';
    var tabMatch = document.getElementById('tabMatch');
    var tabSequence = document.getElementById('tabSequence');
    var tabFlash = document.getElementById('tabFlash');
    var tabReaction = document.getElementById('tabReaction');
    var tabSlow = document.getElementById('tabSlow');
    var tabMed = document.getElementById('tabMed');
    var tabFast = document.getElementById('tabFast');

    function setGame(game) {
        currentGame = game;
        
        // Update tabs
        tabMatch.classList.remove('active');
        tabSequence.classList.remove('active');
        tabFlash.classList.remove('active');
        tabReaction.classList.remove('active');
        
        if (game === 'match') tabMatch.classList.add('active');
        else if (game === 'sequence') tabSequence.classList.add('active');
        else if (game === 'flash') tabFlash.classList.add('active');
        else tabReaction.classList.add('active');
        
        updateProgressDisplay();
    }

    function setSpeedView(speed) {
        currentSpeedView = speed;
        
        // Update speed tabs
        tabSlow.classList.remove('active');
        tabMed.classList.remove('active');
        tabFast.classList.remove('active');
        
        if (speed === 'slow') tabSlow.classList.add('active');
        else if (speed === 'med') tabMed.classList.add('active');
        else tabFast.classList.add('active');
        
        updateProgressDisplay();
    }

    tabMatch.onclick = function() { setGame('match'); };
    tabSequence.onclick = function() { setGame('sequence'); };
    tabFlash.onclick = function() { setGame('flash'); };
    tabReaction.onclick = function() { setGame('reaction'); };
    tabSlow.onclick = function() { setSpeedView('slow'); };
    tabMed.onclick = function() { setSpeedView('med'); };
    tabFast.onclick = function() { setSpeedView('fast'); };

    // ==================== PROGRESS DISPLAY ====================
    var LEVEL_CELLS = {1:5,2:6,3:7,4:8,5:9,6:10,7:11,8:12,9:13,10:14};
    
    function getCellsForLevel(level) {
        return LEVEL_CELLS[level] || 5;
    }

    function updateProgressDisplay() {
        // Game prefixes and labels
        var prefixMap = {
            match: 'lc-match',
            sequence: 'lc-seq',
            flash: 'lc-flash',
            reaction: 'lc-reaction'
        };
        var labelMap = {
            match: 'MATCH',
            sequence: 'SEQUENCE',
            flash: 'FLASH',
            reaction: 'REACTION'
        };
        
        var prefix = prefixMap[currentGame];
        var gameLabel = labelMap[currentGame];
        var colorClass = currentGame;
        
        // Speed labels
        var speedLabels = {
            slow: { en: 'SLOW', es: 'LENTO' },
            med: { en: 'MED', es: 'MED' },
            fast: { en: 'FAST', es: 'R√ÅPIDO' }
        };
        var speedLabel = speedLabels[currentSpeedView][currentLang] || speedLabels[currentSpeedView].en;
        
        // Get level for SELECTED SPEED
        var level = parseInt(localStorage.getItem(prefix + '-level-' + currentSpeedView)) || parseInt(localStorage.getItem(prefix + '-level')) || 1;
        level = Math.min(10, Math.max(1, level));
        
        // GoStars = Level
        var goStars = level;
        
        // Get levels for all speeds
        var levelSlow = parseInt(localStorage.getItem(prefix + '-level-slow')) || parseInt(localStorage.getItem(prefix + '-level')) || 1;
        var levelMed = parseInt(localStorage.getItem(prefix + '-level-med')) || 1;
        var levelFast = parseInt(localStorage.getItem(prefix + '-level-fast')) || 1;
        levelSlow = Math.min(10, Math.max(1, levelSlow));
        levelMed = Math.min(10, Math.max(1, levelMed));
        levelFast = Math.min(10, Math.max(1, levelFast));
        
        // Update title with game + speed
        var titleEl = document.getElementById('gostarsTitle');
        if (currentLang === 'en') {
            titleEl.innerHTML = 'YOUR ' + gameLabel + ' ' + speedLabel + ' GOSTARS';
        } else {
            titleEl.innerHTML = 'TUS GOSTARS ' + gameLabel + ' ' + speedLabel;
        }
        
        // Update GoStars display
        var display = '';
        for (var i = 0; i < 10; i++) {
            display += i < goStars ? '‚≠ê' : '‚òÜ';
        }
        document.getElementById('gostarsDisplay').textContent = display;
        
        // Update GoStars label
        var labelEl = document.getElementById('gostarsLabel');
        labelEl.textContent = goStars + ' / 10 GoStars';
        labelEl.className = 'gostars-label ' + colorClass;
        
        // Update current level section
        var levelTitleEl = document.getElementById('currentLevelTitle');
        if (currentLang === 'en') {
            levelTitleEl.innerHTML = speedLabel + ' LEVEL';
        } else {
            levelTitleEl.innerHTML = 'NIVEL ' + speedLabel;
        }
        
        var levelValueEl = document.getElementById('currentLevelValue');
        levelValueEl.textContent = 'L' + level;
        levelValueEl.className = 'current-level-value ' + colorClass;
        
        var cellsLabel = currentLang === 'en' ? ' cells' : ' celdas';
        document.getElementById('currentLevelCells').textContent = getCellsForLevel(level) + cellsLabel;
        
        // Update speed levels overview
        var speedLevelSlow = document.getElementById('speedLevelSlow');
        var speedLevelMed = document.getElementById('speedLevelMed');
        var speedLevelFast = document.getElementById('speedLevelFast');
        
        speedLevelSlow.style.background = currentSpeedView === 'slow' ? 'rgba(255,215,0,0.08)' : 'transparent';
        speedLevelMed.style.background = currentSpeedView === 'med' ? 'rgba(255,215,0,0.08)' : 'transparent';
        speedLevelFast.style.background = currentSpeedView === 'fast' ? 'rgba(255,215,0,0.08)' : 'transparent';
        
        // Update speed level values
        var levelSlowEl = document.getElementById('levelSlow');
        var levelMedEl = document.getElementById('levelMed');
        var levelFastEl = document.getElementById('levelFast');
        
        levelSlowEl.textContent = 'L' + levelSlow;
        levelSlowEl.className = 'speed-level-value ' + colorClass;
        
        levelMedEl.textContent = 'L' + levelMed;
        levelMedEl.className = 'speed-level-value ' + colorClass + (speedAccess.allSpeeds ? '' : ' locked');
        
        levelFastEl.textContent = 'L' + levelFast;
        levelFastEl.className = 'speed-level-value ' + colorClass + (speedAccess.allSpeeds ? '' : ' locked');
        
        // Update cells count
        document.getElementById('cellsSlow').textContent = getCellsForLevel(levelSlow) + cellsLabel;
        document.getElementById('cellsMed').textContent = getCellsForLevel(levelMed) + cellsLabel;
        document.getElementById('cellsFast').textContent = getCellsForLevel(levelFast) + cellsLabel;
    }

    // ==================== LOGOUT ====================
    window.logout = function() {
        if (confirm(currentLang === 'en' ? 'Log out?' : '¬øSalir?')) {
            var sp = sessionStorage.getItem('lc-pin'), st = sessionStorage.getItem('lc-token');
            if (sp && st) {
                fetch('/api/session/destroy', { 
                    method: 'POST', 
                    headers: { 'Content-Type': 'application/json' }, 
                    body: JSON.stringify({ pin: sp, token: st }) 
                }).catch(function() {});
            }
            localStorage.removeItem('lc-user');
            localStorage.removeItem('lc-speed-access');
            sessionStorage.clear();
            window.location.href = '/login';
        }
    };

    // ==================== INIT ====================
    setLang(currentLang);
    updateProgressDisplay();

})();
</script>
</body>
</html>
