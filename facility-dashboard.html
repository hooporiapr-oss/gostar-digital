<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Facility Dashboard - GoTrotters</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Outfit:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
:root{--orange:#FF6B00;--orange-dark:#CC5500;--teal:#00D9A5;--gold:#FFD700;--purple:#9B59B6;--dark:#0a0a0f;--darker:#050508;--card:#111118;--card-hover:#1a1a24;--text:#FFFFFF;--muted:#8892a0;--border:rgba(255,255,255,0.08);--success:#00D9A5;--danger:#FF4757;--sidebar:260px}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Outfit',sans-serif;background:var(--dark);color:var(--text);min-height:100vh}
body.es .lang-en{display:none !important}
body.en .lang-es{display:none !important}

.dashboard{display:flex;min-height:100vh}

.sidebar{width:var(--sidebar);background:var(--darker);border-right:1px solid var(--border);padding:24px 0;display:flex;flex-direction:column;position:fixed;height:100vh;overflow-y:auto}
.sidebar-header{padding:0 24px 24px;border-bottom:1px solid var(--border);margin-bottom:24px}
.logo{font-family:'Bebas Neue',sans-serif;font-size:1.6rem;letter-spacing:3px;text-decoration:none;display:block;margin-bottom:12px}
.logo .go{color:var(--orange)}
.logo .trotters{color:var(--teal)}
.facility-badge{display:inline-block;background:linear-gradient(135deg,var(--gold),#FF9F1C);color:var(--dark);padding:5px 12px;border-radius:20px;font-size:0.7rem;font-weight:700;text-transform:uppercase;letter-spacing:1px}
.nav-menu{padding:0 12px;flex:1}
.nav-item{display:flex;align-items:center;gap:12px;padding:14px 16px;border-radius:12px;color:var(--muted);cursor:pointer;font-weight:500;transition:all 0.2s;margin-bottom:4px}
.nav-item:hover{background:var(--card);color:var(--text)}
.nav-item.active{background:var(--teal);color:var(--dark)}
.nav-item .icon{font-size:1.2rem;width:24px;text-align:center}
.sidebar-footer{padding:24px;border-top:1px solid var(--border);margin-top:auto}
.lang-toggle{display:flex;gap:8px;background:var(--card);padding:4px;border-radius:10px;margin-bottom:16px}
.lang-btn{flex:1;padding:8px;border:none;background:transparent;color:var(--muted);border-radius:8px;font-weight:600;font-size:0.8rem;cursor:pointer}
.lang-btn:hover{color:var(--text)}
.lang-btn.active{background:var(--teal);color:var(--dark)}
.logout-btn{width:100%;padding:12px;background:transparent;border:1px solid var(--border);border-radius:10px;color:var(--muted);font-weight:600;cursor:pointer;font-family:'Outfit',sans-serif}
.logout-btn:hover{background:var(--danger);color:white;border-color:var(--danger)}

.main{flex:1;margin-left:var(--sidebar);padding:32px;max-width:calc(100% - var(--sidebar))}
.page-section{display:none}
.page-section.active{display:block}
.page-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:32px;flex-wrap:wrap;gap:20px}
.page-title{font-family:'Bebas Neue',sans-serif;font-size:2rem;letter-spacing:3px;margin-bottom:5px}
.page-subtitle{color:var(--muted);font-size:0.9rem}

.btn{display:inline-flex;align-items:center;gap:8px;padding:12px 20px;border-radius:10px;font-weight:600;font-size:0.85rem;cursor:pointer;border:none;font-family:'Outfit',sans-serif;transition:all 0.2s}
.btn-primary{background:linear-gradient(135deg,var(--orange),var(--orange-dark));color:var(--text)}
.btn-primary:hover{transform:translateY(-2px);box-shadow:0 5px 20px rgba(255,107,0,0.3)}
.btn-secondary{background:var(--card);color:var(--text);border:1px solid var(--border)}

.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:20px;margin-bottom:32px}
.stat-card{background:var(--card);border-radius:16px;padding:24px;border:1px solid var(--border)}
.stat-icon{font-size:2rem;margin-bottom:12px}
.stat-value{font-family:'Bebas Neue',sans-serif;font-size:2.5rem;margin-bottom:4px}
.stat-label{color:var(--muted);font-size:0.85rem}

.section{background:var(--card);border-radius:16px;border:1px solid var(--border);margin-bottom:24px;overflow:hidden}
.section-header{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid var(--border);flex-wrap:wrap;gap:15px}
.section-title{font-family:'Bebas Neue',sans-serif;font-size:1.2rem;letter-spacing:2px}

.table-container{overflow-x:auto}
table{width:100%;border-collapse:collapse;min-width:600px}
th,td{padding:14px 18px;text-align:left}
th{background:var(--darker);color:var(--muted);font-size:0.7rem;font-weight:600;text-transform:uppercase;letter-spacing:1px}
tr{border-bottom:1px solid var(--border)}
tr:last-child{border-bottom:none}
tr:hover{background:rgba(255,255,255,0.02)}

.tier-badge{display:inline-flex;align-items:center;gap:6px;padding:4px 10px;border-radius:15px;font-size:0.75rem;font-weight:600}
.tier-badge.tryout{background:rgba(155,89,182,0.2);color:var(--purple)}
.tier-badge.rookie{background:rgba(255,215,0,0.15);color:var(--gold)}
.tier-badge.jv{background:rgba(255,107,0,0.15);color:var(--orange)}
.tier-badge.varsity{background:rgba(0,217,165,0.15);color:var(--teal)}
.tier-badge.college{background:rgba(52,152,219,0.15);color:#3498db}
.tier-badge.pro{background:rgba(155,89,182,0.2);color:var(--purple)}
.tier-badge.allstar{background:rgba(255,215,0,0.2);color:var(--gold)}
.tier-badge.legend{background:rgba(255,107,0,0.2);color:var(--orange)}
.tier-badge.master{background:linear-gradient(135deg,rgba(255,107,0,0.3),rgba(255,215,0,0.3));color:var(--gold)}

.status-badge{padding:4px 10px;border-radius:15px;font-size:0.7rem;font-weight:600}
.status-badge.active{background:rgba(0,217,165,0.15);color:var(--success)}
.status-badge.inactive{background:rgba(255,71,87,0.15);color:var(--danger)}

.game-progress{display:flex;gap:8px}
.game-pill{padding:3px 8px;border-radius:10px;font-size:0.65rem;font-weight:600;background:rgba(255,255,255,0.05);color:var(--muted)}
.game-pill.active{background:rgba(255,107,0,0.15);color:var(--orange)}

.action-btn{padding:6px 12px;border-radius:8px;font-size:0.75rem;cursor:pointer;border:1px solid var(--border);background:transparent;color:var(--muted);font-family:'Outfit',sans-serif}
.action-btn:hover{border-color:var(--orange);color:var(--orange)}
.action-btn.danger:hover{border-color:var(--danger);color:var(--danger)}

/* 3 Point Play Overview Cards */
.games-overview{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;margin-bottom:32px}
.game-overview-card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:24px;position:relative}
.game-overview-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;border-radius:16px 16px 0 0}
.game-overview-card.game1::before{background:var(--orange)}
.game-overview-card.game2::before{background:var(--teal)}
.game-overview-card.game3::before{background:var(--gold)}
.game-overview-icon{font-size:2.5rem;margin-bottom:10px}
.game-overview-title{font-family:'Bebas Neue',sans-serif;font-size:1.1rem;letter-spacing:2px;margin-bottom:5px}
.game-overview-subtitle{font-size:0.75rem;color:var(--muted);margin-bottom:15px}
.game-overview-stats{display:flex;gap:20px}
.game-stat{text-align:center}
.game-stat-value{font-family:'Bebas Neue',sans-serif;font-size:1.5rem}
.game-stat-label{font-size:0.65rem;color:var(--muted)}

/* Modal */
.modal-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.8);display:none;align-items:center;justify-content:center;z-index:1000;padding:20px}
.modal-overlay.active{display:flex}
.modal{background:var(--card);border-radius:20px;max-width:450px;width:100%;border:1px solid var(--border)}
.modal-header{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid var(--border)}
.modal-title{font-family:'Bebas Neue',sans-serif;font-size:1.3rem;letter-spacing:2px}
.modal-close{background:none;border:none;color:var(--muted);font-size:1.5rem;cursor:pointer}
.modal-body{padding:24px}
.modal-footer{padding:20px 24px;border-top:1px solid var(--border);display:flex;justify-content:flex-end;gap:12px}
.form-group{margin-bottom:20px}
.form-label{display:block;font-size:0.85rem;font-weight:600;margin-bottom:8px}
.form-input{width:100%;padding:12px 16px;background:var(--darker);border:1px solid var(--border);border-radius:10px;color:var(--text);font-size:0.95rem;font-family:'Outfit',sans-serif}
.form-input:focus{outline:none;border-color:var(--orange)}
.form-hint{font-size:0.75rem;color:var(--muted);margin-top:6px}
.generated-code-display{background:var(--darker);border-radius:12px;padding:20px;text-align:center;margin-top:20px}
.generated-code-label{font-size:0.8rem;color:var(--muted);margin-bottom:8px}
.generated-code-value{font-family:'Bebas Neue',sans-serif;font-size:2rem;letter-spacing:4px;color:var(--orange);margin-bottom:12px}
.copy-btn{padding:8px 20px;background:var(--orange);color:var(--text);border:none;border-radius:8px;cursor:pointer;font-weight:600;font-family:'Outfit',sans-serif}

@media(max-width:768px){
.sidebar{display:none}
.main{margin-left:0;max-width:100%;padding:20px}
}
</style>
</head>
<body class="en">

<div class="dashboard">
<aside class="sidebar">
<div class="sidebar-header">
<a href="index.html" class="logo"><span class="go">Go</span><span class="trotters">Trotters</span></a>
<span class="facility-badge"><span class="lang-en">Facility Portal</span><span class="lang-es">Portal de Instalaci√≥n</span></span>
</div>
<nav class="nav-menu">
<div class="nav-item active" onclick="showSection('overview',this)"><span class="icon">üìä</span><span class="lang-en">Overview</span><span class="lang-es">Resumen</span></div>
<div class="nav-item" onclick="showSection('games',this)"><span class="icon">üéÆ</span><span class="lang-en">3 Point Play</span><span class="lang-es">3 Puntos</span></div>
<div class="nav-item" onclick="showSection('codes',this)"><span class="icon">üîë</span><span class="lang-en">Access Codes</span><span class="lang-es">C√≥digos</span></div>
<div class="nav-item" onclick="showSection('users',this)"><span class="icon">üèÄ</span><span class="lang-en">GoTrotters</span><span class="lang-es">GoTrotters</span></div>
</nav>
<div class="sidebar-footer">
<div class="lang-toggle">
<button class="lang-btn active" id="btn-en" onclick="setLang('en')">EN</button>
<button class="lang-btn" id="btn-es" onclick="setLang('es')">ES</button>
</div>
<button class="logout-btn" onclick="logout()">üö™ <span class="lang-en">Logout</span><span class="lang-es">Salir</span></button>
</div>
</aside>

<main class="main">
<!-- OVERVIEW -->
<div id="section-overview" class="page-section active">
<div class="page-header">
<div>
<h1 class="page-title" id="facilityTitle"><span class="lang-en">FACILITY DASHBOARD</span><span class="lang-es">PANEL DE INSTALACI√ìN</span></h1>
<p class="page-subtitle"><span class="lang-en">Manage your GoTrotters 3 Point Play training program</span><span class="lang-es">Administra tu programa de entrenamiento GoTrotters</span></p>
</div>
</div>

<div class="stats-grid">
<div class="stat-card"><div class="stat-icon">üèÄ</div><div class="stat-value" id="statUsers">0</div><div class="stat-label"><span class="lang-en">GoTrotters</span><span class="lang-es">GoTrotters</span></div></div>
<div class="stat-card"><div class="stat-icon">üéØ</div><div class="stat-value" id="statLevels">0</div><div class="stat-label"><span class="lang-en">Levels Mastered</span><span class="lang-es">Niveles Dominados</span></div></div>
<div class="stat-card"><div class="stat-icon">üîë</div><div class="stat-value" id="statCodes">0</div><div class="stat-label"><span class="lang-en">Access Codes</span><span class="lang-es">C√≥digos</span></div></div>
<div class="stat-card"><div class="stat-icon">üìä</div><div class="stat-value" id="statPool">0</div><div class="stat-label"><span class="lang-en">Licenses Available</span><span class="lang-es">Licencias Disponibles</span></div></div>
</div>

<div class="games-overview">
<div class="game-overview-card game1">
<div class="game-overview-icon">üèÄ</div>
<div class="game-overview-title"><span class="lang-en">MASTERS OF THE GAME</span><span class="lang-es">MAESTROS DEL JUEGO</span></div>
<div class="game-overview-subtitle"><span class="lang-en">Spatial Memory</span><span class="lang-es">Memoria Espacial</span></div>
<div class="game-overview-stats">
<div class="game-stat"><div class="game-stat-value" id="game1Active">0</div><div class="game-stat-label"><span class="lang-en">Active</span><span class="lang-es">Activos</span></div></div>
<div class="game-stat"><div class="game-stat-value" id="game1Avg">0</div><div class="game-stat-label"><span class="lang-en">Avg Level</span><span class="lang-es">Nivel Prom</span></div></div>
</div>
</div>
<div class="game-overview-card game2">
<div class="game-overview-icon">üìã</div>
<div class="game-overview-title">THE PLAYBOOK</div>
<div class="game-overview-subtitle"><span class="lang-en">Digit Span</span><span class="lang-es">Secuencia de D√≠gitos</span></div>
<div class="game-overview-stats">
<div class="game-stat"><div class="game-stat-value" id="game2Active">0</div><div class="game-stat-label"><span class="lang-en">Active</span><span class="lang-es">Activos</span></div></div>
<div class="game-stat"><div class="game-stat-value" id="game2Avg">0</div><div class="game-stat-label"><span class="lang-en">Avg Level</span><span class="lang-es">Nivel Prom</span></div></div>
</div>
</div>
<div class="game-overview-card game3">
<div class="game-overview-icon">‚ö°</div>
<div class="game-overview-title">THE FAST BREAK</div>
<div class="game-overview-subtitle"><span class="lang-en">Sequence Memory</span><span class="lang-es">Memoria de Secuencia</span></div>
<div class="game-overview-stats">
<div class="game-stat"><div class="game-stat-value" id="game3Active">0</div><div class="game-stat-label"><span class="lang-en">Active</span><span class="lang-es">Activos</span></div></div>
<div class="game-stat"><div class="game-stat-value" id="game3Avg">0</div><div class="game-stat-label"><span class="lang-en">Avg Level</span><span class="lang-es">Nivel Prom</span></div></div>
</div>
</div>
</div>

<div class="section">
<div class="section-header">
<h2 class="section-title"><span class="lang-en">RECENT ACCESS CODES</span><span class="lang-es">C√ìDIGOS RECIENTES</span></h2>
<button class="btn btn-secondary" onclick="showSection('codes',document.querySelectorAll('.nav-item')[2])"><span class="lang-en">View All</span><span class="lang-es">Ver Todos</span></button>
</div>
<div class="table-container">
<table>
<thead><tr><th><span class="lang-en">Code</span><span class="lang-es">C√≥digo</span></th><th><span class="lang-en">Label</span><span class="lang-es">Etiqueta</span></th><th><span class="lang-en">GoTrotters</span><span class="lang-es">GoTrotters</span></th><th><span class="lang-en">Status</span><span class="lang-es">Estado</span></th></tr></thead>
<tbody id="overviewCodesTable"><tr><td colspan="4" style="text-align:center;color:var(--muted)"><span class="lang-en">Loading...</span><span class="lang-es">Cargando...</span></td></tr></tbody>
</table>
</div>
</div>
</div>

<!-- 3 POINT PLAY -->
<div id="section-games" class="page-section">
<div class="page-header">
<div>
<h1 class="page-title"><span class="lang-en">THE 3 POINT PLAY</span><span class="lang-es">EL TIRO DE 3 PUNTOS</span></h1>
<p class="page-subtitle"><span class="lang-en">Track progress across all three memory training games</span><span class="lang-es">Sigue el progreso en los tres juegos de entrenamiento</span></p>
</div>
</div>

<div class="games-overview">
<div class="game-overview-card game1">
<div class="game-overview-icon">üèÄ</div>
<div class="game-overview-title"><span class="lang-en">MASTERS OF THE GAME</span><span class="lang-es">MAESTROS DEL JUEGO</span></div>
<div class="game-overview-subtitle"><span class="lang-en">Spatial Memory ‚Ä¢ 2-12 balls</span><span class="lang-es">Memoria Espacial ‚Ä¢ 2-12 bolas</span></div>
<div class="game-overview-stats">
<div class="game-stat"><div class="game-stat-value" id="game1Players">0</div><div class="game-stat-label"><span class="lang-en">Players</span><span class="lang-es">Jugadores</span></div></div>
<div class="game-stat"><div class="game-stat-value" id="game1AvgLvl">1</div><div class="game-stat-label"><span class="lang-en">Avg Level</span><span class="lang-es">Nivel Prom</span></div></div>
<div class="game-stat"><div class="game-stat-value" id="game1Masters">0</div><div class="game-stat-label"><span class="lang-en">Masters</span><span class="lang-es">Maestros</span></div></div>
</div>
</div>
<div class="game-overview-card game2">
<div class="game-overview-icon">üìã</div>
<div class="game-overview-title">THE PLAYBOOK</div>
<div class="game-overview-subtitle"><span class="lang-en">Digit Span ‚Ä¢ Forward/Backward/Alternating</span><span class="lang-es">Secuencia de D√≠gitos ‚Ä¢ 3 modos</span></div>
<div class="game-overview-stats">
<div class="game-stat"><div class="game-stat-value" id="game2Players">0</div><div class="game-stat-label"><span class="lang-en">Players</span><span class="lang-es">Jugadores</span></div></div>
<div class="game-stat"><div class="game-stat-value" id="game2AvgLvl">1</div><div class="game-stat-label"><span class="lang-en">Avg Level</span><span class="lang-es">Nivel Prom</span></div></div>
<div class="game-stat"><div class="game-stat-value" id="game2Masters">0</div><div class="game-stat-label"><span class="lang-en">Masters</span><span class="lang-es">Maestros</span></div></div>
</div>
</div>
<div class="game-overview-card game3">
<div class="game-overview-icon">‚ö°</div>
<div class="game-overview-title">THE FAST BREAK</div>
<div class="game-overview-subtitle"><span class="lang-en">Sequence Memory ‚Ä¢ Growing patterns</span><span class="lang-es">Memoria de Secuencia ‚Ä¢ Patrones crecientes</span></div>
<div class="game-overview-stats">
<div class="game-stat"><div class="game-stat-value" id="game3Players">0</div><div class="game-stat-label"><span class="lang-en">Players</span><span class="lang-es">Jugadores</span></div></div>
<div class="game-stat"><div class="game-stat-value" id="game3AvgLvl">1</div><div class="game-stat-label"><span class="lang-en">Avg Level</span><span class="lang-es">Nivel Prom</span></div></div>
<div class="game-stat"><div class="game-stat-value" id="game3Masters">0</div><div class="game-stat-label"><span class="lang-en">Masters</span><span class="lang-es">Maestros</span></div></div>
</div>
</div>
</div>

<div class="section">
<div class="section-header"><h2 class="section-title"><span class="lang-en">10-TIER MASTERY SYSTEM</span><span class="lang-es">SISTEMA DE 10 NIVELES</span></h2></div>
<div class="table-container">
<table>
<thead><tr><th>#</th><th><span class="lang-en">Tier</span><span class="lang-es">Nivel</span></th><th><span class="lang-en">Type</span><span class="lang-es">Tipo</span></th><th><span class="lang-en">GoTrotters at Level</span><span class="lang-es">GoTrotters en Nivel</span></th></tr></thead>
<tbody id="tiersTable">
<tr><td>1</td><td><span class="tier-badge tryout">üìã TRYOUT 1</span></td><td><span class="lang-en">Tryout</span><span class="lang-es">Prueba</span></td><td id="tier1Count">0</td></tr>
<tr><td>2</td><td><span class="tier-badge tryout">üìù TRYOUT 2</span></td><td><span class="lang-en">Tryout</span><span class="lang-es">Prueba</span></td><td id="tier2Count">0</td></tr>
<tr><td>3</td><td><span class="tier-badge rookie">üåü ROOKIE</span></td><td><span class="lang-en">Squad</span><span class="lang-es">Equipo</span></td><td id="tier3Count">0</td></tr>
<tr><td>4</td><td><span class="tier-badge jv">üèÄ JV</span></td><td><span class="lang-en">Squad</span><span class="lang-es">Equipo</span></td><td id="tier4Count">0</td></tr>
<tr><td>5</td><td><span class="tier-badge varsity">üéΩ VARSITY</span></td><td><span class="lang-en">Squad</span><span class="lang-es">Equipo</span></td><td id="tier5Count">0</td></tr>
<tr><td>6</td><td><span class="tier-badge college">üéì COLLEGE</span></td><td><span class="lang-en">Squad</span><span class="lang-es">Equipo</span></td><td id="tier6Count">0</td></tr>
<tr><td>7</td><td><span class="tier-badge pro">üí∞ PRO</span></td><td><span class="lang-en">Squad</span><span class="lang-es">Equipo</span></td><td id="tier7Count">0</td></tr>
<tr><td>8</td><td><span class="tier-badge allstar">‚≠ê ALL-STAR</span></td><td><span class="lang-en">Squad</span><span class="lang-es">Equipo</span></td><td id="tier8Count">0</td></tr>
<tr><td>9</td><td><span class="tier-badge legend">üèÜ LEGEND</span></td><td><span class="lang-en">Squad</span><span class="lang-es">Equipo</span></td><td id="tier9Count">0</td></tr>
<tr><td>10</td><td><span class="tier-badge master">üî• MASTER</span></td><td><span class="lang-en">Squad</span><span class="lang-es">Equipo</span></td><td id="tier10Count">0</td></tr>
</tbody>
</table>
</div>
</div>
</div>

<!-- ACCESS CODES -->
<div id="section-codes" class="page-section">
<div class="page-header">
<div>
<h1 class="page-title"><span class="lang-en">ACCESS CODES</span><span class="lang-es">C√ìDIGOS DE ACCESO</span></h1>
<p class="page-subtitle"><span class="lang-en">Create and manage access codes for your GoTrotters</span><span class="lang-es">Crea y administra c√≥digos de acceso</span></p>
</div>
<button class="btn btn-primary" onclick="openModal('newCode')">+ <span class="lang-en">Create Code</span><span class="lang-es">Crear C√≥digo</span></button>
</div>
<div class="section">
<div class="table-container">
<table>
<thead><tr><th><span class="lang-en">Access Code</span><span class="lang-es">C√≥digo</span></th><th><span class="lang-en">Label</span><span class="lang-es">Etiqueta</span></th><th><span class="lang-en">Limit</span><span class="lang-es">L√≠mite</span></th><th><span class="lang-en">Used</span><span class="lang-es">Usado</span></th><th><span class="lang-en">Created</span><span class="lang-es">Creado</span></th><th><span class="lang-en">Actions</span><span class="lang-es">Acciones</span></th></tr></thead>
<tbody id="allCodesTable"><tr><td colspan="6" style="text-align:center;color:var(--muted)"><span class="lang-en">Loading...</span><span class="lang-es">Cargando...</span></td></tr></tbody>
</table>
</div>
</div>
</div>

<!-- GOTROTTERS -->
<div id="section-users" class="page-section">
<div class="page-header">
<div>
<h1 class="page-title">GOTROTTERS</h1>
<p class="page-subtitle"><span class="lang-en">All registered GoTrotters and their 3 Point Play progress</span><span class="lang-es">Todos los GoTrotters y su progreso</span></p>
</div>
<button class="btn btn-primary" onclick="downloadCSV()">üì• <span class="lang-en">Export CSV</span><span class="lang-es">Exportar CSV</span></button>
</div>
<div class="section">
<div class="table-container">
<table>
<thead><tr>
<th><span class="lang-en">Name</span><span class="lang-es">Nombre</span></th>
<th>PIN</th>
<th><span class="lang-en">Code</span><span class="lang-es">C√≥digo</span></th>
<th>üèÄ <span class="lang-en">Masters</span><span class="lang-es">Maestros</span></th>
<th>üìã Playbook</th>
<th>‚ö° Fast Break</th>
<th><span class="lang-en">Last Active</span><span class="lang-es">√öltima Act.</span></th>
</tr></thead>
<tbody id="usersTableBody"><tr><td colspan="7" style="text-align:center;color:var(--muted)"><span class="lang-en">Loading...</span><span class="lang-es">Cargando...</span></td></tr></tbody>
</table>
</div>
</div>
</div>
</main>
</div>

<!-- CREATE CODE MODAL -->
<div class="modal-overlay" id="modal-newCode">
<div class="modal">
<div class="modal-header">
<h2 class="modal-title"><span class="lang-en">CREATE ACCESS CODE</span><span class="lang-es">CREAR C√ìDIGO</span></h2>
<button class="modal-close" onclick="closeModal('newCode')">√ó</button>
</div>
<div class="modal-body">
<div class="form-group">
<label class="form-label"><span class="lang-en">Label (Optional)</span><span class="lang-es">Etiqueta (Opcional)</span></label>
<input type="text" class="form-input" id="codeLabel" placeholder="e.g. Wing A, Group 2">
</div>
<div class="form-group">
<label class="form-label"><span class="lang-en">GoTrotter Limit</span><span class="lang-es">L√≠mite de GoTrotters</span></label>
<input type="number" class="form-input" id="codeUserLimit" min="1" max="50" value="5">
<p class="form-hint"><span class="lang-en">Available:</span><span class="lang-es">Disponibles:</span> <strong id="availableCount">0</strong></p>
</div>
<div id="generatedCodeContainer" style="display:none">
<div class="generated-code-display">
<div class="generated-code-label"><span class="lang-en">Your Access Code</span><span class="lang-es">Tu C√≥digo de Acceso</span></div>
<div class="generated-code-value" id="generatedCodeValue">ACC-XXXXXX</div>
<button class="copy-btn" onclick="copyCode()"><span class="lang-en">Copy</span><span class="lang-es">Copiar</span></button>
</div>
</div>
</div>
<div class="modal-footer">
<button class="btn btn-secondary" onclick="closeModal('newCode')"><span class="lang-en">Close</span><span class="lang-es">Cerrar</span></button>
<button class="btn btn-primary" id="createCodeBtn" onclick="createAccessCode()"><span class="lang-en">Create</span><span class="lang-es">Crear</span></button>
</div>
</div>
</div>

<script>
// 10-TIER SYSTEM
var TIERS = [
    {id:'tryout1',name:'TRYOUT 1',icon:'üìã',class:'tryout'},
    {id:'tryout2',name:'TRYOUT 2',icon:'üìù',class:'tryout'},
    {id:'rookie',name:'ROOKIE',icon:'üåü',class:'rookie'},
    {id:'jv',name:'JV',icon:'üèÄ',class:'jv'},
    {id:'varsity',name:'VARSITY',icon:'üéΩ',class:'varsity'},
    {id:'college',name:'COLLEGE',icon:'üéì',class:'college'},
    {id:'pro',name:'PRO',icon:'üí∞',class:'pro'},
    {id:'allstar',name:'ALL-STAR',icon:'‚≠ê',class:'allstar'},
    {id:'legend',name:'LEGEND',icon:'üèÜ',class:'legend'},
    {id:'master',name:'MASTER',icon:'üî•',class:'master'}
];

function getTierBadge(level) {
    var tier = TIERS[Math.min(level, 9)];
    return '<span class="tier-badge '+tier.class+'">'+tier.icon+' '+tier.name+'</span>';
}

// Language
var currentLang = localStorage.getItem('gt-lang') || 'en';
document.body.className = currentLang;

function setLang(l) {
    currentLang = l;
    localStorage.setItem('gt-lang', l);
    document.body.className = l;
    document.getElementById('btn-en').className = l === 'en' ? 'lang-btn active' : 'lang-btn';
    document.getElementById('btn-es').className = l === 'es' ? 'lang-btn active' : 'lang-btn';
}

document.getElementById('btn-en').className = currentLang === 'en' ? 'lang-btn active' : 'lang-btn';
document.getElementById('btn-es').className = currentLang === 'es' ? 'lang-btn active' : 'lang-btn';

// Navigation
function showSection(id, el) {
    document.querySelectorAll('.page-section').forEach(function(s) { s.classList.remove('active'); });
    document.querySelectorAll('.nav-item').forEach(function(n) { n.classList.remove('active'); });
    document.getElementById('section-' + id).classList.add('active');
    if (el) el.classList.add('active');
}

// Modal
function openModal(id) { document.getElementById('modal-' + id).classList.add('active'); }
function closeModal(id) {
    document.getElementById('modal-' + id).classList.remove('active');
    document.getElementById('generatedCodeContainer').style.display = 'none';
    document.getElementById('createCodeBtn').style.display = 'inline-flex';
    document.getElementById('codeLabel').value = '';
    document.getElementById('codeUserLimit').value = '5';
}

// Auth check
var facilityPin = sessionStorage.getItem('gostar-facility-pin');
if (!facilityPin && window.location.hostname === 'gostar.digital') {
    window.location.replace('facility-login.html');
}

function logout() {
    sessionStorage.removeItem('gostar-facility-pin');
    sessionStorage.removeItem('gostar-facility-name');
    window.location.href = 'facility-login.html';
}

// API Base
var API_BASE = window.location.hostname === 'localhost' ? 'http://localhost:3000' : 'https://gostar-digital-api.onrender.com';

// Demo data for now (replace with API calls)
var demoUsers = [
    {name:'Maria Santos',pin:'1234',code:'ACC-DEMO01',game1:3,game2:2,game3:1,lastActive:'Today'},
    {name:'Juan Rivera',pin:'5678',code:'ACC-DEMO01',game1:5,game2:4,game3:3,lastActive:'Yesterday'},
    {name:'Carmen Lopez',pin:'9012',code:'ACC-DEMO02',game1:7,game2:5,game3:6,lastActive:'2 days ago'},
    {name:'Roberto Cruz',pin:'3456',code:'ACC-DEMO02',game1:2,game2:1,game3:2,lastActive:'Today'},
    {name:'Ana Martinez',pin:'7890',code:'ACC-DEMO01',game1:9,game2:8,game3:9,lastActive:'Today'}
];

var demoCodes = [
    {code:'ACC-DEMO01',label:'Wing A',limit:10,used:3,created:'Dec 15, 2024'},
    {code:'ACC-DEMO02',label:'Wing B',limit:15,used:2,created:'Dec 18, 2024'},
    {code:'ACC-DEMO03',label:'Day Program',limit:20,used:0,created:'Jan 2, 2025'}
];

// Load dashboard data
function loadDashboard() {
    // Stats
    document.getElementById('statUsers').textContent = demoUsers.length;
    document.getElementById('statCodes').textContent = demoCodes.length;
    document.getElementById('statPool').textContent = 50 - demoUsers.length;
    
    // Calculate total levels mastered
    var totalLevels = 0;
    demoUsers.forEach(function(u) {
        totalLevels += u.game1 + u.game2 + u.game3;
    });
    document.getElementById('statLevels').textContent = totalLevels;
    
    // Game stats
    var g1Total=0,g2Total=0,g3Total=0,g1Masters=0,g2Masters=0,g3Masters=0;
    demoUsers.forEach(function(u) {
        g1Total += u.game1; g2Total += u.game2; g3Total += u.game3;
        if(u.game1 >= 10) g1Masters++;
        if(u.game2 >= 10) g2Masters++;
        if(u.game3 >= 10) g3Masters++;
    });
    
    document.getElementById('game1Active').textContent = demoUsers.length;
    document.getElementById('game2Active').textContent = demoUsers.length;
    document.getElementById('game3Active').textContent = demoUsers.length;
    document.getElementById('game1Avg').textContent = demoUsers.length ? Math.round(g1Total/demoUsers.length) : 0;
    document.getElementById('game2Avg').textContent = demoUsers.length ? Math.round(g2Total/demoUsers.length) : 0;
    document.getElementById('game3Avg').textContent = demoUsers.length ? Math.round(g3Total/demoUsers.length) : 0;
    
    document.getElementById('game1Players').textContent = demoUsers.length;
    document.getElementById('game2Players').textContent = demoUsers.length;
    document.getElementById('game3Players').textContent = demoUsers.length;
    document.getElementById('game1AvgLvl').textContent = demoUsers.length ? Math.round(g1Total/demoUsers.length) : 1;
    document.getElementById('game2AvgLvl').textContent = demoUsers.length ? Math.round(g2Total/demoUsers.length) : 1;
    document.getElementById('game3AvgLvl').textContent = demoUsers.length ? Math.round(g3Total/demoUsers.length) : 1;
    document.getElementById('game1Masters').textContent = g1Masters;
    document.getElementById('game2Masters').textContent = g2Masters;
    document.getElementById('game3Masters').textContent = g3Masters;
    
    // Tier distribution (use highest level among 3 games)
    var tierCounts = [0,0,0,0,0,0,0,0,0,0];
    demoUsers.forEach(function(u) {
        var highest = Math.max(u.game1, u.game2, u.game3);
        tierCounts[Math.min(highest-1, 9)]++;
    });
    for(var i=0;i<10;i++) {
        var el = document.getElementById('tier'+(i+1)+'Count');
        if(el) el.textContent = tierCounts[i];
    }
    
    // Available count for new codes
    document.getElementById('availableCount').textContent = 50 - demoUsers.length;
    
    // Load tables
    loadCodesTable();
    loadUsersTable();
}

function loadCodesTable() {
    var tbody = document.getElementById('allCodesTable');
    var overviewTbody = document.getElementById('overviewCodesTable');
    var html = '';
    
    demoCodes.forEach(function(c) {
        var statusClass = c.used < c.limit ? 'active' : 'inactive';
        var statusText = c.used < c.limit ? '<span class="lang-en">Active</span><span class="lang-es">Activo</span>' : '<span class="lang-en">Full</span><span class="lang-es">Lleno</span>';
        
        html += '<tr>';
        html += '<td><strong>'+c.code+'</strong></td>';
        html += '<td>'+(c.label || '‚Äî')+'</td>';
        html += '<td>'+c.limit+'</td>';
        html += '<td>'+c.used+'/'+c.limit+'</td>';
        html += '<td>'+c.created+'</td>';
        html += '<td><button class="action-btn" onclick="copyToClipboard(\''+c.code+'\')"><span class="lang-en">Copy</span><span class="lang-es">Copiar</span></button></td>';
        html += '</tr>';
    });
    
    tbody.innerHTML = html || '<tr><td colspan="6" style="text-align:center;color:var(--muted)">No codes yet</td></tr>';
    
    // Overview table (show first 3)
    var overviewHtml = '';
    demoCodes.slice(0,3).forEach(function(c) {
        var statusClass = c.used < c.limit ? 'active' : 'inactive';
        var statusText = c.used < c.limit ? '<span class="lang-en">Active</span><span class="lang-es">Activo</span>' : '<span class="lang-en">Full</span><span class="lang-es">Lleno</span>';
        overviewHtml += '<tr><td><strong>'+c.code+'</strong></td><td>'+(c.label||'‚Äî')+'</td><td>'+c.used+'/'+c.limit+'</td><td><span class="status-badge '+statusClass+'">'+statusText+'</span></td></tr>';
    });
    overviewTbody.innerHTML = overviewHtml || '<tr><td colspan="4" style="text-align:center;color:var(--muted)">No codes yet</td></tr>';
}

function loadUsersTable() {
    var tbody = document.getElementById('usersTableBody');
    var html = '';
    
    demoUsers.forEach(function(u) {
        html += '<tr>';
        html += '<td><strong>'+u.name+'</strong></td>';
        html += '<td>'+u.pin+'</td>';
        html += '<td>'+u.code+'</td>';
        html += '<td>'+getTierBadge(u.game1-1)+'</td>';
        html += '<td>'+getTierBadge(u.game2-1)+'</td>';
        html += '<td>'+getTierBadge(u.game3-1)+'</td>';
        html += '<td>'+u.lastActive+'</td>';
        html += '</tr>';
    });
    
    tbody.innerHTML = html || '<tr><td colspan="7" style="text-align:center;color:var(--muted)">No GoTrotters yet</td></tr>';
}

function createAccessCode() {
    var label = document.getElementById('codeLabel').value;
    var limit = parseInt(document.getElementById('codeUserLimit').value) || 5;
    
    // Generate code
    var code = 'ACC-' + Math.random().toString(36).substring(2,8).toUpperCase();
    
    // Add to demo data
    demoCodes.unshift({code:code,label:label,limit:limit,used:0,created:'Just now'});
    
    // Show generated code
    document.getElementById('generatedCodeValue').textContent = code;
    document.getElementById('generatedCodeContainer').style.display = 'block';
    document.getElementById('createCodeBtn').style.display = 'none';
    
    // Refresh tables
    loadDashboard();
}

function copyCode() {
    var code = document.getElementById('generatedCodeValue').textContent;
    copyToClipboard(code);
}

function copyToClipboard(text) {
    navigator.clipboard.writeText(text).then(function() {
        alert((currentLang==='es'?'Copiado: ':'Copied: ')+text);
    });
}

function downloadCSV() {
    var csv = 'Name,PIN,Code,Masters of Game,Playbook,Fast Break,Last Active\n';
    demoUsers.forEach(function(u) {
        csv += '"'+u.name+'",'+u.pin+','+u.code+','+TIERS[u.game1-1].name+','+TIERS[u.game2-1].name+','+TIERS[u.game3-1].name+','+u.lastActive+'\n';
    });
    
    var blob = new Blob([csv], {type:'text/csv'});
    var url = URL.createObjectURL(blob);
    var a = document.createElement('a');
    a.href = url;
    a.download = 'gotrotters-export.csv';
    a.click();
}

// Initialize
loadDashboard();
</script>
</body>
</html>
