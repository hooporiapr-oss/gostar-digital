<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="LeLoLai Letras ‚Äî Encuentra palabras puertorrique√±as. Juego cognitivo de Hey Bori. üáµüá∑">
  <title>LeLoLai Letras ‚Äî Hey Bori üáµüá∑</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=Instrument+Sans:wght@400;500;600;700&family=Bebas+Neue&display=swap" rel="stylesheet">
  <style>
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    :root{
      --serif:'DM Serif Display',serif;--sans:'Instrument Sans',sans-serif;--display:'Bebas Neue',sans-serif;
      --night:#0B0B14;--surface:#1A1726;--surface2:#211D2E;
      --green:#2DD4A8;--green-deep:#1A8A6E;--gold:#D4A843;--purple:#8B5CF6;
      --text:#EDEBE8;--muted:rgba(237,235,232,.5);--radius:18px
    }
    html{scroll-behavior:smooth}
    body{font-family:var(--sans);background:var(--night);color:var(--text);-webkit-font-smoothing:antialiased;overflow-x:hidden;min-height:100vh}
    a{color:inherit;text-decoration:none}button{cursor:pointer;font-family:var(--sans)}
    .bg{position:fixed;inset:0;pointer-events:none;z-index:0}
    .bg::before{content:'';position:absolute;top:-15%;left:50%;transform:translateX(-50%);width:600px;height:600px;border-radius:50%;background:radial-gradient(circle,rgba(45,212,168,.08) 0%,transparent 60%)}
    .wrap{max-width:480px;margin:0 auto;padding:0 16px;position:relative;z-index:1}
    .nav{display:flex;align-items:center;gap:12px;padding:16px 0}
    .nav-back{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:12px;background:var(--surface);border:1px solid rgba(255,255,255,.06);font-size:18px;-webkit-tap-highlight-color:transparent;transition:all .15s}
    .nav-back:active{transform:scale(.92);background:var(--surface2)}
    .nav-title{font-family:var(--display);font-size:16px;letter-spacing:3px;color:var(--muted)}
    .nav-flag{margin-left:auto;font-size:20px}
    .hero{text-align:center;padding:8px 0 20px}
    .hero-icon{font-size:40px;margin-bottom:8px;display:block}
    .hero h1{font-family:var(--serif);font-size:32px;font-weight:400;margin-bottom:4px}
    .hero h1 em{font-style:italic;background:linear-gradient(135deg,var(--green),var(--green-deep));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
    .hero-sub{font-size:13px;color:var(--muted);font-weight:500}
    .stats{display:flex;justify-content:center;gap:24px;padding:16px 0 20px}
    .stat{text-align:center}
    .stat-val{font-family:var(--display);font-size:28px;letter-spacing:1px}
    .stat-lb{font-size:10px;color:var(--muted);font-weight:700;letter-spacing:1.5px;text-transform:uppercase;margin-top:2px}
    .cats{display:flex;gap:8px;overflow-x:auto;-webkit-overflow-scrolling:touch;padding:0 0 16px;scrollbar-width:none}
    .cats::-webkit-scrollbar{display:none}
    .cat{flex-shrink:0;padding:10px 16px;border-radius:100px;border:1.5px solid rgba(255,255,255,.08);background:var(--surface);font-size:13px;font-weight:600;color:var(--muted);display:flex;align-items:center;gap:6px;transition:all .2s;-webkit-tap-highlight-color:transparent}
    .cat:active{transform:scale(.95)}
    .cat.on{border-color:rgba(45,212,168,.3);background:rgba(45,212,168,.1);color:var(--green)}
    .cat-i{font-size:16px}
    .grid-wrap{background:var(--surface);border:1.5px solid rgba(255,255,255,.05);border-radius:var(--radius);padding:14px;margin-bottom:14px}
    .grid{display:grid;gap:3px;-webkit-user-select:none;user-select:none}
    .cell{aspect-ratio:1;display:flex;align-items:center;justify-content:center;font-family:var(--display);font-size:clamp(15px,4.2vw,20px);letter-spacing:1px;color:var(--text);background:var(--surface2);border-radius:6px;cursor:pointer;-webkit-tap-highlight-color:transparent;touch-action:manipulation;-webkit-user-select:none;user-select:none;transition:background .12s,transform .12s,box-shadow .12s}
    .cell.sel{background:var(--purple);color:white;transform:scale(1.1);box-shadow:0 0 12px rgba(139,92,246,.5);z-index:2;position:relative}
    .cell.f0{background:#2DD4A8;color:var(--night)}
    .cell.f1{background:#3B82F6;color:white}
    .cell.f2{background:#D4A843;color:var(--night)}
    .cell.f3{background:#8B5CF6;color:white}
    .cell.f4{background:#F97316;color:white}
    .cell.f5{background:#EC4899;color:white}
    @keyframes pop{0%{transform:scale(1)}50%{transform:scale(1.12)}100%{transform:scale(1)}}
    .cell.just-found{animation:pop .3s ease}
    .words{display:flex;flex-wrap:wrap;gap:6px;justify-content:center;margin-bottom:14px}
    .word{padding:5px 12px;border-radius:100px;font-size:12px;font-weight:700;letter-spacing:.5px;background:var(--surface);border:1.5px solid rgba(255,255,255,.06);color:var(--muted);transition:all .3s}
    .word.found{background:var(--green);color:var(--night);border-color:var(--green);text-decoration:line-through}
    .done-msg{display:none;text-align:center;padding:16px;font-family:var(--serif);font-size:20px;color:var(--green)}
    .actions{display:flex;gap:8px;justify-content:center;margin-bottom:32px}
    .act{padding:12px 20px;border:none;border-radius:14px;font-size:13px;font-weight:700;transition:all .2s;min-height:46px;-webkit-tap-highlight-color:transparent}
    .act:active{transform:scale(.95)}
    .act-new{background:linear-gradient(135deg,var(--green),var(--green-deep));color:var(--night);box-shadow:0 4px 16px rgba(45,212,168,.25)}
    .act-hint{background:var(--surface);color:var(--gold);border:1.5px solid rgba(212,168,67,.15)}
    .act-clear{background:var(--surface);color:var(--muted);border:1.5px solid rgba(255,255,255,.06)}
    .fab{position:fixed;bottom:24px;right:24px;z-index:9999;display:flex;align-items:center;gap:10px;background:linear-gradient(135deg,#7C3AED,#9333EA,#A855F7);border:2px solid rgba(255,215,0,.3);border-radius:60px;padding:12px 22px 12px 16px;text-decoration:none;box-shadow:0 4px 24px rgba(124,58,237,.45);transition:all .25s;-webkit-tap-highlight-color:transparent}
    .fab:active{transform:scale(1.04);border-color:#F0C75E}
    .fab-av{width:34px;height:34px;border-radius:50%;background:linear-gradient(135deg,#D4A843,#FF6B35);display:flex;align-items:center;justify-content:center;font-size:17px;flex-shrink:0;position:relative}
    .fab-av::after{content:'';position:absolute;top:-2px;right:-2px;width:11px;height:11px;border-radius:50%;background:#10B981;border:2.5px solid #7C3AED;animation:pulse 2s ease infinite}
    @keyframes pulse{0%,100%{box-shadow:0 0 0 0 rgba(16,185,129,.5)}50%{box-shadow:0 0 0 5px rgba(16,185,129,0)}}
    .fab-tx{font-family:'Bebas Neue',sans-serif;font-size:14px;letter-spacing:2px;color:white}
    @media(max-width:420px){.hero h1{font-size:28px}.fab{bottom:20px;right:16px;padding:10px 18px 10px 12px}.fab-av{width:30px;height:30px;font-size:15px}.fab-tx{font-size:12px}}
  </style>
</head>
<body>
  <div class="bg"></div>
  <div class="wrap">
    <nav class="nav">
      <a href="/" class="nav-back">‚Üê</a>
      <span class="nav-title">HEY BORI</span>
      <span class="nav-flag">üáµüá∑</span>
    </nav>
    <section class="hero">
      <span class="hero-icon">üî§</span>
      <h1>LeLoLai <em>Letras</em></h1>
      <p class="hero-sub">Palabras Boricuas ¬∑ Entrena tu mente üáµüá∑</p>
    </section>
    <div class="stats">
      <div class="stat"><div class="stat-val" id="sFound">0</div><div class="stat-lb">Encontradas</div></div>
      <div class="stat"><div class="stat-val" id="sTotal">0</div><div class="stat-lb">Total</div></div>
      <div class="stat"><div class="stat-val" id="sTime">0:00</div><div class="stat-lb">Tiempo</div></div>
    </div>
    <div class="cats" id="cats">
      <button class="cat on" onclick="pickCat('comida',this)"><span class="cat-i">üçΩÔ∏è</span>Comida</button>
      <button class="cat" onclick="pickCat('musica',this)"><span class="cat-i">üéµ</span>M√∫sica</button>
      <button class="cat" onclick="pickCat('pueblos',this)"><span class="cat-i">üèòÔ∏è</span>Pueblos</button>
      <button class="cat" onclick="pickCat('cultura',this)"><span class="cat-i">üáµüá∑</span>Cultura</button>
      <button class="cat" onclick="pickCat('naturaleza',this)"><span class="cat-i">üå¥</span>Naturaleza</button>
      <button class="cat" onclick="pickCat('familia',this)"><span class="cat-i">üë®‚Äçüë©‚Äçüëß</span>Familia</button>
    </div>
    <div class="grid-wrap">
      <div class="grid" id="grid"></div>
    </div>
    <div class="words" id="wordList"></div>
    <div class="done-msg" id="doneMsg">üéâ ¬°Wepa! ¬°Las encontraste todas!</div>
    <div class="actions">
      <button class="act act-clear" onclick="clearSel()">‚úï Borrar</button>
      <button class="act act-hint" onclick="hint()">üí° Pista</button>
      <button class="act act-new" onclick="newGame()">üîÑ Nuevo</button>
    </div>
  </div>
  <a class="fab" href="/habla">
    <div class="fab-av">üáµüá∑</div>
    <span class="fab-tx">HABLA CON BORI</span>
  </a>
<script>
var WORDS={
  comida:['MOFONGO','TOSTONES','ARROZ','HABICHUELAS','LECHON','ALCAPURRIA','SORULLITO','TEMBLEQUE','COQUITO','GUINEO','PLATANO','BACALAO','ASOPAO','PASTELES','AMARILLO'],
  musica:['SALSA','BOMBA','PLENA','REGGAETON','GUIRO','CONGA','MARACAS','CLAVE','BONGO','TIMBAL','CUATRO','TROVA','RUMBA','MERENGUE','BOLERO'],
  pueblos:['PONCE','BAYAMON','CAGUAS','ARECIBO','MAYAGUEZ','HUMACAO','FAJARDO','RINCON','ADJUNTAS','LOIZA','VIEQUES','CULEBRA','YAUCO','GUANICA','ISABELA'],
  cultura:['COQUI','VEJIGANTE','JIBARO','BORICUA','TAINO','HAMACA','GUAYABERA','PILONES','DOMINOES','NAVIDAD','PARRANDAS','CHINCHORRO','BONITA','WEPA','BENDITO'],
  naturaleza:['FLAMBOYAN','CEIBA','YUNQUE','MANGLAR','COQUI','PALMA','MANGO','GUAYABA','PAPAYA','COLIBRI','IGUANA','PLAYA','CORAL','LAGUNA','CASCADA'],
  familia:['ABUELA','ABUELO','MAMA','PAPA','HERMANA','HERMANO','PRIMA','PRIMO','TIA','TIO','NIETA','NIETO','COMADRE','COMPADRE','FAMILIA']
};
var SIZE=10,COLORS=['f0','f1','f2','f3','f4','f5'];
var cat='comida',grid=[],placed=[],wordList=[],found=[],selected=[],colorIdx=0;
var timer=null,seconds=0;

function pickCat(c,btn){
  cat=c;
  var btns=document.querySelectorAll('.cat');
  for(var i=0;i<btns.length;i++)btns[i].classList.remove('on');
  btn.classList.add('on');
  newGame();
}

function newGame(){
  found=[];colorIdx=0;selected=[];
  document.getElementById('doneMsg').style.display='none';
  var pool=WORDS[cat]||WORDS.comida;
  var shuffled=pool.slice().sort(function(){return Math.random()-.5;});
  wordList=[];placed=[];grid=[];
  var r,c;
  for(r=0;r<SIZE;r++){grid[r]=[];for(c=0;c<SIZE;c++)grid[r][c]='';}
  var dirs=[[0,1],[1,0],[1,1],[0,-1],[1,-1]];
  for(var wi=0;wi<shuffled.length;wi++){
    if(wordList.length>=8)break;
    var w=shuffled[wi].toUpperCase().replace(/[^A-Z√Å√â√ç√ì√ö√ë]/g,'');
    if(w.length>SIZE)continue;
    var ok=false;
    for(var att=0;att<80&&!ok;att++){
      var d=dirs[Math.floor(Math.random()*dirs.length)];
      var maxR=SIZE-(d[0]>0?w.length:0),maxC=SIZE-(d[1]>0?w.length:0);
      var minR=d[0]<0?w.length-1:0,minC=d[1]<0?w.length-1:0;
      if(maxR<=minR||maxC<=minC)continue;
      var sr=minR+Math.floor(Math.random()*(maxR-minR));
      var sc=minC+Math.floor(Math.random()*(maxC-minC));
      var cells=[],valid=true;
      for(var i=0;i<w.length;i++){
        var nr=sr+i*d[0],nc=sc+i*d[1];
        if(nr<0||nr>=SIZE||nc<0||nc>=SIZE){valid=false;break;}
        if(grid[nr][nc]!==''&&grid[nr][nc]!==w[i]){valid=false;break;}
        cells.push([nr,nc]);
      }
      if(valid){
        for(var i=0;i<w.length;i++)grid[cells[i][0]][cells[i][1]]=w[i];
        placed.push({word:w,cells:cells});
        wordList.push(shuffled[wi]);
        ok=true;
      }
    }
  }
  var letters='ABCDEFGHIJKLMN√ëOPQRSTUVWXYZ';
  for(r=0;r<SIZE;r++)for(c=0;c<SIZE;c++)if(grid[r][c]==='')grid[r][c]=letters[Math.floor(Math.random()*letters.length)];
  renderGrid();
  renderWords();
  startTimer();
  document.getElementById('sTotal').textContent=wordList.length;
  document.getElementById('sFound').textContent='0';
}

function renderGrid(){
  var el=document.getElementById('grid');
  el.style.gridTemplateColumns='repeat('+SIZE+',1fr)';
  var html='';
  for(var r=0;r<SIZE;r++){
    for(var c=0;c<SIZE;c++){
      html+='<div class="cell" data-r="'+r+'" data-c="'+c+'" onclick="tap(this)">'+grid[r][c]+'</div>';
    }
  }
  el.innerHTML=html;
}

function tap(cell){
  var r=parseInt(cell.getAttribute('data-r'));
  var c=parseInt(cell.getAttribute('data-c'));
  if(isNaN(r)||isNaN(c))return;

  if(selected.length>0){
    var last=selected[selected.length-1];
    if(last.r===r&&last.c===c){
      cell.classList.remove('sel');
      if(cell.getAttribute('data-fc'))cell.classList.add(cell.getAttribute('data-fc'));
      selected.pop();
      return;
    }
  }

  if(selected.length>0){
    var last=selected[selected.length-1];
    var dr=r-last.r,dc=c-last.c;
    if(Math.abs(dr)>1||Math.abs(dc)>1)return;
    if(selected.length>=2){
      var d0r=selected[1].r-selected[0].r,d0c=selected[1].c-selected[0].c;
      if(dr!==d0r||dc!==d0c)return;
    }
    for(var si=0;si<selected.length;si++){
      if(selected[si].r===r&&selected[si].c===c)return;
    }
  }

  selected.push({r:r,c:c});

  var fc=null;
  for(var ci=0;ci<COLORS.length;ci++){
    if(cell.classList.contains(COLORS[ci])){fc=COLORS[ci];break;}
  }
  if(fc){cell.setAttribute('data-fc',fc);cell.classList.remove(fc);}
  cell.classList.add('sel');

  var selWord='';
  for(var si=0;si<selected.length;si++)selWord+=grid[selected[si].r][selected[si].c];
  var revWord=selWord.split('').reverse().join('');

  var foundIdx=-1;
  for(var i=0;i<placed.length;i++){
    if(found.indexOf(placed[i].word)>=0)continue;
    if(placed[i].word===selWord||placed[i].word===revWord){foundIdx=i;break;}
  }

  if(foundIdx>=0){
    var cc=COLORS[colorIdx%COLORS.length];
    colorIdx++;
    var pw=placed[foundIdx];
    found.push(pw.word);
    var selCells=document.querySelectorAll('.cell.sel');
    for(var sci=0;sci<selCells.length;sci++){selCells[sci].classList.remove('sel');selCells[sci].removeAttribute('data-fc');}
    for(var pi=0;pi<pw.cells.length;pi++){
      var pos=pw.cells[pi];
      var cl=document.querySelector('.cell[data-r="'+pos[0]+'"][data-c="'+pos[1]+'"]');
      if(cl){for(var fi=0;fi<COLORS.length;fi++)cl.classList.remove(COLORS[fi]);cl.className='cell '+cc+' just-found';cl.setAttribute('data-fc',cc);}
    }
    selected=[];
    renderWords();
    document.getElementById('sFound').textContent=found.length;
    playTone();
    if(found.length===wordList.length){
      document.getElementById('doneMsg').style.display='block';
      clearInterval(timer);
      playWin();
      try{var savedPin=localStorage.getItem('bori_pin');if(savedPin){fetch('/api/activity',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({userId:savedPin,event:'game',detail:{game:'LeLoLai Letras',category:cat}})}).catch(function(){});}}catch(e){}
    }
  }
}

function clearSel(){
  var selCells=document.querySelectorAll('.cell.sel');
  for(var i=0;i<selCells.length;i++){
    selCells[i].classList.remove('sel');
    var fc=selCells[i].getAttribute('data-fc');
    if(fc){selCells[i].classList.add(fc);selCells[i].removeAttribute('data-fc');}
  }
  selected=[];
}

function renderWords(){
  var el=document.getElementById('wordList');
  var html='';
  for(var i=0;i<wordList.length;i++){
    var w=wordList[i];
    var upper=w.toUpperCase().replace(/[^A-Z√Å√â√ç√ì√ö√ë]/g,'');
    var isFound=found.indexOf(upper)>=0;
    html+='<span class="word'+(isFound?' found':'')+'">'+w+'</span>';
  }
  el.innerHTML=html;
}

function hint(){
  var remaining=[];
  for(var i=0;i<placed.length;i++){if(found.indexOf(placed[i].word)<0)remaining.push(placed[i]);}
  if(!remaining.length)return;
  var h=remaining[Math.floor(Math.random()*remaining.length)];
  var pos=h.cells[0];
  var cell=document.querySelector('.cell[data-r="'+pos[0]+'"][data-c="'+pos[1]+'"]');
  if(cell){cell.style.background='#F0C75E';cell.style.color='#0B0B14';setTimeout(function(){if(!cell.getAttribute('data-fc')){cell.style.background='';cell.style.color='';}},2000);}
}

function startTimer(){
  if(timer)clearInterval(timer);
  seconds=0;
  document.getElementById('sTime').textContent='0:00';
  timer=setInterval(function(){seconds++;var m=Math.floor(seconds/60),s=seconds%60;document.getElementById('sTime').textContent=m+':'+(s<10?'0'+s:s);},1000);
}

function playTone(){try{var c=new(window.AudioContext||window.webkitAudioContext)(),o=c.createOscillator(),g=c.createGain();o.connect(g);g.connect(c.destination);o.type='triangle';o.frequency.setValueAtTime(523,c.currentTime);o.frequency.exponentialRampToValueAtTime(660,c.currentTime+.1);g.gain.setValueAtTime(.3,c.currentTime);g.gain.exponentialRampToValueAtTime(.01,c.currentTime+.2);o.start(c.currentTime);o.stop(c.currentTime+.2);}catch(e){}}
function playWin(){try{var c=new(window.AudioContext||window.webkitAudioContext)();[330,415,523].forEach(function(f,i){var o=c.createOscillator(),g=c.createGain();o.connect(g);g.connect(c.destination);o.type='sine';o.frequency.setValueAtTime(f,c.currentTime+i*.15);g.gain.setValueAtTime(.25,c.currentTime+i*.15);g.gain.exponentialRampToValueAtTime(.01,c.currentTime+.7);o.start(c.currentTime+i*.15);o.stop(c.currentTime+.7);});}catch(e){}}

newGame();
</script>
</body>
</html>
